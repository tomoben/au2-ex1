(()=>{"use strict";var t,e,s={970:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(81),n=s.n(i),r=s(645),o=s.n(r)()(n());o.push([t.id,"body.au {\n  font-family: Roboto, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  /** Make Scroll fancy **/\n}\nbody.au .page {\n  display: grid;\n  grid-auto-flow: row;\n  grid-template-rows: 40px 880px;\n}\nbody.au .page nav {\n  align-items: center;\n  display: grid;\n  gap: 8px;\n  grid-auto-flow: column;\n  justify-content: start;\n  padding: 8px 24px;\n}\nbody.au .page au-viewport {\n  background-color: rgba(255, 193, 7, 0.01);\n  border: 2px solid #eeeeee;\n  display: block;\n  margin: 24px;\n  overflow: auto;\n  padding: 24px;\n}\nbody.au .fancy-scroll {\n  /* width */\n  /* Track */\n  /* Handle */\n  /* Handle on hover */\n}\nbody.au .fancy-scroll::-webkit-scrollbar {\n  width: 8px;\n}\nbody.au .fancy-scroll::-webkit-scrollbar-track {\n  background-color: #f0f2f2;\n}\nbody.au .fancy-scroll::-webkit-scrollbar-thumb {\n  background-color: #d7d7d7;\n}\nbody.au .fancy-scroll::-webkit-scrollbar-thumb:hover {\n  background: #666666;\n}\n",""]);const a=o},372:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(81),n=s.n(i),r=s(645),o=s.n(r)()(n());o.push([t.id,'.converted-city {\n  font-weight: bold;\n}\n.current-weather {\n  background-color: #ffffee;\n  border: 1px solid #eeeeee;\n  border-radius: 6px;\n  display: inline-block;\n  padding: 6px;\n}\n.current-weather [class*="col-"] {\n  padding: 0;\n}\n.current-weather .current-weather-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 48px;\n}\n.current-weather .temperature {\n  display: inline-block;\n  font-size: 2em;\n  height: 48px;\n}\n.current-weather .temperature-units sup {\n  font-size: 2em;\n  top: 0;\n}\n.current-weather .weather-description {\n  padding-left: 6px;\n  text-align: center;\n}\n.no-data {\n  font-weight: bold;\n}\n.map-box {\n  border: 2px solid rgba(128, 128, 128, 0.5);\n  margin: 20px 0;\n}\n',""]);const a=o},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(o[h]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);i&&o[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),s&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=s):l[2]=s),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),e.push(l))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var h=t[a],c=i.base?h[0]+i.base:h[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var d=s(u),p={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=n(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function n(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var r=i(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=s(r[o]);e[a].references--}for(var h=i(t,n),c=0;c<r.length;c++){var l=s(r[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=h}}},569:t=>{var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},909:(t,e,s)=>{s.d(e,{k:()=>g});var i=s(344);const n={maxRetries:3,interval:1e3,strategy:0};class r{constructor(t){if(this.retryConfig={...n,...void 0!==t?t:{}},2===this.retryConfig.strategy&&this.retryConfig.interval<=1e3)throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy")}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return Reflect.deleteProperty(e,"retryConfig"),t}responseError(t,e,s){const{retryConfig:i}=e,{requestClone:n}=i;return Promise.resolve().then((()=>{if(i.counter<i.maxRetries){const r=void 0===i.doRetry||i.doRetry(t,e);return Promise.resolve(r).then((r=>{if(r){i.counter++;const t=o(i);return new Promise((e=>setTimeout(e,isNaN(t)?0:t))).then((()=>{const t=n.clone();return"function"==typeof i.beforeRetry?i.beforeRetry(t,s):t})).then((t=>{const e={...t,retryConfig:i};return s.fetch(e)}))}throw Reflect.deleteProperty(e,"retryConfig"),t}))}throw Reflect.deleteProperty(e,"retryConfig"),t}))}}function o(t){const{interval:e,strategy:s,minRandomInterval:i,maxRandomInterval:n,counter:r}=t;if("function"==typeof s)return t.strategy(r);switch(s){case 0:return a[0](e);case 1:return a[1](r,e);case 2:return a[2](r,e);case 3:return a[3](r,e,i,n);default:throw new Error("Unrecognized retry strategy")}}const a=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,s=0,i=6e4)=>Math.random()*(i-s)+s];class h{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:c})}withRetry(t){const e=new r(t);return this.withInterceptor(e)}withDispatcher(t){return this.dispatcher=t,this}}function c(t){if(!t.ok)throw t;return t}const l=/^([a-z][a-z0-9+\-.]*:)?\/\//i;class u{constructor(){this.dispatcher=null,this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[]}configure(t){let e;if("object"==typeof t)e={defaults:t};else{if("function"!=typeof t)throw new Error("invalid config");{e=new h,e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.interceptors,e.dispatcher=this.dispatcher;const s=t(e);Object.prototype.isPrototypeOf.call(h.prototype,s)&&(e=s)}}const s=e.defaults;if(void 0!==s&&Object.prototype.isPrototypeOf.call(Headers.prototype,s.headers))throw new Error("Default headers must be a plain object.");const i=e.interceptors;if(void 0!==i&&i.length){if(i.filter((t=>Object.prototype.isPrototypeOf.call(r.prototype,t))).length>1)throw new Error("Only one RetryInterceptor is allowed.");const t=i.findIndex((t=>Object.prototype.isPrototypeOf.call(r.prototype,t)));if(t>=0&&t!==i.length-1)throw new Error("The retry interceptor must be the last interceptor defined.")}return this.baseUrl=e.baseUrl,this.defaults=s,this.interceptors=void 0!==e.interceptors?e.interceptors:[],this.dispatcher=e.dispatcher,this.isConfigured=!0,this}fetch(t,e){this.trackRequestStart();let s=this.buildRequest(t,e);return this.processRequest(s,this.interceptors).then((t=>{let e;if(Object.prototype.isPrototypeOf.call(Response.prototype,t))e=Promise.resolve(t);else{if(!Object.prototype.isPrototypeOf.call(Request.prototype,t))throw new Error(`An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [${t}]`);s=t,e=fetch(s)}return this.processResponse(e,this.interceptors,s)})).then((t=>Object.prototype.isPrototypeOf.call(Request.prototype,t)?this.fetch(t):t)).then((t=>(this.trackRequestEnd(),t)),(t=>{throw this.trackRequestEnd(),t}))}buildRequest(t,e){const s=null!==this.defaults?this.defaults:{};let i,n,r;const o=function(t){const e={},s=void 0!==t?t:{};for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]="function"==typeof s[t]?s[t]():s[t]);return e}(s.headers);if(Object.prototype.isPrototypeOf.call(Request.prototype,t))i=t,r=new Headers(i.headers).get("Content-Type");else{e||(e={}),n=e.body;const o=void 0!==n?{body:n}:null,a={...s,headers:{},...e,...o};r=new Headers(a.headers).get("Content-Type"),i=new Request(d(this.baseUrl,t),a)}return r||(new Headers(o).has("content-type")?i.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==n&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(n)&&i.headers.set("Content-Type","application/json")),function(t,e){const s=void 0!==e?e:{};for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&!t.has(e)&&t.set(e,s[e])}(i.headers,o),void 0!==n&&Object.prototype.isPrototypeOf.call(Blob.prototype,n)&&n.type&&i.headers.set("Content-Type",n.type),i}get(t,e){return this.fetch(t,e)}post(t,e,s){return this.callFetch(t,e,s,"POST")}put(t,e,s){return this.callFetch(t,e,s,"PUT")}patch(t,e,s){return this.callFetch(t,e,s,"PATCH")}delete(t,e,s){return this.callFetch(t,e,s,"DELETE")}trackRequestStart(){if(this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!==this.dispatcher){const t=new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-request-started",{bubbles:!0,cancelable:!0});setTimeout((()=>{this.dispatcher.dispatchEvent(t)}),1)}}trackRequestEnd(){if(this.isRequesting=!!--this.activeRequestCount,!this.isRequesting&&null!==this.dispatcher){const t=new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-requests-drained",{bubbles:!0,cancelable:!0});setTimeout((()=>{this.dispatcher.dispatchEvent(t)}),1)}}processRequest(t,e){return this.applyInterceptors(t,e,"request","requestError",this)}processResponse(t,e,s){return this.applyInterceptors(t,e,"response","responseError",s,this)}applyInterceptors(t,e,s,i,...n){return(void 0!==e?e:[]).reduce(((t,e)=>{const r=e[s],o=e[i];return t.then(r?t=>r.call(e,t,...n):p,o?t=>o.call(e,t,...n):f)}),Promise.resolve(t))}callFetch(t,e,s,i){return s||(s={}),s.method=i,e&&(s.body=e),this.fetch(t,s)}}function d(t,e){return l.test(e)?e:(void 0!==t?t:"")+e}function p(t){return t}function f(t){throw t}let g=class{constructor(t){this.http=t,t.configure((t=>t.useStandardConfiguration()))}async getUsers(t){return this.http.baseUrl="https://api.github.com/users",this.http.fetch(t).then((t=>t.json()))}async getUser(t){return this.http.baseUrl="https://api.github.com/users/",this.http.fetch(t).then((t=>t.json()))}getWeatherCurrentGeosearch(t,e){const s=`?key=${t}&city=${e}`;return this.http.baseUrl="http://api.weatherbit.io/v2.0/current",this.http.fetch(s).then((t=>{if(200===t.status)return t.json();throw new Error("Invalid city")})).catch((t=>(console.error(t),{error:t})))}getWeatherIconUrl(t,e){return`https://www.weatherbit.io/static/img/icons/${e}.png?key=${t}`}};g=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}([(0,i.f3)(u),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[u])],g)},344:(t,e,s)=>{s.d(e,{$6:()=>kt,BR:()=>k,DB:()=>G,DI:()=>pt,E8:()=>D,FD:()=>Rt,GL:()=>m,H3:()=>bt,Ho:()=>v,JW:()=>L,P2:()=>gt,Protocol:()=>B,Qy:()=>C,Rp:()=>Jt,TD:()=>$,TI:()=>Ot,Xo:()=>Dt,YM:()=>$t,ZT:()=>Et,bE:()=>ft,eG:()=>y,eV:()=>g,f3:()=>mt,g:()=>xt,hS:()=>Xt,jt:()=>Ct,ow:()=>It,p9:()=>T,pU:()=>U,qo:()=>w,y5:()=>p});var i=s(932);const n=String,r=i.SF.getOwn,o=i.SF.hasOwn,a=i.SF.define,h=t=>"function"==typeof t,c=t=>"string"==typeof t,l=()=>Object.create(null),u=(t,...e)=>new Error(`AUR${n(t).padStart(4,"0")}:${e.map(n)}`),d={},p=t=>{switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=d[t];if(void 0!==e)return e;const s=t.length;if(0===s)return d[t]=!1;let i=0,n=0;for(;n<s;++n)if(i=x(t,n),0===n&&48===i&&s>1||i<48||i>57)return d[t]=!1;return d[t]=!0}default:return!1}},f=function(){const t=Object.assign(l(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,s)=>{const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",h=0,c=t.charAt(0),l=e(c),u=0;for(;u<i;++u)n=h,a=c,h=l,c=t.charAt(u+1),l=e(c),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===l),o+=s(a,r),r=!1);return o}}(),g=function(){const t=l(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=f(s,e)),i}}(),v=function(){const t=l();return e=>{let s=t[e];return void 0===s&&(s=g(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),m=function(){const t=l(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=f(s,e)),i}}(),w=t=>{const e=t.length,s=Array(e);let i=0;for(;i<e;++i)s[i]=t[i];return s},b=(t,e,s)=>({configurable:!0,enumerable:s.enumerable,get(){const t=s.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:s.enumerable}),t}}),y=(...t)=>{const e=[];let s=0;const i=t.length;let n,r=0,o=0;for(;o<i;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[s++]=n[t]}return e},k=(...t)=>{const e=t.length;let s,i=0;for(;e>i;++i)if(s=t[i],void 0!==s)return s;throw u(20)},C=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i,n=t,r=0;return function(o){if(i=s.get(o),void 0===i)for(s.set(o,i=[n=o]),r=0;(n=e(n))!==t;)i[++r]=n;return i}}();function S(...t){return Object.assign(l(),...t)}const A=function(){const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),void 0===e&&(s=n.toString(),i=s.length,e=i>=29&&i<=100&&125===x(s,i-1)&&x(s,i-2)<=32&&93===x(s,i-3)&&101===x(s,i-4)&&100===x(s,i-5)&&111===x(s,i-6)&&99===x(s,i-7)&&32===x(s,i-8)&&101===x(s,i-9)&&118===x(s,i-10)&&105===x(s,i-11)&&116===x(s,i-12)&&97===x(s,i-13)&&110===x(s,i-14)&&88===x(s,i-15),t.set(n,e)),e)}(),T=(t,e)=>t instanceof Promise?t.then(e):e(t),$=(...t)=>{let e,s,i,n=0,r=t.length;for(;n<r;++n)e=t[n],(e=t[n])instanceof Promise&&(void 0===s?s=e:void 0===i?i=[s,e]:i.push(e));return void 0===i?s:Promise.all(i)},x=(t,e)=>t.charCodeAt(e),I="au:annotation",R=(t,e)=>void 0===e?`${I}:${t}`:`${I}:${t}:${e}`,E=(t,e)=>{const s=r(I,t);void 0===s?a(I,[e],t):s.push(e)},O=Object.freeze({name:"au:annotation",appendTo:E,set(t,e,s){a(R(e),s,t)},get:(t,e)=>r(R(e),t),getKeys(t){let e=r(I,t);return void 0===e&&a(I,e=[],t),e},isKey:t=>t.startsWith(I),keyFor:R}),P="au:resource",M=t=>o(P,t),N=t=>{const e=r(P,t);return void 0===e?It:e.map((e=>r(e,t)))},B={annotation:O,resource:Object.freeze({name:P,appendTo(t,e){const s=r(P,t);void 0===s?a(P,[e],t):s.push(e)},has:M,getAll:N,getKeys(t){let e=r(P,t);return void 0===e&&a(P,e=[],t),e},isKey:t=>t.startsWith(P),keyFor:(t,e)=>void 0===e?`${P}:${t}`:`${P}:${t}:${e}`})},j=Object.prototype.hasOwnProperty;function L(t,e,s,i){let n=r(R(t),s);return void 0===n?(n=e[t],void 0===n?(n=s[t],void 0!==n&&j.call(s,t)?n:i()):n):n}function U(t,e,s){let i=r(R(t),e);return void 0===i?(i=e[t],void 0!==i&&j.call(e,t)?i:s()):i}function D(t,e,s){const i=e[t];return void 0===i?s():i}const F=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let V=0,W=null;class _{get depth(){return null===this.parent?0:this.parent.depth+1}constructor(t,e){if(this.parent=t,this.config=e,this.id=++V,this.t=0,this.i=new Map,null===t)this.root=this,this.u=new Map,this.h=new Map,this.res={};else if(this.root=t.root,this.u=new Map,this.h=t.h,this.res={},e.inheritParentResources)for(const e in t.res)this.registerResolver(e,t.res[e]);this.u.set(ft,J)}register(...t){if(100==++this.t)throw u(6,...t);let e,s,n,r,o,a=0,h=t.length;for(;a<h;++a)if(e=t[a],(0,i.Kn)(e))if(X(e))e.register(this);else if(M(e)){const t=N(e);if(1===t.length)t[0].register(this);else for(r=0,o=t.length;o>r;)t[r].register(this),++r}else if(Z(e))$t.singleton(e,e).register(this);else for(s=Object.keys(e),r=0,o=s.length;r<o;++r)n=e[s[r]],(0,i.Kn)(n)&&(X(n)?n.register(this):this.register(n));return--this.t,this}registerResolver(t,e,s=!1){K(t);const i=this.u,n=i.get(t);if(null==n){if(i.set(t,e),tt(t)){if(void 0!==this.res[t])throw u(7,t);this.res[t]=e}}else n instanceof At&&4===n.R?n._state.push(e):i.set(t,new At(t,4,[n,e]));return s&&this.i.set(t,e),e}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(K(t),void 0!==t.resolve)return t;const s=W;let i,n,r=W=this;try{for(;null!=r;){if(i=r.u.get(t),null!=i)return i;if(null==r.parent)return n=Y(t)?this:r,e?this.C(t,n):null;r=r.parent}}finally{W=s}return null}has(t,e=!1){return!!(this.u.has(t)||tt(t)&&t in this.res)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(K(t),t.$isResolver)return t.resolve(this,this);const e=W;let s,i,n=W=this;try{for(;null!=n;){if(s=n.u.get(t),null!=s)return s.resolve(n,this);if(null==n.parent)return i=Y(t)?this:n,s=this.C(t,i),s.resolve(n,this);n=n.parent}}finally{W=e}throw u(8,t)}getAll(t,e=!1){K(t);const s=W,i=W=this;let n,r=i,o=It;try{if(e){for(;null!=r;)n=r.u.get(t),null!=n&&(o=o.concat(Q(n,r,i))),r=r.parent;return o}for(;null!=r;){if(n=r.u.get(t),null!=n)return Q(n,r,i);if(r=r.parent,null==r)return It}}finally{W=s}return It}invoke(t,e){const s=W;W=this;try{if(A(t))throw u(15,t);return void 0===e?new t(...ut(t).map(z,this)):new t(...ut(t).map(z,this),...e)}finally{W=s}}hasFactory(t){return this.h.has(t)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(A(t))throw u(15,t);this.h.set(t,e=new q(t,ut(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===ht.DEFAULT?new _(this,this.config):new _(this,ht.from({...this.config,inheritParentResources:!1})):new _(this,ht.from(t??this.config))}disposeResolvers(){const t=this.u,e=this.i;let s,i;for([i,s]of e.entries())s.dispose(),t.delete(i);e.clear()}find(t,e){const s=t.keyFrom(e);let i=this.res[s];if(void 0===i&&(i=this.root.res[s],void 0===i))return null;if(null===i)return null;if(h(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const s=r(t.name,e.Type);return void 0===s?null:s}return null}create(t,e){const s=t.keyFrom(e);let i=this.res[s];return void 0===i?(i=this.root.res[s],void 0===i?null:i.resolve(this.root,this)??null):i.resolve(this,this)??null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}C(t,e){if(!h(t))throw u(9,t);if(F.has(t.name))throw u(10,t);if(X(t)){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.u.get(t);if(null!=s)return s;throw u(11,t)}return s}if(M(t)){const s=N(t);if(1===s.length)s[0].register(e);else{const t=s.length;for(let i=0;i<t;++i)s[i].register(e)}const i=e.u.get(t);if(null!=i)return i;throw u(11,t)}if(t.$isInterface)throw u(12,t.friendlyName);const s=this.config.defaultResolver(t,e);return e.u.set(t,s),s}}class q{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){const s=W;let i;W=t;try{return i=void 0===e?new this.Type(...this.dependencies.map(z,t)):new this.Type(...this.dependencies.map(z,t),...e),null==this.transformers?i:this.transformers.reduce(H,i)}finally{W=s}}registerTransformer(t){(this.transformers??(this.transformers=[])).push(t)}}function H(t,e){return e(t)}function K(t){if(null==t)throw u(14)}function z(t){return this.get(t)}function G(...t){if(null==W)throw u(16,...t);return 1===t.length?W.get(t[0]):t.map(z,W)}const Q=(t,e,s)=>{if(t instanceof At&&4===t.R){const i=t._state,n=i.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=i[o].resolve(e,s);return r}return[t.resolve(e,s)]},J={$isResolver:!0,resolve:(t,e)=>e},X=t=>h(t.register),Y=t=>(t=>X(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,Z=t=>void 0!==t.prototype,tt=t=>c(t)&&t.indexOf(":")>0,et=(t,e)=>new At(t,0,e),st=(t,e)=>new At(t,1,e),it=new WeakMap,nt=t=>(e,s,i)=>{let n=it.get(e);if(void 0===n&&it.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r};(0,i.RT)(Reflect,!1,!1);class rt{constructor(t,e){this.c=t,this.k=e}instance(t){return this.L(0,t)}singleton(t){return this.L(1,t)}transient(t){return this.L(2,t)}callback(t){return this.L(3,t)}cachedCallback(t){return this.L(3,nt(t))}aliasTo(t){return this.L(5,t)}L(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new At(i,t,e))}}const ot=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],p(n)||(e[n]=t[n]);return e},at={none(t){throw u(2,t)},singleton:t=>new At(t,1,t),transient:t=>new At(t,2,t)};class ht{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===ht.DEFAULT?ht.DEFAULT:new ht(t.inheritParentResources??!1,t.defaultResolver??at.singleton)}}ht.DEFAULT=ht.from({});const ct=t=>{const e=R("di:paramtypes");return r(e,t)},lt=t=>{const e=R("di:paramtypes");let s=r(e,t);return void 0===s&&(a(e,s=[],t),E(t,e)),s},ut=t=>{const e=R("di:dependencies");let s=r(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=pt.getDesignParamtypes(t),i=ct(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=h(e)&&e!==Function.prototype?ot(ut(e)):[]}else s=ot(i);else if(void 0===i)s=ot(e);else{s=ot(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],p(a)||(s[a]=i[a])}}else s=ot(i);a(e,s,t),E(t,e)}return s},dt=(t,e)=>{const s=h(t)?t:e,i=(c(t)?t:void 0)??"(anonymous)",n=function(t,e,s){if(null==t||void 0!==new.target)throw u(1,i);lt(t)[s]=n};return n.$isInterface=!0,n.friendlyName=i,null!=s&&(n.register=(t,e)=>s(new rt(t,e??n))),n.toString=()=>`InterfaceSymbol<${i}>`,n},pt={createContainer:t=>new _(null,ht.from(t)),getDesignParamtypes:t=>r("design:paramtypes",t),getAnnotationParamtypes:ct,getOrCreateAnnotationParamTypes:lt,getDependencies:ut,createInterface:dt,inject:(...t)=>(e,s,i)=>{if("number"==typeof i){const s=lt(e),n=t[0];void 0!==n&&(s[i]=n)}else if(s){const i=lt(e.constructor),n=t[0];void 0!==n&&(i[s]=n)}else if(i){const e=i.value,s=lt(e);let n,r=0;for(;r<t.length;++r)n=t[r],void 0!==n&&(s[r]=n)}else{const s=lt(e);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(s[n]=i)}},transient:t=>(t.register=function(e){return $t.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=yt)=>(t.register=function(e){return $t.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)},ft=dt("IContainer"),gt=ft;function vt(t){return function(e){const s=function(t,e,i){mt(s)(t,e,i)};return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const mt=pt.inject;function wt(t){return pt.transient(t)}function bt(t){return null==t?wt:wt(t)}const yt={scoped:!1};pt.singleton;const kt=(t,e=!1)=>{function s(t,e,i){mt(s)(t,e,i)}return s.$isResolver=!0,s.resolve=(s,i)=>i.getAll(t,e),s},Ct=vt(((t,e,s)=>s.has(t,!0)?s.get(t):void 0)),St=(t,e,s)=>{mt(St)(t,e,s)};St.$isResolver=!0,St.resolve=()=>{};class At{constructor(t,e,s){this.resolving=!1,this.k=t,this.R=e,this._state=s}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.R){case 0:return this._state;case 1:if(this.resolving)throw u(3,this._state.name);return this.resolving=!0,this._state=t.getFactory(this._state).construct(e),this.R=0,this.resolving=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw u(4,this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw u(5,this.R)}}getFactory(t){switch(this.R){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;default:return null}}}class Tt{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const $t={instance:et,singleton:st,transient:(t,e)=>new At(t,2,e),callback:(t,e)=>new At(t,3,e),cachedCallback:(t,e)=>new At(t,3,nt(e)),aliasTo:(t,e)=>new At(e,5,t),defer:(t,...e)=>new Tt(t,e)};class xt{get friendlyName(){return this.O}constructor(t,e){this.$=null,this.O=t,void 0!==e&&(this.$=e)}prepare(t){this.$=t}get $isResolver(){return!0}resolve(){if(null==this.$)throw u(13,this.O);return this.$}dispose(){this.$=null}}const It=Object.freeze([]),Rt=Object.freeze({});function Et(){}const Ot=dt("IPlatform");function Pt(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}var Mt,Nt,Bt;(Bt=Mt||(Mt={}))[Bt.trace=0]="trace",Bt[Bt.debug=1]="debug",Bt[Bt.info=2]="info",Bt[Bt.warn=3]="warn",Bt[Bt.error=4]="error",Bt[Bt.fatal=5]="fatal",Bt[Bt.none=6]="none",function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Nt||(Nt={}));const jt=dt("ILogConfig",(t=>t.instance(new _t(0,3)))),Lt=dt("ISink"),Ut=dt("ILogEventFactory",(t=>t.singleton(zt))),Dt=dt("ILogger",(t=>t.singleton(Gt))),Ft=dt("ILogScope"),Vt=Object.freeze({key:R("logger-sink-handles"),define(t,e){return a(this.key,e.handles,t.prototype),t},getHandles(t){return i.SF.get(this.key,t)}}),Wt=S({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class _t{constructor(t,e){this.colorOptions=t,this.level=e}}const qt=function(){const t=[S({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),S({TRC:Wt.grey("TRC"),DBG:Wt.grey("DBG"),INF:Wt.white("INF"),WRN:Wt.yellow("WRN"),ERR:Wt.red("ERR"),FTL:Wt.red("FTL"),QQQ:Wt.grey("???")})];return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),Ht=(t,e)=>0===e?new Date(t).toISOString():Wt.grey(new Date(t).toISOString());class Kt{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${Ht(n,i)} [${qt(t,i)}] ${e}`:`${Ht(n,i)} [${qt(t,i)} ${((t,e)=>0===e?t.join("."):t.map(Wt.cyan).join("."))(s,i)}] ${e}`}}class zt{constructor(){this.config=G(jt)}createLogEvent(t,e,s,i){return new Kt(e,s,i,t.scope,this.config.colorOptions,Date.now())}}class Gt{constructor(t=G(jt),e=G(Ut),s=G(kt(Lt)),i=G(Ct(Ft))??[],n=null){let r,o,a,h,c,u;if(this.scope=i,this.A=l(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.j=[],o=this.I=[],a=this.F=[],h=this.M=[],c=this.T=[],u=this._=[];for(const t of s){const e=Vt.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&a.push(t),(e?.includes(3)??1)&&h.push(t),(e?.includes(4)??1)&&c.push(t),(e?.includes(5)??1)&&u.push(t)}}else this.root=n.root,this.parent=n,r=this.j=n.j,o=this.I=n.I,a=this.F=n.F,h=this.M=n.M,c=this.T=n.T,u=this._=n._}trace(t,...e){this.config.level<=0&&this.P(this.j,0,t,e)}debug(t,...e){this.config.level<=1&&this.P(this.I,1,t,e)}info(t,...e){this.config.level<=2&&this.P(this.F,2,t,e)}warn(t,...e){this.config.level<=3&&this.P(this.M,3,t,e)}error(t,...e){this.config.level<=4&&this.P(this.T,4,t,e)}fatal(t,...e){this.config.level<=5&&this.P(this._,5,t,e)}scopeTo(t){const e=this.A;let s=e[t];return void 0===s&&(s=e[t]=new Gt(this.config,this.f,null,this.scope.concat(t),this)),s}P(t,e,s,i){const n=h(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}}Pt([b],Gt.prototype,"trace",null),Pt([b],Gt.prototype,"debug",null),Pt([b],Gt.prototype,"info",null),Pt([b],Gt.prototype,"warn",null),Pt([b],Gt.prototype,"error",null),Pt([b],Gt.prototype,"fatal",null),S({create:({level:t=3,colorOptions:e=0,sinks:s=[]}={})=>S({register(i){i.register(et(jt,new _t(e,t)));for(const t of s)h(t)?i.register(st(Lt,t)):i.register(t);return i}})});class Qt{constructor(t,e){this.type=t,this.cb=e}handle(t){t instanceof this.type&&this.cb.call(null,t)}}const Jt=dt("IEventAggregator",(t=>t.singleton(Xt)));class Xt{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw u(18,t);if(c(t)){let s=this.eventLookup[t];if(void 0!==s){s=s.slice();let i=s.length;for(;i-- >0;)s[i](e,t)}}else{const e=this.messageHandlers.slice();let s=e.length;for(;s-- >0;)e[s].handle(t)}}subscribe(t,e){if(!t)throw u(19,t);let s,i;return c(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),s=e,i=this.eventLookup[t]):(s=new Qt(t,e),i=this.messageHandlers),i.push(s),{dispose(){const t=i.indexOf(s);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const s=this.subscribe(t,((t,i)=>{s.dispose(),e(t,i)}));return s}}},932:(t,e,s)=>{function i(t){return"object"==typeof t&&null!==t||"function"==typeof t}function n(t){return null==t}s.d(e,{Kn:()=>i,RT:()=>R,SF:()=>$});let r=new WeakMap;const o=(t,e,s,i,n)=>new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${s}' to be of type ${n}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`);function a(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function h(t,e,s){let i=r.get(t);if(void 0===i){if(!s)return;i=new Map,r.set(t,i)}let n=i.get(e);if(void 0===n){if(!s)return;n=new Map,i.set(e,n)}return n}function c(t,e,s){const i=h(e,s,!1);return void 0!==i&&i.has(t)}function l(t,e,s){if(c(t,e,s))return!0;const i=O(e);return null!==i&&l(t,i,s)}function u(t,e,s){const i=h(e,s,!1);if(void 0!==i)return i.get(t)}function d(t,e,s){if(c(t,e,s))return u(t,e,s);const i=O(e);return null!==i?d(t,i,s):void 0}function p(t,e,s,i){h(s,i,!0).set(t,e)}function f(t,e){const s=[],i=h(t,e,!1);if(void 0===i)return s;const n=i.keys();let r=0;for(const t of n)s[r]=t,++r;return s}function g(t,e){const s=f(t,e),i=O(t);if(null===i)return s;const n=g(i,e),r=s.length;if(0===r)return n;const o=n.length;if(0===o)return s;const a=new Set,h=[];let c,l=0;for(let t=0;t<r;++t)c=s[t],a.has(c)||(a.add(c),h[l]=c,++l);for(let t=0;t<o;++t)c=n[t],a.has(c)||(a.add(c),h[l]=c,++l);return h}function v(t,e){return function(s,n){if(!i(s))throw o("@metadata",[t,e,s,n],"target",s,"Object or Function");p(t,e,s,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(n))}}function m(t,e,s,r){if(void 0!==s){if(!Array.isArray(t))throw o("Metadata.decorate",[t,e,s,r],"decorators",t,"Array");if(!i(e))throw o("Metadata.decorate",[t,e,s,r],"target",e,"Object or Function");if(!i(r)&&!n(r))throw o("Metadata.decorate",[t,e,s,r],"attributes",r,"Object, Function, null, or undefined");return null===r&&(r=void 0),s=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(s),function(t,e,s,r){for(let a=t.length-1;a>=0;--a){const h=(0,t[a])(e,s,r);if(!n(h)){if(!i(h))throw o("DecorateProperty",[t,e,s,r],"decorated",h,"Object, Function, null, or undefined");r=h}}return r}(t,e,s,r)}if(!Array.isArray(t))throw o("Metadata.decorate",[t,e,s,r],"decorators",t,"Array");if("function"!=typeof e)throw o("Metadata.decorate",[t,e,s,r],"target",e,"Function");return function(t,e){for(let s=t.length-1;s>=0;--s){const i=(0,t[s])(e);if(!n(i)){if("function"!=typeof i)throw o("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function w(t,e,s,n){if(!i(s))throw o("Metadata.define",[t,e,s,n],"target",s,"Object or Function");return p(t,e,s,a(n))}function b(t,e,s){if(!i(e))throw o("Metadata.has",[t,e,s],"target",e,"Object or Function");return l(t,e,a(s))}function y(t,e,s){if(!i(e))throw o("Metadata.hasOwn",[t,e,s],"target",e,"Object or Function");return c(t,e,a(s))}function k(t,e,s){if(!i(e))throw o("Metadata.get",[t,e,s],"target",e,"Object or Function");return d(t,e,a(s))}function C(t,e,s){if(!i(e))throw o("Metadata.getOwn",[t,e,s],"target",e,"Object or Function");return u(t,e,a(s))}function S(t,e){if(!i(t))throw o("Metadata.getKeys",[t,e],"target",t,"Object or Function");return g(t,a(e))}function A(t,e){if(!i(t))throw o("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return f(t,a(e))}function T(t,e,s){if(!i(e))throw o("Metadata.delete",[t,e,s],"target",e,"Object or Function");return function(t,e,s){const i=h(t,s,!1);return void 0!==i&&i.delete(e)}(e,t,a(s))}const $={define:w,has:b,hasOwn:y,get:k,getOwn:C,getKeys:S,getOwnKeys:A,delete:T},x="[[$au]]",I=(t,e,s)=>[[x,r],["metadata",v],["decorate",m],["defineMetadata",w],["hasMetadata",b],["hasOwnMetadata",y],["getMetadata",k],["getOwnMetadata",C],["getMetadataKeys",S],["getOwnMetadataKeys",A],["deleteMetadata",T]].forEach((([i,n])=>((t,e,s,i,n)=>{if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:n,value:s}))throw E(`AUR1000:${e}`)})(t,i,n,e,s))),R=(t,e=!0,s=!1,i=!0,n=!0)=>{if((t=>x in t)(t)){if(t[x]===r)return;if(t[x]instanceof WeakMap)return void(r=t[x]);throw E("AUR1001")}const o="metadata decorate defineMetadata hasMetadata hasOwnMetadata getMetadata getOwnMetadata getMetadataKeys getOwnMetadataKeys deleteMetadata".split(" ").filter((t=>t in Reflect));if(o.length>0){if(e){const t=o.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw E(`AUR1002:${t}`)}s&&I(t,i,n)}else I(t,i,n)},E=t=>new Error(t),O=Object.getPrototypeOf},58:(t,e,s)=>{s.d(e,{o:()=>r});var i=s(968);const n=new Map;class r extends i.t4{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach((s=>this[s]=s in e?e[s]:t[s])),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach((s=>this[s]=s in e?e[s]:t[s]?.bind(t)??o(s))),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new i.wn(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new i.wn(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let s=n.get(t);return void 0===s&&n.set(t,s=new r(t,e)),s}static set(t,e){n.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}const o=t=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}},968:(t,e,s)=>{s.d(e,{Nj:()=>a,t4:()=>r,wn:()=>o});const i=new Map,n=t=>()=>{throw C(`AUR1005:${t}`)};class r{constructor(t,e={}){this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach((s=>{this[s]=s in e?e[s]:t[s]})),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach((s=>{this[s]=s in e?e[s]:t[s]?.bind(t)??n(s)})),this.performanceNow="performanceNow"in e?e.performanceNow:t.performance?.now?.bind(t.performance)??n("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new o(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let s=i.get(t);return void 0===s&&i.set(t,s=new r(t,e)),s}static set(t,e){i.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class o{get isEmpty(){return 0===this.t&&0===this.i.length&&0===this.h.length&&0===this.u.length}get T(){return 0===this.t&&this.i.every(b)&&this.h.every(b)&&this.u.every(b)}constructor(t,e,s){this.platform=t,this.$request=e,this.$cancel=s,this.$=void 0,this.t=0,this.i=[],this.h=[],this.u=[],this.R=!1,this.A=void 0,this.P=[],this.M=0,this.U=0,this.q=0,this.I=()=>{this.R||(this.R=!0,this.U=this._(),this.$request())},this._=t.performanceNow,this.C=new d(t.console)}flush(t=this._()){if(this.R=!1,this.q=t,void 0===this.$){if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0){let e=-1;for(;++e<this.u.length&&this.u[e].queueTime<=t;);this.i.push(...this.u.splice(0,e))}let e;for(;this.i.length>0;)if((e=this.i.shift()).run(),1===e.status){if(!0===e.suspend)return this.$=e,void this.I();++this.t}if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0){let e=-1;for(;++e<this.u.length&&this.u[e].queueTime<=t;);this.i.push(...this.u.splice(0,e))}if((this.i.length>0||this.u.length>0||this.t>0)&&this.I(),void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}}else this.I()}cancel(){this.R&&(this.$cancel(),this.R=!1)}async yield(){this.isEmpty||(void 0===this.A&&(this.A=w()),await this.A)}queueTask(t,e){const{delay:s,preempt:i,persistent:n,reusable:r,suspend:o}={...f,...e};if(i){if(s>0)throw y();if(n)throw k()}0===this.i.length&&this.I();const a=this._();let h;if(r){const e=this.P,c=this.M-1;c>=0?(h=e[c],e[c]=void 0,this.M=c,h.reuse(a,s,i,n,o,t)):h=new u(this.C,this,a,a+s,i,n,o,r,t)}else h=new u(this.C,this,a,a+s,i,n,o,r,t);return i?this.i[this.i.length]=h:0===s?this.h[this.h.length]=h:this.u[this.u.length]=h,h}remove(t){let e=this.i.indexOf(t);if(e>-1)this.i.splice(e,1);else if(e=this.h.indexOf(t),e>-1)this.h.splice(e,1);else{if(e=this.u.indexOf(t),!(e>-1))throw C(`Task #${t.id} could not be found`);this.u.splice(e,1)}}N(t){this.P[this.M++]=t}j(t){t.reset(this._()),t.createdTime===t.queueTime?this.h[this.h.length]=t:this.u[this.u.length]=t}F(t){if(!0===t.suspend){if(this.$!==t)throw C(`Async task completion mismatch: suspenderTask=${this.$?.id}, task=${t.id}`);this.$=void 0}else--this.t;if(void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class a extends Error{constructor(t){super("Task was canceled."),this.task=t}}let h=0;var c,l;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(c||(c={}));class u{get result(){const t=this.O;if(void 0===t)switch(this.W){case 0:{const t=this.O=w();return this.B=t.resolve,this.G=t.reject,t}case 1:throw C("Trying to await task from within task will cause a deadlock.");case 2:return this.O=Promise.resolve();case 3:return this.O=Promise.reject(new a(this))}return t}get status(){return this.W}constructor(t,e,s,i,n,r,o,a,c){this.taskQueue=e,this.createdTime=s,this.queueTime=i,this.preempt=n,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=c,this.id=++h,this.B=void 0,this.G=void 0,this.O=void 0,this.W=0,this.C=t}run(t=this.taskQueue.platform.performanceNow()){if(0!==this.W)throw C(`Cannot run task in ${this.W} state`);const{persistent:e,reusable:s,taskQueue:i,callback:n,B:r,G:o,createdTime:a}=this;let h;this.W=1;try{h=n(t-a),h instanceof Promise?h.then((t=>{this.persistent?i.j(this):(this.W=e?3:2,this.dispose()),i.F(this),void 0!==r&&r(t),!this.persistent&&s&&i.N(this)})).catch((t=>{if(this.persistent||this.dispose(),i.F(this),void 0===o)throw t;o(t)})):(this.persistent?i.j(this):(this.W=e?3:2,this.dispose()),void 0!==r&&r(h),!this.persistent&&s&&i.N(this))}catch(t){if(this.persistent||this.dispose(),void 0===o)throw t;o(t)}}cancel(){if(0===this.W){const t=this.taskQueue,e=this.reusable,s=this.G;return t.remove(this),t.isEmpty&&t.cancel(),this.W=3,this.dispose(),e&&t.N(this),void 0!==s&&s(new a(this)),!0}return!(1!==this.W||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.W=0,this.B=void 0,this.G=void 0,this.O=void 0}reuse(t,e,s,i,n,r){this.createdTime=t,this.queueTime=t+e,this.preempt=s,this.persistent=i,this.suspend=n,this.callback=r,this.W=0}dispose(){this.callback=void 0,this.B=void 0,this.G=void 0,this.O=void 0}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(l||(l={}));class d{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,s){if(e instanceof o){const i=`processing=${e.i.length} pending=${e.h.length} delayed=${e.u.length} flushReq=${e.R} susTask=${!!e.$}`;this.console.log(`${t}[Q.${s}] ${i}`)}else{const i=e.id,n=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,h=e.persistent,c=e.suspend,l=`id=${i} created=${n} queue=${r} preempt=${o} persistent=${h} reusable=${a} status=${p(e.W)} suspend=${c}`;this.console.log(`${t}[T.${s}] ${l}`)}}}const p=t=>{switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}},f={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let g,v;const m=(t,e)=>{g=t,v=e},w=()=>{const t=new Promise(m);return t.resolve=g,t.reject=v,t},b=t=>t.persistent,y=()=>C("AUR1006"),k=()=>C("AUR1007"),C=t=>new Error(t)},134:(t,e,s)=>{s.d(e,{FdA:()=>Br,EQ_:()=>bc,Qrh:()=>qh,brw:()=>co,b_N:()=>Po,IUY:()=>vc,qN_:()=>tc,zQX:()=>Yr,PEj:()=>Fa,A8T:()=>Xr,ND1:()=>Vr,TIm:()=>Lr,EmM:()=>Jr,BkS:()=>yd,ExJ:()=>sr,OVJ:()=>to,MoW:()=>fo,T5P:()=>Qh,jyy:()=>Wo});var i=s(344),n=s(932);const r=Object,o=r.prototype.hasOwnProperty,a=Reflect.defineProperty,h=t=>new Error(t),c=t=>"function"==typeof t,l=t=>t instanceof r,u=t=>t instanceof Array,d=t=>t instanceof Set,p=t=>t instanceof Map,f=r.is;function g(t,e,s){return a(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s}function v(t,e,s){e in t||g(t,e,s)}const m=Object.assign,w=String,b=i.DI.createInterface,y=()=>r.create(null),k=n.SF.getOwn;n.SF.hasOwn;const C=n.SF.define;var S,A;i.Protocol.annotation.keyFor,i.Protocol.resource.keyFor,i.Protocol.resource.appendTo,(A=S||(S={}))[A.AccessThis=0]="AccessThis",A[A.AccessGlobal=1]="AccessGlobal",A[A.AccessScope=2]="AccessScope",A[A.ArrayLiteral=3]="ArrayLiteral",A[A.ObjectLiteral=4]="ObjectLiteral",A[A.PrimitiveLiteral=5]="PrimitiveLiteral",A[A.Template=6]="Template",A[A.Unary=7]="Unary",A[A.CallScope=8]="CallScope",A[A.CallMember=9]="CallMember",A[A.CallFunction=10]="CallFunction",A[A.CallGlobal=11]="CallGlobal",A[A.AccessMember=12]="AccessMember",A[A.AccessKeyed=13]="AccessKeyed",A[A.TaggedTemplate=14]="TaggedTemplate",A[A.Binary=15]="Binary",A[A.Conditional=16]="Conditional",A[A.Assign=17]="Assign",A[A.ArrowFunction=18]="ArrowFunction",A[A.ValueConverter=19]="ValueConverter",A[A.BindingBehavior=20]="BindingBehavior",A[A.ArrayBindingPattern=21]="ArrayBindingPattern",A[A.ObjectBindingPattern=22]="ObjectBindingPattern",A[A.BindingIdentifier=23]="BindingIdentifier",A[A.ForOfStatement=24]="ForOfStatement",A[A.Interpolation=25]="Interpolation",A[A.ArrayDestructuring=26]="ArrayDestructuring",A[A.ObjectDestructuring=27]="ObjectDestructuring",A[A.DestructuringAssignmentLeaf=28]="DestructuringAssignmentLeaf",A[A.DestructuringAssignmentRestLeaf=29]="DestructuringAssignmentRestLeaf",A[A.Custom=30]="Custom";class T{constructor(t){this.value=t,this.$kind=30}evaluate(t,e,s){return this.value}assign(t,e,s){return s}bind(t,e){}unbind(t,e){}accept(t){}}class ${constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=20,this.key=`_bb_${e}`}}class x{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=19}}class I{constructor(t,e){this.target=t,this.value=e,this.$kind=17}}class R{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind=16}}class E{constructor(t){this.name=t,this.$kind=1}}class O{constructor(t=0){this.ancestor=t,this.$kind=0}}class P{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=2}}const M=t=>1===t.$kind||(12===t.$kind||13===t.$kind)&&t.accessGlobal;class N{constructor(t,e,s=!1){this.object=t,this.name=e,this.optional=s,this.$kind=12,this.accessGlobal=M(t)}}class B{constructor(t,e,s=!1){this.object=t,this.key=e,this.optional=s,this.$kind=13,this.accessGlobal=M(t)}}class j{constructor(t,e,s=0,i=!1){this.name=t,this.args=e,this.ancestor=s,this.optional=i,this.$kind=8}}class L{constructor(t,e,s,i=!1,n=!1){this.object=t,this.name=e,this.args=s,this.optionalMember=i,this.optionalCall=n,this.$kind=9}}class U{constructor(t,e,s=!1){this.func=t,this.args=e,this.optional=s,this.$kind=10}}class D{constructor(t,e){this.name=t,this.args=e,this.$kind=11}}class F{constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind=15}}class V{constructor(t,e){this.operation=t,this.expression=e,this.$kind=7}}class W{constructor(t){this.value=t,this.$kind=5}}W.$undefined=new W(void 0),W.$null=new W(null),W.$true=new W(!0),W.$false=new W(!1),W.$empty=new W("");class _{constructor(t){this.elements=t,this.$kind=3}}_.$empty=new _(i.ow);class q{constructor(t,e){this.keys=t,this.values=e,this.$kind=4}}q.$empty=new q(i.ow,i.ow);class H{constructor(t,e=i.ow){this.cooked=t,this.expressions=e,this.$kind=6}}H.$empty=new H([""]);class K{constructor(t,e,s,n=i.ow){this.cooked=t,this.func=s,this.expressions=n,this.$kind=14,t.raw=e}}class z{constructor(t){this.elements=t,this.$kind=21}}class G{constructor(t,e){this.keys=t,this.values=e,this.$kind=22}}class Q{constructor(t){this.name=t,this.$kind=23}}class J{constructor(t,e,s){this.declaration=t,this.iterable=e,this.semiIdx=s,this.$kind=24}}class X{constructor(t,e=i.ow){this.parts=t,this.expressions=e,this.$kind=25,this.isMulti=e.length>1,this.firstExpression=e[0]}}class Y{constructor(t,e,s,i){this.$kind=t,this.list=e,this.source=s,this.initializer=i}}class Z{constructor(t,e,s){this.target=t,this.source=e,this.initializer=s,this.$kind=28}}class tt{constructor(t,e,s=!1){this.args=t,this.body=e,this.rest=s,this.$kind=18}}const et=(t,...e)=>new Error(`AUR${w(t).padStart(4,"0")}:${e.map(w)}`);class st{constructor(t,e){void 0!==t&&(this[t]=e)}}class it{constructor(t,e,s,i){this.parent=t,this.bindingContext=e,this.overrideContext=s,this.isBoundary=i}static getContext(t,e,s){if(null==t)throw et(203);let i=t.overrideContext,n=t;if(s>0){for(;s>0;)if(s--,n=n.parent,null==n)return;return i=n.overrideContext,e in i?i:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(i=n.overrideContext,e in i?i:n.bindingContext)}static create(t,e,s){if(null==t)throw et(204);return new it(null,t,null==e?new nt:e,s??!1)}static fromParent(t,e){if(null==t)throw et(203);return new it(t,e,new nt,!1)}}class nt{}const rt=it.getContext;function ot(t,e,s,i){switch(t.$kind){case 0:{let s=e.overrideContext,i=e,n=t.ancestor;for(;n--&&s;)i=i.parent,s=i?.overrideContext??null;return n<1&&i?i.bindingContext:void 0}case 2:{const n=rt(e,t.name,t.ancestor);null!==i&&i.observe(n,t.name);const r=n[t.name];if(null==r&&"$host"===t.name)throw et(105);return s?.strict?s?.boundFn&&c(r)?r.bind(n):r:null==r?"":s?.boundFn&&c(r)?r.bind(n):r}case 1:return globalThis[t.name];case 11:{const n=globalThis[t.name];if(c(n))return n(...t.args.map((t=>ot(t,e,s,i))));if(!s?.strictFnCall&&null==n)return;throw et(107)}case 3:return t.elements.map((t=>ot(t,e,s,i)));case 4:{const n={};for(let r=0;r<t.keys.length;++r)n[t.keys[r]]=ot(t.values[r],e,s,i);return n}case 5:return t.value;case 6:{let n=t.cooked[0];for(let r=0;r<t.expressions.length;++r)n+=String(ot(t.expressions[r],e,s,i)),n+=t.cooked[r+1];return n}case 7:switch(t.operation){case"void":return void ot(t.expression,e,s,i);case"typeof":return typeof ot(t.expression,e,s,i);case"!":return!ot(t.expression,e,s,i);case"-":return-ot(t.expression,e,s,i);case"+":return+ot(t.expression,e,s,i);default:throw et(109,t.operation)}case 8:{const n=t.args.map((t=>ot(t,e,s,i))),r=rt(e,t.name,t.ancestor),o=lt(s?.strictFnCall,r,t.name);return o?o.apply(r,n):void 0}case 9:{const n=ot(t.object,e,s,i),r=t.args.map((t=>ot(t,e,s,i))),o=lt(s?.strictFnCall,n,t.name);let a;return o&&(a=o.apply(n,r),u(n)&&pt.includes(t.name)&&i?.observeCollection(n)),a}case 10:{const n=ot(t.func,e,s,i);if(c(n))return n(...t.args.map((t=>ot(t,e,s,i))));if(!s?.strictFnCall&&null==n)return;throw et(107)}case 18:{const n=(...n)=>{const r=t.args,o=t.rest,a=r.length-1,h=r.reduce(((t,e,s)=>(t[e.name]=o&&s===a?n.slice(s):n[s],t)),{}),c=it.fromParent(e,h);return ot(t.body,c,s,i)};return n}case 12:{const n=ot(t.object,e,s,i);let r;if(s?.strict){if(null==n)return;return null===i||t.accessGlobal||i.observe(n,t.name),r=n[t.name],s?.boundFn&&c(r)?r.bind(n):r}return null!==i&&l(n)&&!t.accessGlobal&&i.observe(n,t.name),n?(r=n[t.name],s?.boundFn&&c(r)?r.bind(n):r):""}case 13:{const n=ot(t.object,e,s,i),r=ot(t.key,e,s,i);return l(n)?(null===i||t.accessGlobal||i.observe(n,r),n[r]):null==n?void 0:n[r]}case 14:{const n=t.expressions.map((t=>ot(t,e,s,i))),r=ot(t.func,e,s,i);if(!c(r))throw et(110);return r(t.cooked,...n)}case 15:{const n=t.left,r=t.right;switch(t.operation){case"&&":return ot(n,e,s,i)&&ot(r,e,s,i);case"||":return ot(n,e,s,i)||ot(r,e,s,i);case"??":return ot(n,e,s,i)??ot(r,e,s,i);case"==":return ot(n,e,s,i)==ot(r,e,s,i);case"===":return ot(n,e,s,i)===ot(r,e,s,i);case"!=":return ot(n,e,s,i)!=ot(r,e,s,i);case"!==":return ot(n,e,s,i)!==ot(r,e,s,i);case"instanceof":{const t=ot(r,e,s,i);return!!c(t)&&ot(n,e,s,i)instanceof t}case"in":{const t=ot(r,e,s,i);return!!l(t)&&ot(n,e,s,i)in t}case"+":{const t=ot(n,e,s,i),o=ot(r,e,s,i);if(s?.strict)return t+o;if(!t||!o){if(ut(t)||ut(o))return(t||0)+(o||0);if(dt(t)||dt(o))return(t||"")+(o||"")}return t+o}case"-":return ot(n,e,s,i)-ot(r,e,s,i);case"*":return ot(n,e,s,i)*ot(r,e,s,i);case"/":return ot(n,e,s,i)/ot(r,e,s,i);case"%":return ot(n,e,s,i)%ot(r,e,s,i);case"<":return ot(n,e,s,i)<ot(r,e,s,i);case">":return ot(n,e,s,i)>ot(r,e,s,i);case"<=":return ot(n,e,s,i)<=ot(r,e,s,i);case">=":return ot(n,e,s,i)>=ot(r,e,s,i);default:throw et(108,t.operation)}}case 16:return ot(t.condition,e,s,i)?ot(t.yes,e,s,i):ot(t.no,e,s,i);case 17:return at(t.target,e,s,ot(t.value,e,s,i));case 19:{const n=s?.getConverter?.(t.name);if(null==n)throw et(103,t.name);return"toView"in n?n.toView(ot(t.expression,e,s,i),...t.args.map((t=>ot(t,e,s,i)))):ot(t.expression,e,s,i)}case 20:return ot(t.expression,e,s,i);case 23:return t.name;case 24:return ot(t.iterable,e,s,i);case 25:if(t.isMulti){let n=t.parts[0],r=0;for(;r<t.expressions.length;++r)n+=w(ot(t.expressions[r],e,s,i)),n+=t.parts[r+1];return n}return`${t.parts[0]}${ot(t.firstExpression,e,s,i)}${t.parts[1]}`;case 28:return ot(t.target,e,s,i);case 26:return t.list.map((t=>ot(t,e,s,i)));case 21:case 22:case 27:default:return;case 30:return t.evaluate(e,s,i)}}function at(t,e,s,n){switch(t.$kind){case 2:if("$host"===t.name)throw et(106);return rt(e,t.name,t.ancestor)[t.name]=n;case 12:{const i=ot(t.object,e,s,null);return l(i)?"length"===t.name&&u(i)&&!isNaN(n)?i.splice(n):i[t.name]=n:at(t.object,e,s,{[t.name]:n}),n}case 13:{const r=ot(t.object,e,s,null),o=ot(t.key,e,s,null);if(u(r)){if("length"===o&&!isNaN(n))return r.splice(n),n;if((0,i.y5)(o))return r.splice(o,1,n),n}return r[o]=n}case 17:return at(t.value,e,s,n),at(t.target,e,s,n);case 19:{const i=s?.getConverter?.(t.name);if(null==i)throw et(103,t.name);return"fromView"in i&&(n=i.fromView(n,...t.args.map((t=>ot(t,e,s,null))))),at(t.expression,e,s,n)}case 20:return at(t.expression,e,s,n);case 26:case 27:{const i=t.list,r=i.length;let o,a;for(o=0;o<r;o++)switch(a=i[o],a.$kind){case 28:at(a,e,s,n);break;case 26:case 27:{if("object"!=typeof n||null===n)throw et(112);let t=ot(a.source,it.create(n),s,null);void 0===t&&a.initializer&&(t=ot(a.initializer,e,s,null)),at(a,e,s,t);break}}break}case 28:if(t instanceof Z){if(null==n)return;if("object"!=typeof n)throw et(112);let i=ot(t.source,it.create(n),s,null);void 0===i&&t.initializer&&(i=ot(t.initializer,e,s,null)),at(t.target,e,s,i)}else{if(null==n)return;if("object"!=typeof n)throw et(112);const r=t.indexOrProperties;let o;if((0,i.y5)(r)){if(!Array.isArray(n))throw et(112);o=n.slice(r)}else o=Object.entries(n).reduce(((t,[e,s])=>(r.includes(e)||(t[e]=s),t)),{});at(t.target,e,s,o)}break;case 30:return t.assign(e,s,n);default:return}}function ht(t,e,s){switch(t.$kind){case 20:{const i=t.name,n=t.key,r=s.getBehavior?.(i);if(null==r)throw et(101,i);if(void 0!==s[n])throw et(102,i);return s[n]=r,r.bind?.(e,s,...t.args.map((t=>ot(t,e,s,null)))),void ht(t.expression,e,s)}case 19:{const i=t.name,n=s.getConverter?.(i);if(null==n)throw et(103,i);const r=n.signals;if(null!=r){const t=s.getSignaler?.(),e=r.length;let i=0;for(;i<e;++i)t?.addSignalListener(r[i],s)}return void ht(t.expression,e,s)}case 24:ht(t.iterable,e,s);break;case 30:t.bind?.(e,s)}}function ct(t,e,s){switch(t.$kind){case 20:{const i=t.key,n=s;void 0!==n[i]&&(n[i].unbind?.(e,s),n[i]=void 0),ct(t.expression,e,s);break}case 19:{const i=s.getConverter?.(t.name);if(void 0===i?.signals)return;const n=s.getSignaler?.();let r=0;for(;r<i.signals.length;++r)n?.removeSignalListener(i.signals[r],s);ct(t.expression,e,s);break}case 24:ct(t.iterable,e,s);break;case 30:t.unbind?.(e,s)}}const lt=(t,e,s)=>{const i=null==e?null:e[s];if(c(i))return i;if(!t&&null==i)return null;throw et(111,s)},ut=t=>{switch(typeof t){case"number":case"bigint":return!0;default:return!1}},dt=t=>{switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}},pt="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" "),ft=i.DI.createInterface("ICoercionConfiguration");var gt,vt;function mt(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}!function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(gt||(gt={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout"}(vt||(vt={}));new Map;function wt(t){return null==t?yt:yt(t)}const bt=new WeakSet;function yt(t){if(bt.has(t))return;bt.add(t);const e=t.prototype;a(e,"subs",{get:Ct}),v(e,"subscribe",St),v(e,"unsubscribe",At)}class kt{constructor(){this.count=0,this.t=[]}add(t){return!this.t.includes(t)&&(this.t[this.t.length]=t,++this.count,!0)}remove(t){const e=this.t.indexOf(t);return-1!==e&&(this.t.splice(e,1),--this.count,!0)}notify(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleChange(t,e)}notifyCollection(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleCollectionChange(t,e)}}function Ct(){return g(this,"subs",new kt)}function St(t){return this.subs.add(t)}function At(t){return this.subs.remove(t)}class Tt{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleCollectionChange(t,e){const s=this.v,i=this.o.length;(this.v=i)!==s&&this.subs.notify(this.v,s)}}class $t{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).size}getValue(){return this.o.size}setValue(){throw et(220)}handleCollectionChange(t,e){const s=this.v,i=this.o.size;(this.v=i)!==s&&this.subs.notify(this.v,s)}}function xt(t){const e=t.prototype;v(e,"subscribe",It),v(e,"unsubscribe",Rt),wt(t)}function It(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function Rt(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}xt(Tt),xt($t);const Et=Symbol.for("__au_arr_obs__"),Ot=Array[Et]??g(Array,Et,new WeakMap);function Pt(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Mt(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function Nt(t,e,s,i,n){let r,o,a,h,c,l,u;for(l=s+1;l<i;l++){for(r=t[l],o=e[l],u=l-1;u>=s&&(a=t[u],h=e[u],c=n(a,r),c>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function Bt(t,e,s,i,n){let r,o,a,h,c,l,u,d,p,f,g,v,m,w,b,y,k,C,S,A=0,T=0;for(;;){if(i-s<=10)return void Nt(t,e,s,i,n);A=s+(i-s>>1),r=t[s],h=e[s],o=t[i-1],c=e[i-1],a=t[A],l=e[A],u=n(r,o),u>0&&(f=r,g=h,r=o,h=c,o=f,c=g),d=n(r,a),d>=0?(f=r,g=h,r=a,h=l,a=o,l=c,o=f,c=g):(p=n(o,a),p>0&&(f=o,g=c,o=a,c=l,a=f,l=g)),t[s]=r,e[s]=h,t[i-1]=a,e[i-1]=l,v=o,m=c,w=s+1,b=i-1,t[A]=t[w],e[A]=e[w],t[w]=v,e[w]=m;t:for(T=w+1;T<b;T++)if(y=t[T],k=e[T],C=n(y,v),C<0)t[T]=t[w],e[T]=e[w],t[w]=y,e[w]=k,w++;else if(C>0){do{if(b--,b==T)break t;S=t[b],C=n(S,v)}while(C>0);t[T]=t[b],e[T]=e[b],t[b]=y,e[b]=k,C<0&&(y=t[T],k=e[T],t[T]=t[w],e[T]=e[w],t[w]=y,e[w]=k,w++)}i-b<w-s?(Bt(t,e,b,i,n),i=w):(Bt(t,e,s,w,n),s=b)}}const jt=Array.prototype,Lt=jt.push,Ut=jt.unshift,Dt=jt.pop,Ft=jt.shift,Vt=jt.splice,Wt=jt.reverse,_t=jt.sort,qt=["push","unshift","pop","shift","splice","reverse","sort"],Ht={push:function(...t){const e=Ot.get(this);if(void 0===e)return Lt.apply(this,t);const s=this.length,i=t.length;if(0===i)return s;this.length=e.indexMap.length=s+i;let n=s;for(;n<this.length;)this[n]=t[n-s],e.indexMap[n]=-2,n++;return e.notify(),this.length},unshift:function(...t){const e=Ot.get(this);if(void 0===e)return Ut.apply(this,t);const s=t.length,i=new Array(s);let n=0;for(;n<s;)i[n++]=-2;Ut.apply(e.indexMap,i);const r=Ut.apply(this,t);return e.notify(),r},pop:function(){const t=Ot.get(this);if(void 0===t)return Dt.call(this);const e=t.indexMap,s=Dt.call(this),i=e.length-1;return e[i]>-1&&(e.deletedIndices.push(e[i]),e.deletedItems.push(s)),Dt.call(e),t.notify(),s},shift:function(){const t=Ot.get(this);if(void 0===t)return Ft.call(this);const e=t.indexMap,s=Ft.call(this);return e[0]>-1&&(e.deletedIndices.push(e[0]),e.deletedItems.push(s)),Ft.call(e),t.notify(),s},splice:function(...t){const e=t[0],s=t[1],i=Ot.get(this);if(void 0===i)return Vt.apply(this,t);const n=this.length,r=0|e,o=r<0?Math.max(n+r,0):Math.min(r,n),a=i.indexMap,h=t.length,c=0===h?0:1===h?n-o:s;let l=o;if(c>0){const t=l+c;for(;l<t;)a[l]>-1&&(a.deletedIndices.push(a[l]),a.deletedItems.push(this[l])),l++}if(l=0,h>2){const t=h-2,i=new Array(t);for(;l<t;)i[l++]=-2;Vt.call(a,e,s,...i)}else Vt.apply(a,t);const u=Vt.apply(this,t);return(c>0||l>0)&&i.notify(),u},reverse:function(){const t=Ot.get(this);if(void 0===t)return Wt.call(this),this;const e=this.length,s=e/2|0;let i=0;for(;i!==s;){const s=e-i-1,n=this[i],r=t.indexMap[i],o=this[s],a=t.indexMap[s];this[i]=o,t.indexMap[i]=a,this[s]=n,t.indexMap[s]=r,i++}return t.notify(),this},sort:function(t){const e=Ot.get(this);if(void 0===e)return _t.call(this,t),this;let s=this.length;if(s<2)return this;Bt(this,e.indexMap,0,s,Mt);let i=0;for(;i<s&&void 0!==this[i];)i++;void 0!==t&&c(t)||(t=Pt),Bt(this,e.indexMap,0,i,t);let n=!1;for(i=0,s=e.indexMap.length;s>i;++i)if(e.indexMap[i]!==i){n=!0;break}return n&&e.notify(),this}};for(const t of qt)a(Ht[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Kt=!1;const zt="__au_arr_on__";class Gt{constructor(t){this.type=1,Kt||(Kt=!0,function(){if(!k(zt,Array)){C(zt,!0,Array);for(const t of qt)!0!==jt[t].observing&&g(jt,t,Ht[t])}}()),this.indexObservers={},this.collection=t,this.indexMap=mt(t.length),this.lenObs=void 0,Ot.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,s=e.length;this.indexMap=mt(s),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??(this.lenObs=new Tt(this))}getIndexObserver(t){var e;return(e=this.indexObservers)[t]??(e[t]=new Qt(this,t))}}class Qt{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,s=this.index,i=e.indexMap;i[s]>-1&&i.deletedIndices.push(i[s]),i[s]=-2,e.collection[s]=t,e.notify()}handleCollectionChange(t,e){const s=this.index;if(e[s]===s)return;const i=this.value,n=this.value=this.getValue();i!==n&&this.subs.notify(n,i)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Jt(t){let e=Ot.get(t);return void 0===e&&(e=new Gt(t)),e}wt(Gt),wt(Qt);const Xt=(t,e)=>t-e,Yt=Symbol.for("__au_set_obs__"),Zt=Set[Yt]??g(Set,Yt,new WeakMap),te=Set.prototype,ee=te.add,se=te.clear,ie=te.delete,ne=["add","clear","delete"],re={add:function(t){const e=Zt.get(this);if(void 0===e)return ee.call(this,t),this;const s=this.size;return ee.call(this,t),this.size===s||(e.indexMap[s]=-2,e.notify()),this},clear:function(){const t=Zt.get(this);if(void 0===t)return se.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;se.call(this),e.length=0,t.notify()}},delete:function(t){const e=Zt.get(this);if(void 0===e)return ie.call(this,t);if(0===this.size)return!1;let s=0;const i=e.indexMap;for(const n of this.keys()){if(n===t){i[s]>-1&&(i.deletedIndices.push(i[s]),i.deletedItems.push(n)),i.splice(s,1);const r=ie.call(this,t);return!0===r&&e.notify(),r}s++}return!1}},oe={writable:!0,enumerable:!1,configurable:!0};for(const t of ne)a(re[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ae=!1;const he="__au_set_on__";class ce{constructor(t){this.type=1,ae||(ae=!0,function(){if(!k(he,Set)){C(he,!0,Set);for(const t of ne)!0!==te[t].observing&&a(te,t,{...oe,value:re[t]})}}()),this.collection=t,this.indexMap=mt(t.size),this.lenObs=void 0,Zt.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,s=e.size;this.indexMap=mt(s),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??(this.lenObs=new $t(this))}}function le(t){let e=Zt.get(t);return void 0===e&&(e=new ce(t)),e}wt(ce);const ue=Symbol.for("__au_map_obs__"),de=Map[ue]??g(Map,ue,new WeakMap),pe=Map.prototype,fe=pe.set,ge=pe.clear,ve=pe.delete,me=["set","clear","delete"],we={set:function(t,e){const s=de.get(this);if(void 0===s)return fe.call(this,t,e),this;const i=this.get(t),n=this.size;if(fe.call(this,t,e),this.size===n){let e=0;for(const n of this.entries()){if(n[0]===t)return n[1]!==i&&(s.indexMap.deletedIndices.push(s.indexMap[e]),s.indexMap.deletedItems.push(n),s.indexMap[e]=-2,s.notify()),this;e++}return this}return s.indexMap[n]=-2,s.notify(),this},clear:function(){const t=de.get(this);if(void 0===t)return ge.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;ge.call(this),e.length=0,t.notify()}},delete:function(t){const e=de.get(this);if(void 0===e)return ve.call(this,t);if(0===this.size)return!1;let s=0;const i=e.indexMap;for(const n of this.keys()){if(n===t){i[s]>-1&&(i.deletedIndices.push(i[s]),i.deletedItems.push(n)),i.splice(s,1);const r=ve.call(this,t);return!0===r&&e.notify(),r}++s}return!1}},be={writable:!0,enumerable:!1,configurable:!0};for(const t of me)a(we[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ye=!1;const ke="__au_map_on__";class Ce{constructor(t){this.type=1,ye||(ye=!0,function(){if(!k(ke,Map)){C(ke,!0,Map);for(const t of me)!0!==pe[t].observing&&a(pe,t,{...be,value:we[t]})}}()),this.collection=t,this.indexMap=mt(t.size),this.lenObs=void 0,de.set(t,this)}notify(){const t=this.subs,e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=mt(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??(this.lenObs=new $t(this))}}function Se(t){let e=de.get(t);return void 0===e&&(e=new Ce(t)),e}function Ae(){return g(this,"obs",new Ee(this))}function Te(t,e){this.obs.add(this.oL.getObserver(t,e))}function $e(t){let e;if(u(t))e=Jt(t);else if(d(t))e=le(t);else{if(!p(t))throw et(210,t);e=Se(t)}this.obs.add(e)}function xe(t){this.obs.add(t)}function Ie(){throw et(99,"handleChange")}function Re(){throw et(99,"handleCollectionChange")}wt(Ce);class Ee{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(Pe,this),this.count=this.o.size}clearAll(){this.o.forEach(Oe,this),this.o.clear(),this.count=0}}function Oe(t,e){e.unsubscribe(this.b)}function Pe(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}function Me(t){const e=t.prototype;return v(e,"observe",Te),v(e,"observeCollection",$e),v(e,"subscribeTo",xe),a(e,"obs",{get:Ae}),v(e,"handleChange",Ie),v(e,"handleCollectionChange",Re),t}function Ne(t){return null==t?Me:Me(t)}const Be=b("IExpressionParser",(t=>t.singleton(je)));class je{constructor(){this.i=y(),this.u=y(),this.h=y()}parse(t,e){let s;switch(e){case 32:return new T(t);case 1:return s=this.h[t],void 0===s&&(s=this.h[t]=this.$parse(t,e)),s;case 2:return s=this.u[t],void 0===s&&(s=this.u[t]=this.$parse(t,e)),s;default:if(0===t.length){if((24&e)>0)return W.$empty;throw xs()}return s=this.i[t],void 0===s&&(s=this.i[t]=this.$parse(t,e)),s}}$parse(t,e){return Ke=t,ze=0,Ge=t.length,Qe=0,Je=0,Xe=6291456,Ye="",He=ns(0),Ze=!0,ts=!1,es=!0,ss=-1,as(61,void 0===e?16:e)}}function Le(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}const Ue=W.$false,De=W.$true,Fe=W.$null,Ve=W.$undefined,We=new O(0),_e=new O(1);var qe;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsChainable=4]="IsChainable",t[t.IsFunction=8]="IsFunction",t[t.IsProperty=16]="IsProperty",t[t.IsCustom=32]="IsCustom"}(qe||(qe={}));let He,Ke="",ze=0,Ge=0,Qe=0,Je=0,Xe=6291456,Ye="",Ze=!0,ts=!1,es=!0,ss=-1;const is=String.fromCharCode,ns=t=>Ke.charCodeAt(t),rs=()=>Ke.slice(Je,ze),os="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function as(t,e){if(32===e)return new T(Ke);if(0===ze){if(1&e)return function(){const t=[],e=[],s=Ge;let i="";for(;ze<s;){switch(He){case 36:if(123===ns(ze+1)){t.push(i),i="",ze+=2,He=ns(ze),fs();const s=as(61,1);e.push(s);continue}i+="$";break;case 92:i+=is(Le(gs()));break;default:i+=is(He)}gs()}return e.length?(t.push(i),new X(t,e)):null}();if(fs(),4194304&Xe)throw ks()}Ze=513>t,ts=!1,es=514>t;let s,i=!1,n=0;if(131072&Xe){const t=zs[63&Xe];fs(),s=new V(t,as(514,e)),Ze=!1}else{t:switch(Xe){case 12294:n=Qe,Ze=!1,es=!1;do{switch(fs(),++n,Xe){case 65545:if(fs(),0==(12288&Xe))throw Ss();break;case 10:case 11:throw Ss();case 2162700:if(ts=!0,fs(),0==(12288&Xe)){s=0===n?We:1===n?_e:new O(n),i=!0;break t}break;default:if(2097152&Xe){s=0===n?We:1===n?_e:new O(n);break t}throw As()}}while(12294===Xe);case 4096:{const t=Ye;if(2&e)s=new Q(t);else if(es&&os.includes(t))s=new E(t);else{if(es&&"import"===t)throw Ps();s=new P(t,n)}if(Ze=!ts,fs(),bs(50)){if(524296===Xe)throw Hs();const e=ts,i=Qe;++Qe;const n=as(62,0);ts=e,Qe=i,Ze=!1,s=new tt([new Q(t)],n)}break}case 10:throw Ks();case 11:throw Cs();case 12292:switch(Ze=!1,fs(),Qe){case 0:s=We;break;case 1:s=_e;break;default:s=new O(Qe)}break;case 2688007:s=function(t){fs();const e=ze,s=Je,i=Xe,n=He,r=Ye,o=Ze,a=ts,h=[];let c=1,l=!1;e:for(;;){if(11===Xe){if(fs(),4096!==Xe)throw Ss();if(h.push(new Q(Ye)),fs(),6291471===Xe)throw qs();if(7340046!==Xe)throw Cs();if(fs(),50!==Xe)throw Cs();fs();const t=ts,e=Qe;++Qe;const s=as(62,0);return ts=t,Qe=e,Ze=!1,new tt(h,s,!0)}switch(Xe){case 4096:h.push(new Q(Ye)),fs();break;case 7340046:fs();break e;case 524296:case 2688016:fs(),c=4;break;case 6291471:c=2,l=!0;break e;case 2688007:c=2;break e;default:fs(),c=2}switch(Xe){case 6291471:if(fs(),l=!0,1===c)break;break e;case 7340046:fs();break e;case 4194349:1===c&&(c=3);break e;case 50:if(l)throw Vs();fs(),c=2;break e;default:1===c&&(c=2);break e}}if(50===Xe){if(1===c){if(fs(),524296===Xe)throw Hs();const t=ts,e=Qe;++Qe;const s=as(62,0);return ts=t,Qe=e,Ze=!1,new tt(h,s)}throw Vs()}if(1===c&&0===h.length)throw js();if(l)switch(c){case 2:throw Vs();case 3:throw Ws();case 4:throw _s()}ze=e,Je=s,Xe=i,He=n,Ye=r,Ze=o,ts=a;const u=ts,d=as(62,t);if(ts=u,ys(7340046),50===Xe)switch(c){case 2:throw Vs();case 3:throw Ws();case 4:throw _s()}return d}(e);break;case 2688016:s=Ke.search(/\s+of\s+/)>ze?function(){const t=[],e=new Y(26,t,void 0,void 0);let s="",i=!0,n=0;for(;i;)switch(fs(),Xe){case 7340051:i=!1,r();break;case 6291471:r();break;case 4096:s=rs();break;default:throw Us()}return ys(7340051),e;function r(){""!==s?(t.push(new Z(new N(We,s),new B(We,new W(n++)),void 0)),s=""):n++}}():function(t){const e=ts;fs();const s=new Array;for(;7340051!==Xe;)if(bs(6291471)){if(s.push(Ve),7340051===Xe)break}else{if(s.push(as(62,-3&t)),!bs(6291471))break;if(7340051===Xe)break}return ts=e,ys(7340051),2&t?new z(s):(Ze=!1,new _(s))}(e);break;case 524296:s=function(t){const e=ts,s=new Array,i=new Array;for(fs();7340045!==Xe;){if(s.push(Ye),49152&Xe)fs(),ys(6291476),i.push(as(62,-3&t));else{if(!(12288&Xe))throw Ns();{const e=He,s=Xe,n=ze;fs(),bs(6291476)?i.push(as(62,-3&t)):(He=e,Xe=s,ze=n,i.push(as(515,-3&t)))}}7340045!==Xe&&ys(6291471)}return ts=e,ys(7340045),2&t?new G(s,i):(Ze=!1,new q(s,i))}(e);break;case 2163759:s=new H([Ye]),Ze=!1,fs();break;case 2163760:s=ds(e,s,!1);break;case 16384:case 32768:s=new W(Ye),Ze=!1,fs();break;case 8194:case 8195:case 8193:case 8192:s=zs[63&Xe],Ze=!1,fs();break;default:throw ze>=Ge?Ts():$s()}if(2&e)return function(t){if(0==(23&t.$kind))throw Ms();if(4204593!==Xe)throw Ms();fs();const e=t,s=as(61,4);return new J(e,s,ss)}(s);if(514<t)return s;if(10===Xe||11===Xe)throw Ss();if(0===s.$kind)switch(Xe){case 2162700:if(ts=!0,Ze=!1,fs(),0==(13312&Xe))throw Ds();if(12288&Xe)s=new P(Ye,s.ancestor),fs();else if(2688007===Xe)s=new U(s,hs(),!0);else{if(2688016!==Xe)throw Fs();s=cs(s,!0)}break;case 65545:if(Ze=!ts,fs(),0==(12288&Xe))throw Ss();s=new P(Ye,s.ancestor),fs();break;case 10:case 11:throw Ss();case 2688007:s=new U(s,hs(),i);break;case 2688016:s=cs(s,i);break;case 2163759:s=ps(s);break;case 2163760:s=ds(e,s,!0)}for(;(65536&Xe)>0;)switch(Xe){case 2162700:s=ls(s);break;case 65545:if(fs(),0==(12288&Xe))throw Ss();s=us(s,!1);break;case 10:case 11:throw Ss();case 2688007:s=2===s.$kind?new j(s.name,hs(),s.ancestor,!1):12===s.$kind?new L(s.object,s.name,hs(),s.optional,!1):1===s.$kind?new D(s.name,hs()):new U(s,hs(),!1);break;case 2688016:s=cs(s,!1);break;case 2163759:if(ts)throw Fs();s=ps(s);break;case 2163760:if(ts)throw Fs();s=ds(e,s,!0)}}if(10===Xe||11===Xe)throw Ss();if(513<t)return s;for(;(262144&Xe)>0;){const i=Xe;if((960&i)<=t)break;fs(),s=new F(zs[63&i],s,as(960&i,e)),Ze=!1}if(63<t)return s;if(bs(6291478)){const t=as(62,e);ys(6291476),s=new R(s,t,as(62,e)),Ze=!1}if(62<t)return s;if(bs(4194349)){if(!Ze)throw Is();s=new I(s,as(62,e))}if(61<t)return s;for(;bs(6291480);){if(6291456===Xe)throw Rs();const t=Ye;fs();const i=new Array;for(;bs(6291476);)i.push(as(62,e));s=new x(s,t,i)}for(;bs(6291479);){if(6291456===Xe)throw Es();const t=Ye;fs();const i=new Array;for(;bs(6291476);)i.push(as(62,e));s=new $(s,t,i)}if(6291456!==Xe){if((1&e)>0&&7340045===Xe)return s;if((4&e)>0&&6291477===Xe){if(ze===Ge)throw $s();return ss=ze-1,s}if("of"===rs())throw Os();throw $s()}return s}function hs(){const t=ts;fs();const e=[];for(;7340046!==Xe&&(e.push(as(62,0)),bs(6291471)););return ys(7340046),Ze=!1,ts=t,e}function cs(t,e){const s=ts;return fs(),t=new B(t,as(62,0),e),ys(7340051),Ze=!s,ts=s,t}function ls(t){if(ts=!0,Ze=!1,fs(),0==(13312&Xe))throw Ds();if(12288&Xe)return us(t,!0);if(2688007===Xe)return 2===t.$kind?new j(t.name,hs(),t.ancestor,!0):12===t.$kind?new L(t.object,t.name,hs(),t.optional,!0):new U(t,hs(),!0);if(2688016===Xe)return cs(t,!0);throw Fs()}function us(t,e){const s=Ye;switch(Xe){case 2162700:{ts=!0,Ze=!1;const i=ze,n=Je,r=Xe,o=He,a=Ye,h=Ze,c=ts;if(fs(),0==(13312&Xe))throw Ds();return 2688007===Xe?new L(t,s,hs(),e,!0):(ze=i,Je=n,Xe=r,He=o,Ye=a,Ze=h,ts=c,new N(t,s,e))}case 2688007:return Ze=!1,new L(t,s,hs(),e,!1);default:return Ze=!ts,fs(),new N(t,s,e)}}function ds(t,e,s){const i=ts,n=[Ye];ys(2163760);const r=[as(62,t)];for(;2163759!==(Xe=ws());)n.push(Ye),ys(2163760),r.push(as(62,t));return n.push(Ye),Ze=!1,ts=i,s?(fs(),new K(n,n,e,r)):(fs(),new H(n,r))}function ps(t){Ze=!1;const e=[Ye];return fs(),new K(e,e,t)}function fs(){for(;ze<Ge;)if(Je=ze,null!=(Xe=ti[He]()))return;Xe=6291456}function gs(){return He=ns(++ze)}function vs(t){let e=He;if(!1===t){do{e=gs()}while(e<=57&&e>=48);if(46!==e)return Ye=parseInt(rs(),10),32768;if(e=gs(),ze>=Ge)return Ye=parseInt(rs().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=gs()}while(e<=57&&e>=48);else He=ns(--ze);return Ye=parseFloat(rs()),32768}function ms(){let t=!0,e="";for(;96!==gs();)if(36===He){if(ze+1<Ge&&123===ns(ze+1)){ze++,t=!1;break}e+="$"}else if(92===He)e+=is(Le(gs()));else{if(ze>=Ge)throw Bs();e+=is(He)}return gs(),Ye=e,t?2163759:2163760}const ws=()=>{if(ze>=Ge)throw Bs();return ze--,ms()},bs=t=>Xe===t&&(fs(),!0),ys=t=>{if(Xe!==t)throw js();fs()},ks=()=>et(151,Ke),Cs=()=>et(152,Ke),Ss=()=>et(153,Ke),As=()=>et(154,Ke),Ts=()=>et(155,Ke),$s=()=>et(156,rs(),ze,Ke),xs=()=>et(157),Is=()=>et(158,Ke),Rs=()=>et(159,Ke),Es=()=>et(160,Ke),Os=()=>et(161,Ke),Ps=()=>et(162,Ke),Ms=()=>et(163,Ke),Ns=()=>et(164,Ke),Bs=()=>et(166,Ke),js=t=>et(167,Ke),Ls=()=>{throw et(168,Ke)};Ls.notMapped=!0;const Us=()=>et(170,Ke),Ds=()=>et(171,Ke),Fs=()=>et(172,Ke),Vs=()=>et(173,Ke),Ws=()=>et(174,Ke),_s=()=>et(175,Ke),qs=()=>et(176,Ke),Hs=()=>et(178,Ke),Ks=()=>et(179,Ke),zs=[Ue,De,Fe,Ve,"$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163759,2163760,"of","=>"],Gs=m(Object.create(null),{true:8193,null:8194,false:8192,undefined:8195,$this:12292,$parent:12294,in:6562212,instanceof:6562213,typeof:139304,void:139305,of:4204593}),Qs=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Js=[48,58],Xs=(t,e,s,i)=>{const n=s.length;for(let r=0;r<n;r+=2){const n=s[r];let o=s[r+1];if(o=o>0?o:n+1,t&&t.fill(i,n,o),e)for(let t=n;t<o;t++)e.add(t)}},Ys=t=>()=>(gs(),t);Xs(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const Zs=new Uint8Array(65535);Xs(Zs,null,Qs,1),Xs(Zs,null,Js,1);const ti=new Array(65535);ti.fill(Ls,0,65535),Xs(ti,null,[0,33,127,161],(()=>(gs(),null))),Xs(ti,null,Qs,(function(){for(;Zs[gs()];);const t=Gs[Ye=rs()];return void 0===t?4096:t})),Xs(ti,null,Js,(()=>vs(!1))),ti[34]=ti[39]=()=>function(){const t=He;gs();let e=0;const s=new Array;let i=ze;for(;He!==t;)if(92===He)s.push(Ke.slice(i,ze)),gs(),e=Le(He),gs(),s.push(is(e)),i=ze;else{if(ze>=Ge)throw et(165,Ke);gs()}const n=Ke.slice(i,ze);gs(),s.push(n);const r=s.join("");return Ye=r,16384}(),ti[96]=()=>ms(),ti[33]=()=>61!==gs()?131118:61!==gs()?6553949:(gs(),6553951),ti[61]=()=>62===gs()?(gs(),50):61!==He?4194349:61!==gs()?6553948:(gs(),6553950),ti[38]=()=>38!==gs()?6291479:(gs(),6553883),ti[124]=()=>124!==gs()?6291480:(gs(),6553818),ti[63]=()=>{if(46===gs()){const t=ns(ze+1);return t<=48||t>=57?(gs(),2162700):6291478}return 63!==He?6291478:(gs(),6553753)},ti[46]=()=>gs()<=57&&He>=48?vs(!0):46===He?46!==gs()?10:(gs(),11):65545,ti[60]=()=>61!==gs()?6554016:(gs(),6554018),ti[62]=()=>61!==gs()?6554017:(gs(),6554019),ti[37]=Ys(6554155),ti[40]=Ys(2688007),ti[41]=Ys(7340046),ti[42]=Ys(6554154),ti[43]=Ys(2490854),ti[44]=Ys(6291471),ti[45]=Ys(2490855),ti[47]=Ys(6554156),ti[58]=Ys(6291476),ti[59]=Ys(6291477),ti[91]=Ys(2688016),ti[93]=Ys(7340051),ti[123]=Ys(524296),ti[125]=Ys(7340045);let ei=null;const si=[];let ii=!1;function ni(){return ei}function ri(t){if(null==t)throw et(206);if(null==ei)return ei=t,si[0]=ei,void(ii=!0);if(ei===t)throw et(207);si.push(t),ei=t,ii=!0}function oi(t){if(null==t)throw et(208);if(ei!==t)throw et(209);si.pop(),ei=si.length>0?si[si.length-1]:null,ii=null!=ei}const ai=Object.freeze({get current(){return ei},get connecting(){return ii},enter:ri,exit:oi,pause:function(){ii=!1},resume:function(){ii=!0}}),hi=Reflect.get,ci=Object.prototype.toString,li=new WeakMap,ui="__au_nw__";function di(t){switch(ci.call(t)){case"[object Object]":return!0!==t.constructor[ui];case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const pi="__raw__";function fi(t){return di(t)?gi(t):t}function gi(t){return li.get(t)??function(t){const e=u(t)?yi:p(t)||d(t)?_i:bi,s=new Proxy(t,e);return li.set(t,s),li.set(s,s),s}(t)}function vi(t){return t[pi]??t}function mi(t){return di(t)&&t[pi]||t}function wi(t,e){return"constructor"===e||"__proto__"===e||"$observers"===e||e===Symbol.toPrimitive||e===Symbol.toStringTag||!0===t.constructor[`__au_nw_${w(e)}__`]}const bi={get(t,e,s){if(e===pi)return t;const i=ni();return!ii||wi(t,e)||null==i?hi(t,e,s):(i.observe(t,e),fi(hi(t,e,s)))}},yi={get(t,e,s){if(e===pi)return t;if(!ii||wi(t,e)||null==ei)return hi(t,e,s);switch(e){case"length":return ei.observe(t,"length"),t.length;case"map":return ki;case"includes":return Ai;case"indexOf":return Ti;case"lastIndexOf":return $i;case"every":return Ci;case"filter":return Si;case"find":return Ii;case"findIndex":return xi;case"flat":return Ri;case"flatMap":return Ei;case"join":return Oi;case"push":return Mi;case"pop":return Pi;case"reduce":return Vi;case"reduceRight":return Wi;case"reverse":return Li;case"shift":return Ni;case"unshift":return Bi;case"slice":return Fi;case"splice":return ji;case"some":return Ui;case"sort":return Di;case"keys":return Xi;case"values":case Symbol.iterator:return Yi;case"entries":return Zi}return ei.observe(t,e),fi(hi(t,e,s))},ownKeys:t=>(ni()?.observe(t,"length"),Reflect.ownKeys(t))};function ki(t,e){const s=vi(this),i=s.map(((s,i)=>mi(t.call(e,fi(s),i,this))));return tn(ei,s),fi(i)}function Ci(t,e){const s=vi(this),i=s.every(((s,i)=>t.call(e,fi(s),i,this)));return tn(ei,s),i}function Si(t,e){const s=vi(this),i=s.filter(((s,i)=>mi(t.call(e,fi(s),i,this))));return tn(ei,s),fi(i)}function Ai(t){const e=vi(this),s=e.includes(mi(t));return tn(ei,e),s}function Ti(t){const e=vi(this),s=e.indexOf(mi(t));return tn(ei,e),s}function $i(t){const e=vi(this),s=e.lastIndexOf(mi(t));return tn(ei,e),s}function xi(t,e){const s=vi(this),i=s.findIndex(((s,i)=>mi(t.call(e,fi(s),i,this))));return tn(ei,s),i}function Ii(t,e){const s=vi(this),i=s.find(((e,s)=>t(fi(e),s,this)),e);return tn(ei,s),fi(i)}function Ri(){const t=vi(this);return tn(ei,t),fi(t.flat())}function Ei(t,e){const s=vi(this);return tn(ei,s),gi(s.flatMap(((s,i)=>fi(t.call(e,fi(s),i,this)))))}function Oi(t){const e=vi(this);return tn(ei,e),e.join(t)}function Pi(){return fi(vi(this).pop())}function Mi(...t){return vi(this).push(...t)}function Ni(){return fi(vi(this).shift())}function Bi(...t){return vi(this).unshift(...t)}function ji(...t){return fi(vi(this).splice(...t))}function Li(...t){const e=vi(this),s=e.reverse();return tn(ei,e),fi(s)}function Ui(t,e){const s=vi(this),i=s.some(((s,i)=>mi(t.call(e,fi(s),i,this))));return tn(ei,s),i}function Di(t){const e=vi(this),s=e.sort(t);return tn(ei,e),fi(s)}function Fi(t,e){const s=vi(this);return tn(ei,s),gi(s.slice(t,e))}function Vi(t,e){const s=vi(this),i=s.reduce(((e,s,i)=>t(e,fi(s),i,this)),e);return tn(ei,s),fi(i)}function Wi(t,e){const s=vi(this),i=s.reduceRight(((e,s,i)=>t(e,fi(s),i,this)),e);return tn(ei,s),fi(i)}const _i={get(t,e,s){if(e===pi)return t;const i=ni();if(!ii||wi(t,e)||null==i)return hi(t,e,s);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return Qi;case"delete":return Ji;case"forEach":return qi;case"add":if(d(t))return Gi;break;case"get":if(p(t))return Ki;break;case"set":if(p(t))return zi;break;case"has":return Hi;case"keys":return Xi;case"values":return Yi;case"entries":return Zi;case Symbol.iterator:return p(t)?Zi:Yi}return fi(hi(t,e,s))}};function qi(t,e){const s=vi(this);return tn(ei,s),s.forEach(((s,i)=>{t.call(e,fi(s),fi(i),this)}))}function Hi(t){const e=vi(this);return tn(ei,e),e.has(mi(t))}function Ki(t){const e=vi(this);return tn(ei,e),fi(e.get(mi(t)))}function zi(t,e){return fi(vi(this).set(mi(t),mi(e)))}function Gi(t){return fi(vi(this).add(mi(t)))}function Qi(){return fi(vi(this).clear())}function Ji(t){return fi(vi(this).delete(mi(t)))}function Xi(){const t=vi(this);tn(ei,t);const e=t.keys();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:fi(s),done:i}},[Symbol.iterator](){return this}}}function Yi(){const t=vi(this);tn(ei,t);const e=t.values();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:fi(s),done:i}},[Symbol.iterator](){return this}}}function Zi(){const t=vi(this);tn(ei,t);const e=t.entries();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[fi(s[0]),fi(s[1])],done:i}},[Symbol.iterator](){return this}}}const tn=(t,e)=>t?.observeCollection(e),en=Object.freeze({getProxy:gi,getRaw:vi,wrap:fi,unwrap:mi,rawKey:pi});class sn{constructor(t,e,s,i,n){this.type=1,this.v=void 0,this.ir=!1,this.D=!1,this.cb=void 0,this.C=void 0,this.A=void 0,this.o=t,this.O=n?fi(t):t,this.$get=e,this.$set=s,this.oL=i}init(t){this.v=t,this.D=!1}getValue(){return 0===this.subs.count?this.$get.call(this.o,this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t){if(!c(this.$set))throw et(221);void 0!==this.C&&(t=this.C.call(null,t,this.A)),f(t,this.v)||(this.ir=!0,this.$set.call(this.o,t),this.ir=!1,this.run())}useCoercer(t,e){return this.C=t,this.A=e,!0}useCallback(t){return this.cb=t,!0}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,f(e,t)||(this.cb?.(e,t),this.subs.notify(this.v,t))}compute(){this.ir=!0,this.obs.version++;try{return ri(this),this.v=mi(this.$get.call(this.O,this.O,this))}finally{this.obs.clear(),this.ir=!1,oi(this)}}}Ne(sn),wt(sn);const nn=b("IDirtyChecker",void 0),rn={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class on{static register(t){t.register(i.YM.singleton(this,this),i.YM.aliasTo(this,nn))}constructor(t){this.p=t,this.tracked=[],this.T=null,this.P=0,this.check=()=>{if(rn.disabled)return;if(++this.P<rn.timeoutsPerCheck)return;this.P=0;const t=this.tracked,e=t.length;let s,i=0;for(;i<e;++i)s=t[i],s.isDirty()&&s.flush()},wt(an)}createProperty(t,e){if(rn.throw)throw h(`AUR0222:${w(e)}`);return new an(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}on.inject=[i.TI];class an{constructor(t,e,s){this.obj=e,this.key=s,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t){throw h(`Trying to set value for property ${w(this.key)} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}class hn{get doNotCache(){return!0}constructor(t,e){this.type=0,this.o=t,this.k=e}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class cn{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,s){e[s]=t}}class ln{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.cb=void 0,this.C=void 0,this.A=void 0,this.o=t,this.k=e}getValue(){return this.v}setValue(t){if(void 0!==this.C&&(t=this.C.call(void 0,t,this.A)),this.iO){if(f(t,this.v))return;un=this.v,this.v=t,this.cb?.(t,un),this.subs.notify(t,un)}else this.v=this.o[this.k]=t,this.cb?.(t,un)}useCallback(t){return this.cb=t,this.start(),!0}useCoercer(t,e){return this.C=t,this.A=e,this.start(),!0}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],a(this.o,this.k,{enumerable:!0,configurable:!0,get:m((()=>this.getValue()),{getObserver:()=>this}),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(a(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}let un;wt(ln);const dn=new cn,pn=b("IObserverLocator",(t=>t.singleton(vn))),fn=b("INodeObserverLocator",(t=>t.cachedCallback((t=>new gn))));class gn{handles(){return!1}getObserver(){return dn}getAccessor(){return dn}}class vn{constructor(t,e){this.M=[],this.I=t,this.L=e}addAdapter(t){this.M.push(t)}getObserver(t,e){if(null==t)throw et(199,e);if(!l(t))return new hn(t,c(e)?"":e);if(c(e))return new sn(t,e,void 0,this,!0);const s=bn(t);let i=s[e];return void 0===i&&(i=this.createObserver(t,e),i.doNotCache||(s[e]=i)),i}getAccessor(t,e){const s=t.$observers?.[e];return void 0!==s?s:this.L.handles(t,e,this)?this.L.getAccessor(t,e,this):dn}getArrayObserver(t){return Jt(t)}getMapObserver(t){return Se(t)}getSetObserver(t){return le(t)}createObserver(t,e){if(this.L.handles(t,e,this))return this.L.getObserver(t,e,this);switch(e){case"length":if(u(t))return Jt(t).getLengthObserver();break;case"size":if(p(t))return Se(t).getLengthObserver();if(d(t))return le(t).getLengthObserver();break;default:if(u(t)&&(0,i.y5)(e))return Jt(t).getIndexObserver(Number(e))}let s=wn(t,e);if(void 0===s){let i=mn(t);for(;null!==i&&(s=wn(i,e),void 0===s);)i=mn(i)}if(void 0!==s&&!o.call(s,"value")){let i=this.R(t,e,s);return null==i&&(i=(s.get?.getObserver??s.set?.getObserver)?.(t,this)),null==i?s.configurable?this._(t,e,s,!0):this.I.createProperty(t,e):i}return new ln(t,e)}_(t,e,s,i){const n=new sn(t,s.get,s.set,this,!!i);return a(t,e,{enumerable:s.enumerable,configurable:!0,get:m((()=>n.getValue()),{getObserver:()=>n}),set:t=>{n.setValue(t)}}),n}R(t,e,s){if(this.M.length>0)for(const i of this.M){const n=i.getObserver(t,e,s,this);if(null!=n)return n}return null}}vn.inject=[nn,fn];const mn=Object.getPrototypeOf,wn=Object.getOwnPropertyDescriptor,bn=t=>{let e=t.$observers;return void 0===e&&a(t,"$observers",{enumerable:!1,value:e=y()}),e};Ne(class{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw et(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{ri(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,oi(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,et(226);this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}});const yn=b("ISignaler",(t=>t.singleton(kn)));class kn{constructor(){this.signals=y()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let s;for(s of e.keys())s.handleChange(void 0,void 0)}addSignalListener(t,e){const s=this.signals,i=s[t];void 0===i?s[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}var Cn=s(58),Sn=s(968);function An(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}const Tn=n.SF.getOwn,$n=n.SF.hasOwn,xn=n.SF.define,{annotation:In,resource:Rn}=i.Protocol,En=In.keyFor,On=Rn.keyFor,Pn=Rn.appendTo,Mn=In.appendTo,Nn=In.getKeys,Bn=Object,jn=String,Ln=Bn.prototype,Un=()=>Bn.create(null),Dn=Ln.hasOwnProperty,Fn=Bn.freeze,Vn=Bn.assign,Wn=Bn.getOwnPropertyNames,_n=Bn.keys,qn=Un(),Hn=(t,e,s)=>{if(!0===qn[e])return!0;if(!Qn(e))return!1;const i=e.slice(0,5);return qn[e]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(t,e)},Kn=t=>t instanceof Promise,zn=t=>t instanceof Array,Gn=t=>"function"==typeof t,Qn=t=>"string"==typeof t,Jn=t=>{throw t},Xn=Bn.is,Yn=Reflect.defineProperty,Zn=(t,e,s)=>(Yn(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s),tr=(t,e,s)=>t.addSignalListener(e,s),er=(t,e,s)=>t.removeSignalListener(e,s);function sr(t,e){let s;function i(t,e){arguments.length>1&&(s.name=e),xn(nr,or.create(e,t,s),t.constructor,e),Mn(t.constructor,rr.keyFrom(e))}return arguments.length>1?(s={},void i(t,e)):Qn(t)?(s={},i):(s=void 0===t?{}:t,i)}function ir(t){return t.startsWith(nr)}const nr=En("bindable"),rr=Fn({name:nr,keyFrom:t=>`${nr}:${t}`,from(t,...e){const s={},i=Array.isArray;function n(e){s[e]=or.create(e,t)}function r(e,i){s[e]=i instanceof or?i:or.create(e,t,i)}return e.forEach((function(t){i(t)?t.forEach(n):t instanceof or?s[t.name]=t:void 0!==t&&_n(t).forEach((e=>r(e,t[e])))})),s},getAll(t){const e=nr.length+1,s=[],n=(0,i.Qy)(t);let r,o,a,h,c=n.length,l=0;for(;--c>=0;)for(a=n[c],r=Nn(a).filter(ir),o=r.length,h=0;h<o;++h)s[l++]=Tn(nr,a,r[h].slice(e));return s}});class or{constructor(t,e,s,i,n,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.name=n,this.set=r}static create(t,e,s={}){return new or(s.attribute??(0,i.GL)(t),s.callback??`${t}Changed`,s.mode??2,s.primary??!1,s.name??t,s.set??function(t,e,s={}){const r=s.type??n.SF.get("design:type",e,t)??null;if(null==r)return i.ZT;let o;switch(r){case Number:case Boolean:case String:case BigInt:o=r;break;default:{const t=r.coerce;o="function"==typeof t?t.bind(r):ar.for(r)??i.ZT;break}}return o===i.ZT?o:function(t,e){return function(s,i){return i?.enableCoercion?(e??!i?.coerceNullish)&&null==s?s:t(s,i):s}}(o,s.nullable)}(t,e,s))}}const ar={key:En("coercer"),define(t,e){xn(ar.key,t[e].bind(t),t)},for:t=>Tn(ar.key,t)},hr=t=>{function e(t,s,n){i.DI.inject(e)(t,s,n)}return e.$isResolver=!0,e.resolve=(e,s)=>s.has(t,!1)?s.get(t):s.root.get(t),e},cr=i.DI.createInterface,lr=i.YM.singleton,ur=i.YM.aliasTo,dr=i.YM.instance;i.YM.callback;const pr=i.YM.transient,fr=(t,e,s)=>t.registerResolver(e,s);function gr(t,e,s,n){for(let r=0,o=t.length;r<o;++r)i.YM.aliasTo(s,e.keyFrom(t[r])).register(n)}const vr=(t,...e)=>new Error(`AUR${jn(t).padStart(4,"0")}:${e.map(jn)}`);function mr(t){return function(e){return kr.define(t,e)}}class wr{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,n;return Qn(t)?(s=t,n={name:s}):(s=t.name,n=t),new wr(e,(0,i.BR)(yr(e,"name"),s),(0,i.eG)(yr(e,"aliases"),n.aliases,e.aliases),kr.keyFrom(s))}register(t){const{Type:e,key:s,aliases:i}=this;lr(s,e).register(t),ur(s,e).register(t),gr(i,kr,s,t)}}const br=On("binding-behavior"),yr=(t,e)=>Tn(En(e),t),kr=Fn({name:br,keyFrom:t=>`${br}:${t}`,isType:t=>Gn(t)&&$n(br,t),define(t,e){const s=wr.create(t,e);return xn(br,s,s.Type),xn(br,s,s),Pn(e,br),s.Type},getDefinition(t){const e=Tn(br,t);if(void 0===e)throw vr(151,t);return e},annotate(t,e,s){xn(En(e),s,t)},getAnnotation:yr}),Cr=new Map;class Sr{bind(t,e){Cr.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=Cr.get(e),Cr.delete(e)}}class Ar extends Sr{get mode(){return 1}}class Tr extends Sr{get mode(){return 2}}class $r extends Sr{get mode(){return 4}}class xr extends Sr{get mode(){return 6}}mr("oneTime")(Ar),mr("toView")(Tr),mr("fromView")($r),mr("twoWay")(xr);const Ir=new WeakMap;class Rr{constructor(){this.p=(0,i.DB)(i.TI)}bind(t,e,s,n){const r={type:"debounce",delay:s??200,now:this.p.performanceNow,queue:this.p.taskQueue,signals:Qn(n)?[n]:n??i.ow},o=e.limit?.(r);null==o||Ir.set(e,o)}unbind(t,e){Ir.get(e)?.dispose(),Ir.delete(e)}}mr("debounce")(Rr);class Er{constructor(){this.i=new Map,this.u=(0,i.DB)(yn)}bind(t,e,...s){if(!("handleChange"in e))throw vr(817);if(0===s.length)throw vr(818);let i;for(i of(this.i.set(e,s),s))tr(this.u,i,e)}unbind(t,e){const s=this.i.get(e);let i;for(i of(this.i.delete(e),s))er(this.u,i,e)}}mr("signal")(Er);const Or=new WeakMap;class Pr{constructor(){({performanceNow:this.C,taskQueue:this.A}=(0,i.DB)(i.TI))}bind(t,e,s,n){const r={type:"throttle",delay:s??200,now:this.C,queue:this.A,signals:Qn(n)?[n]:n??i.ow},o=e.limit?.(r);null==o||Or.set(e,o)}unbind(t,e){Or.get(e)?.dispose(),Or.delete(e)}}mr("throttle")(Pr);const Mr=cr("IAppTask");class Nr{constructor(t,e,s){this.c=void 0,this.slot=t,this.k=e,this.cb=s}register(t){return this.c=t.register(dr(Mr,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const Br=Fn({creating:jr("creating"),hydrating:jr("hydrating"),hydrated:jr("hydrated"),activating:jr("activating"),activated:jr("activated"),deactivating:jr("deactivating"),deactivated:jr("deactivated")});function jr(t){return function(e,s){return Gn(s)?new Nr(t,e,s):new Nr(t,null,e)}}const Lr=i.TI;class Ur{}function Dr(t,e){return t.$au?.[e]??null}function Fr(t,e,s){var i;((i=t).$au??(i.$au=new Ur))[e]=s}const Vr=cr("INode"),Wr=cr("IEventTarget",(t=>t.cachedCallback((t=>t.has(vc,!0)?t.get(vc).host:t.get(Lr).document)))),_r=cr("IRenderLocation"),qr=cr("CssModules"),Hr=new WeakMap;function Kr(t){if(Hr.has(t))return Hr.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Io(t);if(void 0===e)return null;if(2===e.mountTarget)return Kr(e.host)}return t.parentNode}function zr(t){if(Gr(t))return t;const e=t.ownerDocument.createComment("au-end"),s=e.$start=t.ownerDocument.createComment("au-start"),i=t.parentNode;return null!==i&&(i.replaceChild(e,t),i.insertBefore(s,e)),e}function Gr(t){return"au-end"===t.textContent}class Qr{get firstChild(){return this.B}get lastChild(){return this._}constructor(t,e){this.platform=t,this.next=void 0,this.R=!1,this.T=!1,this.ref=null;const s=(this.f=e).querySelectorAll("au-m");let i,n,r=0,o=s.length,a=this.t=Array(o);for(;o>r;)n=s[r],i=n.nextSibling,n.remove(),8===i.nodeType&&(n=i,(i=i.nextSibling).$start=n),a[r]=i,++r;const h=e.childNodes,c=this.childNodes=Array(o=h.length);for(r=0;o>r;)c[r]=h[r],++r;this.B=e.firstChild,this._=e.lastChild}findTargets(){return this.t}insertBefore(t){if(this.T&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.R){let s,i=this.B;const n=this._;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.R=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.R){let e,s=this.B;const i=this._;for(;null!=s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}else this.R=!0,e||t.appendChild(this.f)}remove(){if(this.R){this.R=!1;const t=this.f,e=this._;let s,i=this.B;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.R){let s,i=this.B;const n=this._;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.R=!0,e.insertBefore(this.f,t)}unlink(){this.T=!1,this.next=void 0,this.ref=void 0}link(t){this.T=!0,Gr(t)?this.ref=t:(this.next=t,this.I())}I(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const Jr=cr("IWindow",(t=>t.callback((t=>t.get(Lr).window)))),Xr=cr("ILocation",(t=>t.callback((t=>t.get(Jr).location)))),Yr=cr("IHistory",(t=>t.callback((t=>t.get(Jr).history)))),Zr=(t,e,s)=>(fr(t,e.HTMLElement,fr(t,e.Element,fr(t,Vr,new i.g("ElementResolver",s)))),t);function to(t){return function(e){return ao(t,e)}}function eo(t){return function(e){return ao(Qn(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class so{get type(){return 2}constructor(t,e,s,i,n,r,o,a,h,c){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=c}static create(t,e){let s,n;return Qn(t)?(s=t,n={name:s}):(s=t.name,n=t),new so(e,(0,i.BR)(ro(e,"name"),s),(0,i.eG)(ro(e,"aliases"),n.aliases,e.aliases),no(s),(0,i.BR)(ro(e,"defaultBindingMode"),n.defaultBindingMode,e.defaultBindingMode,2),(0,i.BR)(ro(e,"isTemplateController"),n.isTemplateController,e.isTemplateController,!1),rr.from(e,...rr.getAll(e),ro(e,"bindables"),e.bindables,n.bindables),(0,i.BR)(ro(e,"noMultiBindings"),n.noMultiBindings,e.noMultiBindings,!1),(0,i.eG)(po.getAnnotation(e),e.watches),(0,i.eG)(ro(e,"dependencies"),n.dependencies,e.dependencies))}register(t){const{Type:e,key:s,aliases:i}=this;pr(s,e).register(t),ur(s,e).register(t),gr(i,co,s,t)}toString(){return`au:ca:${this.name}`}}const io=On("custom-attribute"),no=t=>`${io}:${t}`,ro=(t,e)=>Tn(En(e),t),oo=(t,e)=>Dr(t,no(e))??void 0,ao=(t,e)=>{const s=so.create(t,e);return xn(io,s,s.Type),xn(io,s,s),Pn(e,io),s.Type},ho=t=>{const e=Tn(io,t);if(void 0===e)throw vr(759,t);return e},co=Fn({name:io,keyFrom:no,isType:t=>Gn(t)&&$n(io,t),for:oo,define:ao,getDefinition:ho,annotate(t,e,s){xn(En(e),s,t)},getAnnotation:ro}),lo=i.ow,uo=En("watch"),po=Fn({name:uo,add(t,e){let s=Tn(uo,t);null==s&&xn(uo,s=[],t),s.push(e)},getAnnotation:t=>Tn(uo,t)??lo});function fo(t){return function(e){return $o(t,e)}}const go=new WeakMap;class vo{get type(){return 1}constructor(t,e,s,i,n,r,o,a,h,c,l,u,d,p,f,g,v,m,w,b){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.cache=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=h,this.injectable=c,this.needsCompile=l,this.surrogates=u,this.bindables=d,this.containerless=p,this.isStrictBinding=f,this.shadowOptions=g,this.hasSlots=v,this.enhance=m,this.watches=w,this.processContent=b}static create(t,e=null){if(null===e){const s=t;if(Qn(s))throw vr(761,t);const n=(0,i.E8)("name",s,To);return e=Gn(s.Type)?s.Type:Oo((0,i.Ho)(n)),new vo(e,n,(0,i.eG)(s.aliases),(0,i.E8)("key",s,(()=>Ao(n))),(0,i.E8)("cache",s,wo),(0,i.E8)("capture",s,yo),(0,i.E8)("template",s,bo),(0,i.eG)(s.instructions),(0,i.eG)(s.dependencies),(0,i.E8)("injectable",s,bo),(0,i.E8)("needsCompile",s,ko),(0,i.eG)(s.surrogates),rr.from(e,s.bindables),(0,i.E8)("containerless",s,yo),(0,i.E8)("isStrictBinding",s,yo),(0,i.E8)("shadowOptions",s,bo),(0,i.E8)("hasSlots",s,yo),(0,i.E8)("enhance",s,yo),(0,i.E8)("watches",s,Co),(0,i.pU)("processContent",e,bo))}if(Qn(t))return new vo(e,t,(0,i.eG)(Ro(e,"aliases"),e.aliases),Ao(t),(0,i.pU)("cache",e,wo),(0,i.pU)("capture",e,yo),(0,i.pU)("template",e,bo),(0,i.eG)(Ro(e,"instructions"),e.instructions),(0,i.eG)(Ro(e,"dependencies"),e.dependencies),(0,i.pU)("injectable",e,bo),(0,i.pU)("needsCompile",e,ko),(0,i.eG)(Ro(e,"surrogates"),e.surrogates),rr.from(e,...rr.getAll(e),Ro(e,"bindables"),e.bindables),(0,i.pU)("containerless",e,yo),(0,i.pU)("isStrictBinding",e,yo),(0,i.pU)("shadowOptions",e,bo),(0,i.pU)("hasSlots",e,yo),(0,i.pU)("enhance",e,yo),(0,i.eG)(po.getAnnotation(e),e.watches),(0,i.pU)("processContent",e,bo));const s=(0,i.E8)("name",t,To);return new vo(e,s,(0,i.eG)(Ro(e,"aliases"),t.aliases,e.aliases),Ao(s),(0,i.JW)("cache",t,e,wo),(0,i.JW)("capture",t,e,yo),(0,i.JW)("template",t,e,bo),(0,i.eG)(Ro(e,"instructions"),t.instructions,e.instructions),(0,i.eG)(Ro(e,"dependencies"),t.dependencies,e.dependencies),(0,i.JW)("injectable",t,e,bo),(0,i.JW)("needsCompile",t,e,ko),(0,i.eG)(Ro(e,"surrogates"),t.surrogates,e.surrogates),rr.from(e,...rr.getAll(e),Ro(e,"bindables"),e.bindables,t.bindables),(0,i.JW)("containerless",t,e,yo),(0,i.JW)("isStrictBinding",t,e,yo),(0,i.JW)("shadowOptions",t,e,bo),(0,i.JW)("hasSlots",t,e,yo),(0,i.JW)("enhance",t,e,yo),(0,i.eG)(t.watches,po.getAnnotation(e),e.watches),(0,i.JW)("processContent",t,e,bo))}static getOrCreate(t){if(t instanceof vo)return t;if(go.has(t))return go.get(t);const e=vo.create(t);return go.set(t,e),xn(So,e,e.Type),e}register(t){const{Type:e,key:s,aliases:i}=this;t.has(s,!1)||(pr(s,e).register(t),ur(s,e).register(t),gr(i,Po,s,t))}toString(){return`au:ce:${this.name}`}}const mo={name:void 0,searchParents:!1,optional:!1},wo=()=>0,bo=()=>null,yo=()=>!1,ko=()=>!0,Co=()=>i.ow,So=On("custom-element"),Ao=t=>`${So}:${t}`,To=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),$o=(t,e)=>{const s=vo.create(t,e);return xn(So,s,s.Type),xn(So,s,s),Pn(s.Type,So),s.Type},xo=t=>Gn(t)&&$n(So,t),Io=(t,e=mo)=>{if(void 0===e.name&&!0!==e.searchParents){const s=Dr(t,So);if(null===s){if(!0===e.optional)return null;throw vr(762,t)}return s}if(void 0!==e.name){if(!0!==e.searchParents){const s=Dr(t,So);if(null===s)throw vr(763,t);return s.is(e.name)?s:void 0}let s=t,i=!1;for(;null!==s;){const t=Dr(s,So);if(null!==t&&(i=!0,t.is(e.name)))return t;s=Kr(s)}if(i)return;throw vr(764,t)}let s=t;for(;null!==s;){const t=Dr(s,So);if(null!==t)return t;s=Kr(s)}throw vr(765,t)},Ro=(t,e)=>Tn(En(e),t),Eo=t=>{const e=Tn(So,t);if(void 0===e)throw vr(760,t);return e},Oo=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,Yn(n,"name",t),i!==e&&Vn(n.prototype,i),n}}(),Po=Fn({name:So,keyFrom:Ao,isType:xo,for:Io,define:$o,getDefinition:Eo,annotate:(t,e,s)=>{xn(En(e),s,t)},getAnnotation:Ro,generateName:To,createInjectable:()=>{const t=function(e,s,n){return i.DI.getOrCreateAnnotationParamTypes(e)[n]=t,e};return t.register=function(e){return{resolve:(e,s)=>s.has(t,!0)?s.get(t):null}},t},generateType:Oo}),Mo=(t,e,s,i)=>{t.addEventListener(e,s,i)},No=(t,e,s,i)=>{t.removeEventListener(e,s,i)},Bo=t=>{let e;const s=t.prototype;Zn(s,"subscribe",(function(t){if(this.subs.add(t)&&1===this.subs.count){for(e of this.cf.events)Mo(this.P,e,this);this.L=!0,this.M?.()}})),Zn(s,"unsubscribe",(function(t){if(this.subs.remove(t)&&0===this.subs.count){for(e of this.cf.events)No(this.P,e,this);this.L=!1,this.q?.()}})),Zn(s,"useConfig",(function(t){if(this.cf=t,this.L){for(e of this.cf.events)No(this.P,e,this);for(e of this.cf.events)Mo(this.P,e,this)}}))},jo=t=>{Zn(t.prototype,"subscribe",i.ZT),Zn(t.prototype,"unsubscribe",i.ZT)};class Lo{get doNotCache(){return!0}constructor(t){this.obj=t,this.type=6,this.v="",this.F={},this.H=0}getValue(){return this.v}setValue(t){t!==this.v&&(this.v=t,this.O())}O(){const t=this.F,e=++this.H,s=this.obj.classList,i=Uo(this.v),n=i.length;let r,o=0;if(n>0)for(;o<n;o++)r=i[o],0!==r.length&&(t[r]=this.H,s.add(r));if(1!==e)for(r in t)t[r]!==e&&s.remove(r)}}function Uo(t){if(Qn(t))return Do(t);if("object"!=typeof t)return i.ow;if(t instanceof Array){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...Uo(t[i]));return s}return i.ow}const e=[];let s;for(s in t)Boolean(t[s])&&(s.includes(" ")?e.push(...Do(s)):e.push(s));return e}function Do(t){const e=t.match(/\S+/g);return null===e?i.ow:e}jo(Lo);const Fo=cr("IShadowDOMStyles"),Vo=cr("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:i.ZT})));function Wo(t){return function(e){return Ko.define(t,e)}}class _o{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,n;return Qn(t)?(s=t,n={name:s}):(s=t.name,n=t),new _o(e,(0,i.BR)(Ho(e,"name"),s),(0,i.eG)(Ho(e,"aliases"),n.aliases,e.aliases),Ko.keyFrom(s))}register(t){const{Type:e,key:s,aliases:n}=this;i.YM.singleton(s,e).register(t),i.YM.aliasTo(s,e).register(t),gr(n,Ko,s,t)}}const qo=On("value-converter"),Ho=(t,e)=>Tn(En(e),t),Ko=Fn({name:qo,keyFrom:t=>`${qo}:${t}`,isType:t=>Gn(t)&&$n(qo,t),define(t,e){const s=_o.create(t,e);return xn(qo,s,s.Type),xn(qo,s,s),Pn(e,qo),s.Type},getDefinition(t){const e=Tn(qo,t);if(void 0===e)throw vr(152,t);return e},annotate(t,e,s){xn(En(e),s,t)},getAnnotation:Ho});class zo{constructor(t,e){this.v=void 0,this.b=t,this.N=e}flush(){this.b.updateSource(this.v)}handleChange(t,e){const s=this.b;t!==ot(s.ast,s.s,s,null)&&(this.v=t,this.N.add(this))}}const Go=t=>{Zn(t.prototype,"useScope",(function(t){this.s=t}))},Qo=(t,e=!0)=>s=>{const i=s.prototype;null!=t&&Yn(i,"strict",{enumerable:!0,get:function(){return t}}),Yn(i,"strictFnCall",{enumerable:!0,get:function(){return e}}),Zn(i,"get",(function(t){return this.l.get(t)})),Zn(i,"getSignaler",(function(){return this.l.root.get(yn)})),Zn(i,"getConverter",(function(t){const e=Ko.keyFrom(t);let s=Jo.get(this);return null==s&&Jo.set(this,s=new Xo),s[e]??(s[e]=this.l.get(hr(e)))})),Zn(i,"getBehavior",(function(t){const e=kr.keyFrom(t);let s=Jo.get(this);return null==s&&Jo.set(this,s=new Xo),s[e]??(s[e]=this.l.get(hr(e)))}))},Jo=new WeakMap;class Xo{}const Yo=cr("IFlushQueue",(t=>t.singleton(Zo)));class Zo{constructor(){this.$=!1,this.W=new Set}get count(){return this.W.size}add(t){if(this.W.add(t),!this.$){this.$=!0;try{this.W.forEach(ta)}finally{this.$=!1}}}clear(){this.W.clear(),this.$=!1}}function ta(t,e,s){s.delete(t),t.flush()}const ea=new WeakSet,sa=(t,e)=>{Zn(t.prototype,"limit",(function(t){if(ea.has(this))throw vr(9996);ea.add(this);const s=e(this,t),i=t.signals,n=i.length>0?this.get(yn):null,r=this[s],o=(...t)=>r.call(this,...t),a="debounce"===t.type?ia(t,o,this):na(t,o,this),h=n?{handleChange:a.flush}:null;return this[s]=a,n&&i.forEach((t=>tr(n,t,h))),{dispose:()=>{n&&i.forEach((t=>er(n,t,h))),ea.delete(this),a.dispose(),delete this[s]}}}))},ia=(t,e,s)=>{let i,n,r,o=!1;const a=t.queue,h=()=>e(r),c=e=>{r=e,s.isBound?(n=i,i=a.queueTask(h,{delay:t.delay,reusable:!1}),n?.cancel()):h()},l=c.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return c.flush=()=>{o=0===i?.status,l(),o&&h()},c},na=(t,e,s)=>{let i,n,r,o=0,a=0,h=!1;const c=t.queue,l=()=>t.now(),u=()=>e(r),d=e=>{r=e,s.isBound?(a=l()-o,n=i,a>t.delay?(o=l(),u()):i=c.queueTask((()=>{o=l(),u()}),{delay:t.delay-a,reusable:!1}),n?.cancel()):u()},p=d.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return d.flush=()=>{h=0===i?.status,p(),h&&u()},d},{enter:ra,exit:oa}=ai,{wrap:aa,unwrap:ha}=en;class ca{get value(){return this.v}constructor(t,e,s,i,n){this.obj=t,this.$get=s,this.useProxy=n,this.isBound=!1,this.running=!1,this.v=void 0,this.cb=i,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.v,s=this.compute();Xn(s,e)||this.cb.call(t,s,e,t)}compute(){this.running=!0,this.obs.version++;try{return ra(this),this.v=ha(this.$get.call(void 0,this.useProxy?aa(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,oa(this)}}}class la{get value(){return this.v}constructor(t,e,s,i,n){this.scope=t,this.l=e,this.oL=s,this.isBound=!1,this.boundFn=!1,this.obj=t.bindingContext,this.j=i,this.cb=n}handleChange(t){const e=this.j,s=this.obj,i=this.v;2===e.$kind&&1===this.obs.count||(this.obs.version++,t=ot(e,this.scope,this,this),this.obs.clear()),Xn(t,i)||(this.v=t,this.cb.call(s,t,i,s))}bind(){this.isBound||(this.obs.version++,this.v=ot(this.j,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}Ne(ca),Ne(la),Qo(!0)(la);const ua=cr("ILifecycleHooks");class da{constructor(t,e){this.definition=t,this.instance=e}}class pa{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const s=new Set;let i=e.prototype;for(;i!==Ln;){for(const t of Wn(i))"constructor"===t||t.startsWith("_")||s.add(t);i=Object.getPrototypeOf(i)}return new pa(e,s)}register(t){lr(ua,this.Type).register(t)}}const fa=new WeakMap,ga=En("lifecycle-hooks"),va=Fn({name:ga,define(t,e){const s=pa.create(t,e);return xn(ga,s,e),Pn(e,ga),s.Type},resolve(t){let e=fa.get(t);if(void 0===e){fa.set(t,e=new ma);const s=t.root,i=s.id===t.id?t.getAll(ua):t.has(ua,!1)?s.getAll(ua).concat(t.getAll(ua)):s.getAll(ua);let n,r,o,a,h;for(n of i)for(a of(r=Tn(ga,n.constructor),o=new da(r,n),r.propertyNames))h=e[a],void 0===h?e[a]=[o]:h.push(o)}return e}});class ma{}const wa={reusable:!1,preempt:!0};class ba{constructor(t,e,s,i,n,r,o,a,h){this.targetAttribute=o,this.targetProperty=a,this.mode=h,this.isBound=!1,this.s=void 0,this.U=null,this.v=void 0,this.boundFn=!1,this.l=e,this.ast=n,this.G=t,this.target=r,this.oL=s,this.A=i}updateTarget(t){const e=this.target,s=this.targetAttribute,i=this.targetProperty;switch(s){case"class":e.classList.toggle(i,!!t);break;case"style":{let s="",n=jn(t);Qn(n)&&n.includes("!important")&&(s="important",n=n.replace("!important","")),e.style.setProperty(i,n,s);break}default:null==t?e.removeAttribute(s):e.setAttribute(s,jn(t))}}handleChange(){if(!this.isBound)return;let t;this.obs.version++;const e=ot(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),e!==this.v&&(this.v=e,1!==this.G.state?(t=this.U,this.U=this.A.queueTask((()=>{this.U=null,this.updateTarget(e)}),wa),t?.cancel()):this.updateTarget(e))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ht(this.ast,t,this),3&this.mode&&this.updateTarget(this.v=ot(this.ast,t,this,(2&this.mode)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ct(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.U?.cancel(),this.U=null,this.obs.clearAll())}}Go(ba),sa(ba,(()=>"updateTarget")),Ne(ba),Qo(!0)(ba);const ya={reusable:!1,preempt:!0};class ka{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.U=null,this.G=t,this.oL=s,this.A=i,this.X=s.getAccessor(r,o);const h=n.expressions,c=this.partBindings=Array(h.length),l=h.length;let u=0;for(;l>u;++u)c[u]=new Ca(h[u],r,o,e,s,this)}K(){this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast.parts,s=t.length;let i="",n=0;if(1===s)i=e[0]+t[0].v+e[1];else for(i=e[0];s>n;++n)i+=t[n].v+e[n+1];const r=this.X;let o;1!==this.G.state&&(4&r.type)>0?(o=this.U,this.U=this.A.queueTask((()=>{this.U=null,r.setValue(i,this.target,this.targetProperty)}),ya),o?.cancel(),o=null):r.setValue(i,this.target,this.targetProperty)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,s=e.length;let i=0;for(;s>i;++i)e[i].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let s=0;for(;e>s;++s)t[s].unbind();this.U?.cancel(),this.U=null}}class Ca{constructor(t,e,s,i,n,r){this.ast=t,this.target=e,this.targetProperty=s,this.owner=r,this.mode=2,this.task=null,this.isBound=!1,this.v="",this.boundFn=!1,this.l=i,this.oL=n}updateTarget(){this.owner.K()}handleChange(){if(!this.isBound)return;this.obs.version++;const t=ot(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),t!=this.v&&(this.v=t,zn(t)&&this.observeCollection(t),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ht(this.ast,t,this),this.v=ot(this.ast,this.s,this,(2&this.mode)>0?this:null),zn(this.v)&&this.observeCollection(this.v),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ct(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}Go(Ca),sa(Ca,(()=>"updateTarget")),Ne(Ca),Qo(!0)(Ca);const Sa={reusable:!1,preempt:!0};class Aa{constructor(t,e,s,i,n,r,o){this.p=n,this.ast=r,this.target=o,this.isBound=!1,this.mode=2,this.U=null,this.v="",this.Y=!1,this.boundFn=!1,this.strict=!0,this.l=e,this.G=t,this.oL=s,this.A=i}updateTarget(t){const e=this.target,s=this.v;this.v=t,this.Y&&(s.parentNode?.removeChild(s),this.Y=!1),t instanceof this.p.Node&&(e.parentNode?.insertBefore(t,e),t="",this.Y=!0),e.textContent=jn(t??"")}handleChange(){if(!this.isBound)return;this.obs.version++;const t=ot(this.ast,this.s,this,(2&this.mode)>0?this:null);if(this.obs.clear(),t===this.v)return this.U?.cancel(),void(this.U=null);1!==this.G.state?this.Z(t):this.updateTarget(t)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const t=this.v=ot(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),zn(t)&&this.observeCollection(t),1!==this.G.state?this.Z(t):this.updateTarget(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ht(this.ast,t,this);const e=this.v=ot(this.ast,this.s,this,(2&this.mode)>0?this:null);zn(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ct(this.ast,this.s,this),this.Y&&this.v.parentNode?.removeChild(this.v),this.s=void 0,this.obs.clearAll(),this.U?.cancel(),this.U=null)}Z(t){const e=this.U;this.U=this.A.queueTask((()=>{this.U=null,this.updateTarget(t)}),Sa),e?.cancel()}}Go(Aa),sa(Aa,(()=>"updateTarget")),Ne()(Aa),Qo(void 0,!1)(Aa);class Ta{constructor(t,e,s,i,n=!1){this.ast=s,this.targetProperty=i,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.J=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=ot(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.J?t.bindingContext:t.overrideContext,ht(this.ast,t,this),this.v=ot(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ct(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}Go(Ta),sa(Ta,(()=>"updateTarget")),Ne(Ta),Qo(!0)(Ta);class $a{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.X=void 0,this.U=null,this.tt=null,this.boundFn=!1,this.l=e,this.G=t,this.A=i,this.oL=s}updateTarget(t){this.X.setValue(t,this.target,this.targetProperty)}updateSource(t){at(this.ast,this.s,this,t)}handleChange(){if(!this.isBound)return;this.obs.version++;const t=ot(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),1!==this.G.state&&(4&this.X.type)>0?(xa=this.U,this.U=this.A.queueTask((()=>{this.updateTarget(t),this.U=null}),Ia),xa?.cancel(),xa=null):this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ht(this.ast,t,this);const e=this.oL,s=this.mode;let i=this.X;i||(i=4&s?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.X=i);const n=(2&s)>0;3&s&&this.updateTarget(ot(this.ast,this.s,this,n?this:null)),4&s&&(i.subscribe(this.tt??(this.tt=new zo(this,this.l.get(Yo)))),n||this.updateSource(i.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ct(this.ast,this.s,this),this.s=void 0,this.tt&&(this.X.unsubscribe(this.tt),this.tt=null),this.U?.cancel(),this.U=null,this.obs.clearAll())}useTargetObserver(t){this.X?.unsubscribe(this),(this.X=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.tt)throw vr(9995);this.tt=t}}Go($a),sa($a,(t=>4&t.mode?"updateSource":"updateTarget")),Ne($a),Qo(!0,!1)($a);let xa=null;const Ia={reusable:!1,preempt:!0};class Ra{constructor(t,e,s){this.ast=e,this.target=s,this.isBound=!1,this.s=void 0,this.l=t}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ht(this.ast,t,this),at(this.ast,this.s,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ot(this.ast,this.s,this,null)===this.target&&at(this.ast,this.s,this,null),ct(this.ast,this.s,this),this.s=void 0)}}Qo(!1)(Ra);class Ea{constructor(t,e=!1){this.prevent=t,this.capture=e}}class Oa{constructor(t,e,s,i,n){this.ast=e,this.target=s,this.targetEvent=i,this.isBound=!1,this.self=!1,this.boundFn=!0,this.l=t,this.et=n}callSource(t){const e=this.s.overrideContext;e.$event=t;let s=ot(this.ast,this.s,this,null);return delete e.$event,Gn(s)&&(s=s(t)),!0!==s&&this.et.prevent&&t.preventDefault(),s}handleEvent(t){this.self&&this.target!==t.composedPath()[0]||this.callSource(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,ht(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.et),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ct(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.et))}}Go(Oa),sa(Oa,(()=>"callSource")),Qo(!0,!0)(Oa);const Pa=cr("IViewFactory");class Ma{constructor(t,e){this.isCaching=!1,this.it=null,this.st=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=Ma.maxCacheSize:Qn(t)&&(t=parseInt(t,10)),-1!==this.st&&e||(this.st=t)),this.st>0?this.it=[]:this.it=null,this.isCaching=this.st>0}canReturnToCache(t){return null!=this.it&&this.it.length<this.st}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.it.push(t),!0)}create(t){const e=this.it;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=qh.$view(this,t),s)}}Ma.maxCacheSize=65535;const Na=cr("IAuSlotsInfo");class Ba{constructor(t){this.projectedSlots=t}}const ja=cr("IAuSlotWatcher");class La{static create(t,e,s,n,r,o,a,h){const c=[],l=n.renderers,u=e=>{let s=e,i=t;for(;null!=i&&s>0;)i=i.parent,--s;if(null==i)throw vr(9999);return i},d=t=>{const n=u(t),p=new La(n),f=r.compileSpread(n.controller.definition,n.instruction?.captures??i.ow,n.controller.container,e,s);let g;for(g of f)switch(g.type){case"hs":d(t+1);break;case"hp":l[g.instructions.type].render(p,Io(e),g.instructions,o,a,h);break;default:l[g.type].render(p,e,g,o,a,h)}c.push(p)};return d(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get isStrictBinding(){return this.$controller.isStrictBinding}get state(){return this.$controller.state}constructor(t){this.ht=t,this.isBound=!1,this.ct=[],this.$controller=t.controller,this.locator=this.$controller.container}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.ht.controller.scope.parent??void 0;if(null==e)throw vr(9999);this.ct.forEach((t=>t.bind(e)))}unbind(){this.ct.forEach((t=>t.unbind())),this.isBound=!1}addBinding(t){this.ct.push(t)}addChild(t){if(1!==t.vmKind)throw vr(9998);this.$controller.addChild(t)}}var Ua,Da;(Da=Ua||(Ua={})).hydrateElement="ra",Da.hydrateAttribute="rb",Da.hydrateTemplateController="rc",Da.hydrateLetElement="rd",Da.setProperty="re",Da.interpolation="rf",Da.propertyBinding="rg",Da.letBinding="ri",Da.refBinding="rj",Da.iteratorBinding="rk",Da.multiAttr="rl",Da.textBinding="ha",Da.listenerBinding="hb",Da.attributeBinding="hc",Da.stylePropertyBinding="hd",Da.setAttribute="he",Da.setClassAttribute="hf",Da.setStyleAttribute="hg",Da.spreadBinding="hs",Da.spreadElementProp="hp";const Fa=cr("Instruction");class Va{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class Wa{constructor(t,e,s){this.from=t,this.to=e,this.mode=s,this.type="rg"}}class _a{constructor(t,e,s){this.forOf=t,this.to=e,this.props=s,this.type="rk"}}class qa{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class Ha{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class Ka{constructor(t,e,s){this.value=t,this.to=e,this.command=s,this.type="rl"}}class za{constructor(t,e,s,i,n,r){this.res=t,this.alias=e,this.props=s,this.projections=i,this.containerless=n,this.captures=r,this.type="ra",this.auSlot=null}}class Ga{constructor(t,e,s){this.res=t,this.alias=e,this.props=s,this.type="rb"}}class Qa{constructor(t,e,s,i){this.def=t,this.res=e,this.alias=s,this.props=i,this.type="rc"}}class Ja{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class Xa{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class Ya{constructor(t,e){this.from=t,this.strict=e,this.type="ha"}}class Za{constructor(t,e,s,i){this.from=t,this.to=e,this.preventDefault=s,this.capture=i,this.type="hb"}}class th{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class eh{constructor(t){this.value=t,this.type="hf"}}class sh{constructor(t){this.value=t,this.type="hg"}}class ih{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}class nh{constructor(){this.type="hs"}}class rh{constructor(t){this.instructions=t,this.type="hp"}}const oh=cr("ITemplateCompiler"),ah=cr("IRenderer");function hh(t){return function(e){return e.register=function(t){lr(ah,this).register(t)},Yn(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function ch(t,e,s){return Qn(e)?t.parse(e,s):e}function lh(t){return null!=t.viewModel?t.viewModel:t}let uh=class{render(t,e,s){const i=lh(e);void 0!==i.$observers?.[s.to]?i.$observers[s.to].setValue(s.value):i[s.to]=s.value}};uh=An([hh("re")],uh);let dh=class{constructor(){this.r=(0,i.DB)(Uh)}render(t,e,s,n,r,o){let a,h,c,l;const u=s.res,d=s.projections,p=t.container;if("string"==typeof u){if(a=p.find(Po,u),null==a)throw vr(752,s,t)}else a=u;const f=s.containerless||a.containerless?zr(e):null,g=function(t,e,s,n,r,o){const a=e.container.createChild();return Zr(a,t,s),fr(a,tc,new i.g(Ih,e)),fr(a,Fa,new i.g(Rh,n)),fr(a,_r,null==r?Bh:new Nh(r)),fr(a,Pa,jh),fr(a,Na,null==o?Lh:new i.g(Oh,o)),a}(n,t,e,s,f,null==d?void 0:new Ba(_n(d)));h=a.Type,c=g.invoke(h),fr(g,h,new i.g(a.key,c)),l=qh.$el(g,c,e,s,a,f),Fr(e,a.key,l);const v=this.r.renderers,m=s.props,w=m.length;let b,y=0;for(;w>y;)b=m[y],v[b.type].render(t,l,b,n,r,o),++y;t.addChild(l)}};dh=An([hh("ra")],dh);let ph=class{constructor(){this.r=(0,i.DB)(Uh)}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=a.find(co,s.res),null==o)throw vr(753,s,t)}else o=s.res;const h=Mh(i,o,t,e,s,void 0,void 0),c=qh.$attr(h.ctn,h.vm,e,o);Fr(e,o.key,c);const l=this.r.renderers,u=s.props,d=u.length;let p,f=0;for(;d>f;)p=u[f],l[p.type].render(t,c,p,i,n,r),++f;t.addChild(c)}};ph=An([hh("rb")],ph);let fh=class{constructor(){this.r=(0,i.DB)(Uh)}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=a.find(co,s.res),null==o)throw vr(754,s,t)}else o=s.res;const h=this.r.getViewFactory(s.def,a),c=zr(e),l=Mh(i,o,t,e,s,h,c),u=qh.$attr(l.ctn,l.vm,e,o);Fr(c,o.key,u),l.vm.link?.(t,u,e,s);const d=this.r.renderers,p=s.props,f=p.length;let g,v=0;for(;f>v;)g=p[v],d[g.type].render(t,u,g,i,n,r),++v;t.addChild(u)}};fh=An([hh("rc")],fh);let gh=class{render(t,e,s,i,n,r){e.remove();const o=s.instructions,a=s.toBindingContext,h=t.container,c=o.length;let l,u,d=0;for(;c>d;)l=o[d],u=ch(n,l.from,16),t.addBinding(new Ta(h,r,u,l.to,a)),++d}};gh=An([hh("rd")],gh);let vh=class{render(t,e,s,i,n){t.addBinding(new Ra(t.container,ch(n,s.from,16),function(t,e){if("element"===e)return t;switch(e){case"controller":return Io(t);case"view":throw vr(750);case"component":return Io(t).viewModel;default:{const s=oo(t,e);if(void 0!==s)return s.viewModel;const i=Io(t,{name:e});if(void 0===i)throw vr(751,e);return i.viewModel}}}(e,s.to)))}};vh=An([hh("rj")],vh);let mh=class{render(t,e,s,i,n,r){t.addBinding(new ka(t,t.container,r,i.domWriteQueue,ch(n,s.from,1),lh(e),s.to,2))}};mh=An([hh("rf")],mh);let wh=class{render(t,e,s,i,n,r){t.addBinding(new $a(t,t.container,r,i.domWriteQueue,ch(n,s.from,16),lh(e),s.to,s.mode))}};wh=An([hh("rg")],wh);let bh=class{render(t,e,s,i,n,r){t.addBinding(new $a(t,t.container,r,i.domWriteQueue,ch(n,s.forOf,2),lh(e),s.to,2))}};bh=An([hh("rk")],bh);let yh=class{render(t,e,s,i,n,r){t.addBinding(new Aa(t,t.container,r,i.domWriteQueue,i,ch(n,s.from,16),e))}};yh=An([hh("ha")],yh);let kh=class{render(t,e,s,i,n){t.addBinding(new Oa(t.container,ch(n,s.from,8),e,s.to,new Ea(s.preventDefault,s.capture)))}};kh=An([hh("hb")],kh);let Ch=class{render(t,e,s){e.setAttribute(s.to,s.value)}};Ch=An([hh("he")],Ch);let Sh=class{render(t,e,s){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(e.classList,s.value)}};Sh=An([hh("hf")],Sh);let Ah=class{render(t,e,s){e.style.cssText+=s.value}};Ah=An([hh("hg")],Ah);let Th=class{render(t,e,s,i,n,r){t.addBinding(new $a(t,t.container,r,i.domWriteQueue,ch(n,s.from,16),e.style,s.to,2))}};Th=An([hh("hd")],Th);let $h=class{render(t,e,s,i,n,r){const o=t.container,a=o.has(qr,!1)?o.get(qr):null;t.addBinding(new ba(t,o,r,i.domWriteQueue,ch(n,s.from,16),e,s.attr,null==a?s.to:s.to.split(/\s/g).map((t=>a[t]??t)).join(" "),2))}};$h=An([hh("hc")],$h);let xh=class{constructor(){this.ut=(0,i.DB)(oh),this.r=(0,i.DB)(Uh)}render(t,e,s,i,n,r){La.create(t.container.get(ec),e,void 0,this.r,this.ut,i,n,r).forEach((e=>t.addBinding(e)))}};xh=An([hh("hs")],xh);const Ih="IController",Rh="IInstruction",Eh="IRenderLocation",Oh="ISlotsInfo";class Ph{get $isResolver(){return!0}constructor(t){this.f=t}resolve(){const t=this.f;if(null===t)throw vr(755);if(!Qn(t.name)||0===t.name.length)throw vr(756);return t}}function Mh(t,e,s,n,r,o,a,h){const c=s instanceof qh?s:s.$controller,l=c.container.createChild();return Zr(l,t,n),fr(l,tc,new i.g(Ih,c)),fr(l,Fa,new i.g(Rh,r)),fr(l,_r,null==a?Bh:new i.g(Eh,a)),fr(l,Pa,null==o?jh:new Ph(o)),fr(l,Na,null==h?Lh:new i.g(Oh,h)),{vm:l.invoke(e.Type),ctn:l}}class Nh{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(t){this.l=t}resolve(){return this.l}}const Bh=new Nh(null),jh=new Ph(null),Lh=new i.g(Oh,new Ba(i.ow)),Uh=cr("IRendering",(t=>t.singleton(Dh)));class Dh{get renderers(){return this.ft??(this.ft=this.dt.getAll(ah,!1).reduce(((t,e)=>(t[e.target]=e,t)),Un()))}constructor(){this.gt=new WeakMap,this.vt=new WeakMap;const t=this.dt=(0,i.DB)(i.bE).root;this.p=t.get(Lr),this.ep=t.get(Be),this.oL=t.get(pn),this.bt=new Qr(this.p,this.p.document.createDocumentFragment())}compile(t,e,s){if(!1!==t.needsCompile){const i=this.gt,n=e.get(oh);let r=i.get(t);return null==r?i.set(t,r=n.compile(t,e,s)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new Ma(e,vo.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new Qr(this.p,this.xt(t.template));let e,s=!1;const i=this.vt,n=this.p,r=n.document;if(i.has(t))e=i.get(t);else{const o=t.template;let a;null===o?e=null:o instanceof n.Node?"TEMPLATE"===o.nodeName?(e=o.content,s=!0):(e=r.createDocumentFragment()).appendChild(o.cloneNode(!0)):(a=r.createElement("template"),Qn(o)&&(a.innerHTML=o),e=a.content,s=!0),this.xt(e),i.set(t,e)}return null==e?this.bt:new Qr(this.p,s?r.importNode(e,!0):r.adoptNode(e.cloneNode(!0)))}render(t,e,s,i){const n=s.instructions,r=this.renderers,o=e.length;let a,h,c,l=0,u=0,d=n.length;if(o!==d)throw vr(757,o,d);if(o>0)for(;o>l;){for(a=n[l],c=e[l],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,c,h,this.p,this.ep,this.oL),++u;++l}if(null!=i&&(a=s.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,i,h,this.p,this.ep,this.oL),++u}wt(){return this.p.document.createElement("au-m")}xt(t){if(null==t)return null;let e=t,s=e.firstChild,i=null;for(;null!=s;)if(8===s.nodeType&&"au*"===s.nodeValue&&(i=s.nextSibling,e.removeChild(s),e.insertBefore(this.wt(),i),s=8===i.nodeType?i.nextSibling:i),i=s?.firstChild,null==i)if(i=s?.nextSibling,null==i)for(s=e.nextSibling,e=e.parentNode;null==s&&null!=e;)s=e.nextSibling,e=e.parentNode;else s=i;else e=s,s=i;return t}}var Fh;!function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(Fh||(Fh={}));const Vh={optional:!0},Wh=(t=>Vn((function t(e,s,n){i.DI.inject(t)(e,s,n)}),{$isResolver:!0,resolve:(e,s)=>s.has(t,!1)?s.get(t):s.root.has(t,!1)?s.root.get(t):void 0}))(ft),_h=new WeakMap;class qh{get lifecycleHooks(){return this.yt}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this.kt}set viewModel(t){this.kt=t,this.Ct=null==t||2===this.vmKind?Jh.none:new Jh(t)}constructor(t,e,s,i,n,r,o){this.container=t,this.vmKind=e,this.definition=s,this.viewFactory=i,this.host=r,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.At=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.yt=null,this.state=0,this.Bt=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.St=0,this._t=0,this.Rt=0,this.kt=n,this.Ct=2===e?Jh.none:new Jh(n),this.location=o,this.r=t.root.get(Uh),this.coercion=2===e?void 0:t.get(Wh)}static getCached(t){return _h.get(t)}static getCachedOrThrow(t){const e=qh.getCached(t);if(void 0===e)throw vr(500,t);return e}static $el(t,e,s,n,r=undefined,o=null){if(_h.has(e))return _h.get(e);r=r??Eo(e.constructor);const a=new qh(t,0,r,null,e,s,o),h=t.get((0,i.jt)(ec));return r.dependencies.length>0&&t.register(...r.dependencies),fr(t,ec,new i.g("IHydrationContext",new sc(a,n,h))),_h.set(e,a),null!=n&&!1===n.hydrate||a.hE(n,h),a}static $attr(t,e,s,i){if(_h.has(e))return _h.get(e);i=i??ho(e.constructor);const n=new qh(t,1,i,null,e,s,null);return i.dependencies.length>0&&t.register(...i.dependencies),_h.set(e,n),n.Tt(),n}static $view(t,e=undefined){const s=new qh(t.container,2,null,t,null,null,null);return s.parent=e??null,s.It(),s}hE(t,e){const s=this.container,n=this.kt;let r=this.definition;if(this.scope=it.create(n,null,!0),r.watches.length>0&&Gh(this,s,r,n),Hh(this,r,n),this.Ct.Et){const t=n.define(this,e,r);void 0!==t&&t!==r&&(r=vo.getOrCreate(t))}this.yt=va.resolve(s),r.register(s),null!==r.injectable&&fr(s,r.injectable,new i.g("definition.injectable",n)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){null!=this.yt.hydrating&&this.yt.hydrating.forEach(rc,this),this.Ct.Pt&&this.kt.hydrating(this);const e=this.Lt=this.r.compile(this.definition,this.container,t),{shadowOptions:s,isStrictBinding:i,hasSlots:n,containerless:r}=e;let o=this.location;if(this.isStrictBinding=i,null!==(this.hostController=Io(this.host,Vh))&&(this.host=this.container.root.get(Lr).document.createElement(this.definition.name),r&&null==o&&(o=this.location=zr(this.host))),Fr(this.host,So,this),Fr(this.host,this.definition.key,this),null!==s||n){if(null!=o)throw vr(501);Fr(this.shadowRoot=this.host.attachShadow(s??Xh),So,this),Fr(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=o?(Fr(o,So,this),Fr(o,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.kt.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.yt.hydrated&&this.yt.hydrated.forEach(oc,this),this.Ct.Dt&&this.kt.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Lt,this.host),void 0!==this.yt.created&&this.yt.created.forEach(nc,this),this.Ct.Mt&&this.kt.created(this)}Tt(){const t=this.definition,e=this.kt;t.watches.length>0&&Gh(this,this.container,t,e),Hh(this,t,e),e.$controller=this,this.yt=va.resolve(this.container),void 0!==this.yt.created&&this.yt.created.forEach(nc,this),this.Ct.Mt&&this.kt.created(this)}It(){this.Lt=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Lt.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Lt)).findTargets(),this.Lt,void 0)}activate(t,e,s){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw vr(502,this.name);default:throw vr(503,this.name,function(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}(this.state))}switch(this.parent=e,this.vmKind){case 0:this.scope.parent=s??null;break;case 1:this.scope=s??null;break;case 2:if(null==s)throw vr(504,this.name);this.hasLockedScope||(this.scope=s)}let n;return this.isStrictBinding,this.$initiator=t,this.qt(),2!==this.vmKind&&null!=this.yt.binding&&(n=(0,i.TD)(...this.yt.binding.map(ac,this))),this.Ct.Ft&&(n=(0,i.TD)(n,this.kt.binding(this.$initiator,this.parent))),Kn(n)?(this.Ht(),n.then((()=>{this.At=!0,1!==this.state?this.Ot():this.bind()})).catch((t=>{this.Vt(t)})),this.$promise):(this.At=!0,this.bind(),this.$promise)}bind(){let t,e=0,s=0;if(null!==this.bindings)for(e=0,s=this.bindings.length;s>e;)this.bindings[e].bind(this.scope),++e;if(2!==this.vmKind&&null!=this.yt.bound&&(t=(0,i.TD)(...this.yt.bound.map(hc,this))),this.Ct.Nt&&(t=(0,i.TD)(t,this.kt.bound(this.$initiator,this.parent))),Kn(t))return this.Ht(),void t.then((()=>{this.isBound=!0,1!==this.state?this.Ot():this.$t()})).catch((t=>{this.Vt(t)}));this.isBound=!0,this.$t()}Wt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}$t(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Wt(this.host);break;case 3:this.hostController.Wt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(Fo,!1)?t.get(Fo):t.get(Vo)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.yt.attaching&&(t=(0,i.TD)(...this.yt.attaching.map(cc,this))),this.Ct.jt&&(t=(0,i.TD)(t,this.kt.attaching(this.$initiator,this.parent))),Kn(t)&&(this.Ht(),this.qt(),t.then((()=>{this.Ot()})).catch((t=>{this.Vt(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this.Ot()}deactivate(t,e){let s;switch(-17&this.state){case 2:this.state=4;break;case 1:this.state=4,s=this.$promise?.catch(i.ZT);break;case 0:case 8:case 32:case 40:return;default:throw vr(505,this.name,this.state)}this.$initiator=t,t===this&&this.zt();let n,r=0;if(null!==this.children)for(r=0;r<this.children.length;++r)this.children[r].deactivate(t,this);return(0,i.p9)(s,(()=>{if(this.isBound&&(2!==this.vmKind&&null!=this.yt.detaching&&(n=(0,i.TD)(...this.yt.detaching.map(uc,this))),this.Ct.Ut&&(n=(0,i.TD)(n,this.kt.detaching(this.$initiator,this.parent)))),Kn(n)&&(this.Ht(),t.zt(),n.then((()=>{t.Gt()})).catch((e=>{t.Vt(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Gt(),this.$promise}))}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){let t=0;if(null!==this.bindings)for(;t<this.bindings.length;++t)this.bindings[t].unbind();switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parent=null}this.state=8,this.$initiator=null,this.Xt()}Ht(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Ht())}Xt(){void 0!==this.$promise&&(pc=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,pc(),pc=void 0)}Vt(t){void 0!==this.$promise&&(fc=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,fc(t),fc=void 0),this.$initiator!==this&&this.parent.Vt(t)}qt(){++this.St,this.$initiator!==this&&this.parent.qt()}Ot(){if(1!==this.state)return--this.St,this.Xt(),void(this.$initiator!==this&&this.parent.Ot());if(0==--this.St){if(2!==this.vmKind&&null!=this.yt.attached&&(gc=(0,i.TD)(...this.yt.attached.map(lc,this))),this.Ct.Qt&&(gc=(0,i.TD)(gc,this.kt.attached(this.$initiator))),Kn(gc))return this.Ht(),gc.then((()=>{this.state=2,this.Xt(),this.$initiator!==this&&this.parent.Ot()})).catch((t=>{this.Vt(t)})),void(gc=void 0);gc=void 0,this.state=2,this.Xt()}this.$initiator!==this&&this.parent.Ot()}zt(){++this._t}Gt(){if(0==--this._t){this.Kt(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.At&&(2!==e.vmKind&&null!=e.yt.unbinding&&(t=(0,i.TD)(...e.yt.unbinding.map(dc,e))),e.Ct.Yt&&(e.debug&&e.logger.trace("unbinding()"),t=(0,i.TD)(t,e.viewModel.unbinding(e.$initiator,e.parent)))),Kn(t)&&(this.Ht(),this.Kt(),t.then((()=>{this.Zt()})).catch((t=>{this.Vt(t)}))),t=void 0,e=e.next;this.Zt()}}Kt(){++this.Rt}Zt(){if(0==--this.Rt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.At=!1,t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.At=!1,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return ho(this.kt.constructor).name===t;case 0:return Eo(this.kt.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(Fr(t,So,this),Fr(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(Fr(t,So,this),Fr(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(Fr(t,So,this),Fr(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.Ct.Jt&&this.kt.dispose(),null!==this.children&&(this.children.forEach(ic),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.kt&&(_h.delete(this.kt),this.kt=null),this.kt=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.Ct.te&&!0===this.kt.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}}function Hh(t,e,s){const n=e.bindables,r=Wn(n),o=r.length,a=t.container.get(pn);if(o>0)for(let e=0;e<o;++e){const o=r[e],h=n[o],c=h.callback,l=a.getObserver(s,o);if(h.set!==i.ZT&&!0!==l.useCoercer?.(h.set,t.coercion))throw vr(507,o);if(null!=s[c]||null!=s.propertyChanged){const e=(e,i)=>{t.isBound&&(s[c]?.(e,i),s.propertyChanged?.(o,e,i))};if(!0!==l.useCallback?.(e))throw vr(508,o)}}}const Kh=new Map,zh=t=>{let e=Kh.get(t);return null==e&&(e=new P(t,0),Kh.set(t,e)),e};function Gh(t,e,s,i){const n=e.get(pn),r=e.get(Be),o=s.watches,a=0===t.vmKind?t.scope:it.create(i,null,!0),h=o.length;let c,l,u,d=0;for(;h>d;++d){if(({expression:c,callback:l}=o[d]),l=Gn(l)?l:Reflect.get(i,l),!Gn(l))throw vr(506,l);Gn(c)?t.addBinding(new ca(i,n,c,l,!0)):(u=Qn(c)?r.parse(c,16):zh(c),t.addBinding(new la(a,e,n,u,l)))}}function Qh(t){return(0,n.Kn)(t)&&xo(t.constructor)}class Jh{constructor(t){this.Et="define"in t,this.Pt="hydrating"in t,this.Dt="hydrated"in t,this.Mt="created"in t,this.Ft="binding"in t,this.Nt="bound"in t,this.jt="attaching"in t,this.Qt="attached"in t,this.Ut="detaching"in t,this.Yt="unbinding"in t,this.Jt="dispose"in t,this.te="accept"in t}}Jh.none=new Jh({});const Xh={mode:"open"};var Yh,Zh;!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(Yh||(Yh={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(Zh||(Zh={}));const tc=cr("IController"),ec=cr("IHydrationContext");class sc{constructor(t,e,s){this.instruction=e,this.parent=s,this.controller=t}}function ic(t){t.dispose()}function nc(t){t.instance.created(this.kt,this)}function rc(t){t.instance.hydrating(this.kt,this)}function oc(t){t.instance.hydrated(this.kt,this)}function ac(t){return t.instance.binding(this.kt,this.$initiator,this.parent)}function hc(t){return t.instance.bound(this.kt,this.$initiator,this.parent)}function cc(t){return t.instance.attaching(this.kt,this.$initiator,this.parent)}function lc(t){return t.instance.attached(this.kt,this.$initiator)}function uc(t){return t.instance.detaching(this.kt,this.$initiator,this.parent)}function dc(t){return t.instance.unbinding(this.kt,this.$initiator,this.parent)}let pc,fc,gc;const vc=cr("IAppRoot");class mc{constructor(t,e,s,n){this.config=t,this.platform=e,this.container=s,this.ee=void 0,this.host=t.host,n.prepare(this),Zr(s,e,t.host),this.ee=(0,i.p9)(this.ie("creating"),(()=>{const e=t.component,n=s.createChild();let r;r=xo(e)?this.container.get(e):t.component;const o={hydrate:!1,projections:null},a=this.controller=qh.$el(n,r,this.host,o);return a.hE(o,null),(0,i.p9)(this.ie("hydrating"),(()=>(a.hS(null),(0,i.p9)(this.ie("hydrated"),(()=>{a.hC(),this.ee=void 0})))))}))}activate(){return(0,i.p9)(this.ee,(()=>(0,i.p9)(this.ie("activating"),(()=>(0,i.p9)(this.controller.activate(this.controller,null,void 0),(()=>this.ie("activated")))))))}deactivate(){return(0,i.p9)(this.ie("deactivating"),(()=>(0,i.p9)(this.controller.deactivate(this.controller,null),(()=>this.ie("deactivated")))))}ie(t){return(0,i.TD)(...this.container.getAll(Mr).reduce(((e,s)=>(s.slot===t&&e.push(s.run()),e)),[]))}dispose(){this.controller?.dispose()}}const wc=cr("IAurelia");class bc{get isRunning(){return this.ir}get isStarting(){return this.se}get isStopping(){return this.ne}get root(){if(null==this.re){if(null==this.next)throw vr(767);return this.next}return this.re}constructor(t=i.DI.createContainer()){if(this.container=t,this.ir=!1,this.se=!1,this.ne=!1,this.re=void 0,this.next=void 0,this.oe=void 0,this.le=void 0,t.has(wc,!0)||t.has(bc,!0))throw vr(768);fr(t,wc,new i.g("IAurelia",this)),fr(t,bc,new i.g("Aurelia",this)),fr(t,vc,this.he=new i.g("IAppRoot"))}register(...t){return this.container.register(...t),this}app(t){return this.next=new mc(t,this.ae(t.host),this.container,this.he),this}enhance(t,e){const s=t.container??this.container.createChild(),n=t.host,r=this.ae(n),o=t.component;let a;Gn(o)?(Zr(s,r,n),a=s.invoke(o)):a=o,fr(s,Wr,new i.g("IEventTarget",n)),e=e??null;const h=qh.$el(s,a,n,null,vo.create({name:To(),template:n,enhance:!0}));return(0,i.p9)(h.activate(h,e),(()=>h))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}ae(t){let e;if(this.container.has(Lr,!1))e=this.container.get(Lr);else{if(null===t.ownerDocument.defaultView)throw vr(769);e=new Cn.o(t.ownerDocument.defaultView),this.container.register(dr(Lr,e))}return e}start(t=this.next){if(null==t)throw vr(770);return Kn(this.oe)?this.oe:this.oe=(0,i.p9)(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.he.prepare(this.re=t),this.se=!0,(0,i.p9)(t.activate(),(()=>{this.ir=!0,this.se=!1,this.oe=void 0,this.ce(t,"au-started",t.host)})))))}stop(t=!1){if(Kn(this.le))return this.le;if(!0===this.ir){const e=this.re;return this.ir=!1,this.ne=!0,this.le=(0,i.p9)(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.re=void 0,this.he.dispose(),this.ne=!1,this.ce(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.ne)throw vr(771);this.container.dispose()}ce(t,e,s){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(i)}}class yc{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.ue;break;case 1:this.has=this.fe;break;default:this.has=this.de}else switch(t.length){case 0:this.has=this.me;break;case 1:this.has=this.ge;break;default:this.has=this.pe}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}pe(t){return this.chars.includes(t)}ge(t){return this.chars===t}me(t){return!1}de(t){return!this.chars.includes(t)}fe(t){return this.chars!==t}ue(t){return!0}}class kc{constructor(){this.parts=i.ow,this.ve="",this.be={},this.xe={}}get pattern(){const t=this.ve;return""===t?null:t}set pattern(t){null==t?(this.ve="",this.parts=i.ow):(this.ve=t,this.parts=this.xe[t])}append(t,e){const s=this.be;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const e=this.be;let s;void 0!==e[t]&&(s=this.xe,void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0)}}class Cc{get ve(){return this.we?this.ye[0]:null}constructor(t,...e){this.charSpec=t,this.ke=[],this.Ce=null,this.we=!1,this.ye=e}findChild(t){const e=this.ke,s=e.length;let i=null,n=0;for(;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const s=this.ye;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new Cc(t,e),this.ke.push(i),t.repeat&&i.ke.push(i)),i}findMatches(t,e){const s=[],i=this.ke,n=i.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(t))if(s.push(o),r=o.ye.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.ye[h]);else for(;h<r;++h)e.append(o.ye[h],t);return s}}class Sc{constructor(t){this.text=t;const e=this.Ae=t.length,s=this.Be=[];let i=0;for(;e>i;++i)s.push(new yc(t[i],!1,!1,!1))}eachChar(t){const e=this.Ae,s=this.Be;let i=0;for(;e>i;++i)t(s[i])}}class Ac{constructor(t){this.text="PART",this.Se=new yc(t,!0,!1,!0)}eachChar(t){t(this.Se)}}class Tc{constructor(t){this.text=t,this.Se=new yc(t,!1,!0,!1)}eachChar(t){t(this.Se)}}class $c{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const xc=cr("ISyntaxInterpreter",(t=>t.singleton(Ic)));class Ic{constructor(){this._e=new Cc(null),this.Re=[this._e]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let s,i,n,r,o,a,h,c,l=0;for(;e>l;){for(s=this._e,i=t[l],n=i.pattern,r=new $c,o=this.Te(i,r),a=o.length,h=t=>s=s.append(t,n),c=0;a>c;++c)o[c].eachChar(h);s.Ce=r,s.we=!0,++l}}interpret(t){const e=new kc,s=t.length;let i,n=this.Re,r=0;for(;r<s&&(n=this.Ie(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(Rc),n.length>0&&(n.sort(Ec),i=n[0],i.charSpec.isSymbol||e.next(i.ve),e.pattern=i.ve),e}Ie(t,e,s){const i=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}Te(t,e){const s=[],i=t.pattern,n=i.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=i.charAt(o),0!==r.length&&r.includes(h)?o!==a?(s.push(new Sc(i.slice(a,o))),++e.statics,a=o):(s.push(new Tc(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===i.slice(o,o+4)?(a=o+=4,s.push(new Ac(r)),++e.dynamics):++o;return a!==o&&(s.push(new Sc(i.slice(a,o))),++e.statics),s}}function Rc(t){return t.we}function Ec(t,e){const s=t.Ce,i=e.Ce;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}class Oc{constructor(t,e,s,i){this.rawName=t,this.rawValue=e,this.target=s,this.command=i}}const Pc=cr("IAttributePattern"),Mc=cr("IAttributeParser",(t=>t.singleton(Nc)));class Nc{constructor(t,e){this.it={},this.Ee=t;const s=this.ye={},n=e.reduce(((t,e)=>{const i=Dc(e.constructor);return i.forEach((t=>s[t.pattern]=e)),t.concat(i)}),i.ow);t.add(n)}parse(t,e){let s=this.it[t];null==s&&(s=this.it[t]=this.Ee.interpret(t));const i=s.pattern;return null==i?new Oc(t,e,t,null):this.ye[i][i](t,e,s.parts)}}function Bc(...t){return function(e){return Fc.define(t,e)}}Nc.inject=[xc,(0,i.$6)(Pc)];class jc{constructor(t){this.Type=t,this.name=void 0}register(t){lr(Pc,this.Type).register(t)}}const Lc=On("attribute-pattern"),Uc="attribute-pattern-definitions",Dc=t=>i.Protocol.annotation.get(t,Uc),Fc=Fn({name:Lc,definitionAnnotationKey:Uc,define(t,e){const s=new jc(e);return xn(Lc,s,e),Pn(e,Lc),i.Protocol.annotation.set(e,Uc,t),Mn(e,Uc),e},getPatternDefinitions:Dc});let Vc=class{"PART.PART"(t,e,s){return new Oc(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new Oc(t,e,`${s[0]}.${s[1]}`,s[2])}};Vc=An([Bc({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],Vc);let Wc=class{ref(t,e,s){return new Oc(t,e,"element","ref")}"PART.ref"(t,e,s){let i=s[0];return"view-model"===i&&(i="component"),new Oc(t,e,i,"ref")}};Wc=An([Bc({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],Wc);let _c=class{":PART"(t,e,s){return new Oc(t,e,s[0],"bind")}};_c=An([Bc({pattern:":PART",symbols:":"})],_c);let qc=class{"@PART"(t,e,s){return new Oc(t,e,s[0],"trigger")}};qc=An([Bc({pattern:"@PART",symbols:"@"})],qc);let Hc=class{"...$attrs"(t,e,s){return new Oc(t,e,"","...$attrs")}};var Kc;function zc(t){return function(e){return Yc.define(t,e)}}Hc=An([Bc({pattern:"...$attrs",symbols:""})],Hc),function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(Kc||(Kc={}));class Gc{constructor(t,e,s,i,n){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.type=n}static create(t,e){let s,n;return Qn(t)?(s=t,n={name:s}):(s=t.name,n=t),new Gc(e,(0,i.BR)(Xc(e,"name"),s),(0,i.eG)(Xc(e,"aliases"),n.aliases,e.aliases),Jc(s),(0,i.BR)(Xc(e,"type"),n.type,e.type,null))}register(t){const{Type:e,key:s,aliases:i}=this;lr(s,e).register(t),ur(s,e).register(t),gr(i,Yc,s,t)}}const Qc=On("binding-command"),Jc=t=>`${Qc}:${t}`,Xc=(t,e)=>Tn(En(e),t),Yc=Fn({name:Qc,keyFrom:Jc,define(t,e){const s=Gc.create(t,e);return xn(Qc,s,s.Type),xn(Qc,s,s),Pn(e,Qc),s.Type},getAnnotation:Xc});let Zc=class{get type(){return 0}build(t,e,s){let n=t.attr.target,r=t.attr.rawValue;return null==t.bindable?n=s.map(t.node,n)??(0,i.eV)(n):(""===r&&1===t.def.type&&(r=(0,i.eV)(n)),n=t.bindable.name),new Wa(e.parse(r,16),n,1)}};Zc=An([zc("one-time")],Zc);let tl=class{get type(){return 0}build(t,e,s){let n=t.attr.target,r=t.attr.rawValue;return null==t.bindable?n=s.map(t.node,n)??(0,i.eV)(n):(""===r&&1===t.def.type&&(r=(0,i.eV)(n)),n=t.bindable.name),new Wa(e.parse(r,16),n,2)}};tl=An([zc("to-view")],tl);let el=class{get type(){return 0}build(t,e,s){const n=t.attr;let r=n.target,o=n.rawValue;return null==t.bindable?r=s.map(t.node,r)??(0,i.eV)(r):(""===o&&1===t.def.type&&(o=(0,i.eV)(r)),r=t.bindable.name),new Wa(e.parse(o,16),r,4)}};el=An([zc("from-view")],el);let sl=class{get type(){return 0}build(t,e,s){const n=t.attr;let r=n.target,o=n.rawValue;return null==t.bindable?r=s.map(t.node,r)??(0,i.eV)(r):(""===o&&1===t.def.type&&(o=(0,i.eV)(r)),r=t.bindable.name),new Wa(e.parse(o,16),r,6)}};sl=An([zc("two-way")],sl);let il=class{get type(){return 0}build(t,e,s){const n=t.attr,r=t.bindable;let o,a,h=n.target,c=n.rawValue;return null==r?(a=s.isTwoWay(t.node,h)?6:2,h=s.map(t.node,h)??(0,i.eV)(h)):(""===c&&1===t.def.type&&(c=(0,i.eV)(h)),o=t.def.defaultBindingMode,a=8===r.mode||null==r.mode?null==o||8===o?2:o:r.mode,h=r.name),new Wa(e.parse(c,16),h,a)}};il=An([zc("bind")],il);let nl=class{get type(){return 0}static get inject(){return[Mc]}constructor(t){this.Pe=t}build(t,e){const s=null===t.bindable?(0,i.eV)(t.attr.target):t.bindable.name,n=e.parse(t.attr.rawValue,2);let r=i.ow;if(n.semiIdx>-1){const e=t.attr.rawValue.slice(n.semiIdx+1),s=e.indexOf(":");if(s>-1){const t=e.slice(0,s).trim(),i=e.slice(s+1).trim(),n=this.Pe.parse(t,i);r=[new Ka(i,n.target,n.command)]}}return new _a(n,s,r)}};nl=An([zc("for")],nl);let rl=class{get type(){return 1}build(t,e){return new Za(e.parse(t.attr.rawValue,8),t.attr.target,!0,!1)}};rl=An([zc("trigger")],rl);let ol=class{get type(){return 1}build(t,e){return new Za(e.parse(t.attr.rawValue,8),t.attr.target,!1,!0)}};ol=An([zc("capture")],ol);let al=class{get type(){return 1}build(t,e){return new ih(t.attr.target,e.parse(t.attr.rawValue,16),t.attr.target)}};al=An([zc("attr")],al);let hl=class{get type(){return 1}build(t,e){return new ih("style",e.parse(t.attr.rawValue,16),t.attr.target)}};hl=An([zc("style")],hl);let cl=class{get type(){return 1}build(t,e){return new ih("class",e.parse(t.attr.rawValue,16),t.attr.target)}};cl=An([zc("class")],cl);let ll=class{get type(){return 1}build(t,e){return new qa(e.parse(t.attr.rawValue,16),t.attr.target)}};ll=An([zc("ref")],ll);let ul=class{get type(){return 1}build(t){return new nh}};ul=An([zc("...$attrs")],ul);const dl=cr("ISVGAnalyzer",(t=>t.singleton(pl)));class pl{isStandardSvgAttribute(t,e){return!1}}const fl=cr("IAttrMapper",(t=>t.singleton(gl)));class gl{constructor(){this.fns=[],this.qe=Un(),this.Fe=Un(),this.svg=(0,i.DB)(dl),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(t){var e;let s,i,n,r;for(n in t)for(r in s=t[n],i=(e=this.qe)[n]??(e[n]=Un()),s){if(void 0!==i[r])throw vl(r,n);i[r]=s[r]}}useGlobalMapping(t){const e=this.Fe;for(const s in t){if(void 0!==e[s])throw vl(s,"*");e[s]=t[s]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((s=>s(t,e)))}map(t,e){return this.qe[t.nodeName]?.[e]??this.Fe[e]??(Hn(t,e,this.svg)?e:null)}}function vl(t,e){return vr(719,t,e)}var ml;!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(ml||(ml={}));const wl=Un();class bl{static forNs(t){return wl[t]??(wl[t]=new bl(t))}constructor(t){this.ns=t,this.type=6}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,s){null==t?e.removeAttributeNS(this.ns,s):e.setAttributeNS(this.ns,s,t)}}jo(bl);class yl{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,s){null==t?e.removeAttribute(s):e.setAttribute(s,t)}}jo(yl);const kl=new yl,Cl=(t,e)=>t.document.createComment(e),Sl=(t,e,s)=>t.insertBefore(e,s),Al=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},Tl=(t,e)=>t.content.appendChild(e),$l=(t,e)=>{const s=e.length;let i=0;for(;s>i;)t.content.appendChild(e[i]),++i},xl=(t,e)=>new t.ownerDocument.defaultView.MutationObserver(e),Il={childList:!0,subtree:!0,characterData:!0};function Rl(t,e){return t===e}class El{constructor(t,e,s,i){this.type=7,this.v=void 0,this.ov=void 0,this.He=!1,this.Oe=void 0,this.Ve=void 0,this.iO=!1,this.L=!1,this.P=t,this.oL=i,this.cf=s}getValue(){return this.iO?this.v:this.P.multiple?function(t){const e=[];if(0===t.length)return e;const s=t.length;let i,n=0;for(;s>n;)i=t[n],i.selected&&(e[e.length]=Dn.call(i,"model")?i.model:i.value),++n;return e}(this.P.options):this.P.value}setValue(t){this.ov=this.v,this.v=t,this.He=t!==this.ov,this.Ne(t instanceof Array?t:null),this.O()}O(){this.He&&(this.He=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.P,s=zn(t),i=e.matcher??Rl,n=e.options;let r=n.length;for(;r-- >0;){const e=n[r],o=Dn.call(e,"model")?e.model:e.value;e.selected=s?-1!==t.findIndex((t=>!!i(o,t))):!!i(o,t)}}syncValue(){const t=this.P,e=t.options,s=e.length,i=this.v;let n=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||Rl,a=[];for(;n<s;)r=e[n],r.selected&&a.push(Dn.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<i.length;)h=i[n],-1===a.findIndex((t=>!!o(h,t)))?i.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===i.findIndex((t=>!!o(h,t)))&&i.push(h),++n;return!1}let r,o=null;for(;n<s;){if(r=e[n],r.selected){o=Dn.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}M(){(this.Ve=xl(this.P,this.$e.bind(this))).observe(this.P,Il),this.Ne(this.v instanceof Array?this.v:null),this.iO=!0}q(){this.Ve.disconnect(),this.Oe?.unsubscribe(this),this.Ve=this.Oe=void 0,this.iO=!1}Ne(t){if(this.Oe?.unsubscribe(this),this.Oe=void 0,null!=t){if(!this.P.multiple)throw new Error("AUR0654");(this.Oe=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.We()}$e(t){this.syncOptions(),this.syncValue()&&this.We()}We(){Ol=this.ov,this.ov=this.v,this.subs.notify(this.v,Ol)}}let Ol,Pl;Bo(El),wt(El);class Ml{constructor(t){this.obj=t,this.type=6,this.v="",this.ov="",this.styles={},this.version=0,this.He=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.He=t!==this.ov,this.O()}je(t){const e=[],s=/url\([^)]+$/;let i,n,r,o,a=0,h="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),h+=t.substring(a,i),a=i+1,s.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}ze(t){let e,s;const n=[];for(s in t)if(e=t[s],null!=e)if(Qn(e)){if(s.startsWith("--")){n.push([s,e]);continue}n.push([(0,i.GL)(s),e])}else n.push(...this.Ue(e));return n}Ge(t){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...this.Ue(t[i]));return s}return i.ow}Ue(t){return Qn(t)?this.je(t):t instanceof Array?this.Ge(t):t instanceof Object?this.ze(t):i.ow}O(){if(this.He){this.He=!1;const t=this.v,e=this.styles,s=this.Ue(t);let i,n,r,o,a=this.version;this.ov=t;let h=0;const c=s.length;for(;h<c;++h)n=s[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Dn.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let s="";null!=e&&Gn(e.indexOf)&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(){this.v=this.ov=this.obj.style.cssText}}jo(Ml);class Nl{constructor(t,e,s){this.type=7,this.v="",this.ov="",this.He=!1,this.L=!1,this.P=t,this.k=e,this.cf=s}getValue(){return this.v}setValue(t){Xn(t,this.v)||(this.ov=this.v,this.v=t,this.He=!0,this.cf.readonly||this.O())}O(){this.He&&(this.He=!1,this.P[this.k]=this.v??this.cf.default,this.We())}handleEvent(){this.ov=this.v,this.v=this.P[this.k],this.ov!==this.v&&(this.He=!1,this.We())}M(){this.v=this.ov=this.P[this.k]}We(){Pl=this.ov,this.ov=this.v,this.subs.notify(this.v,Pl)}}Bo(Nl),wt(Nl);const Bl="http://www.w3.org/1999/xlink",jl="http://www.w3.org/XML/1998/namespace",Ll="http://www.w3.org/2000/xmlns/",Ul=Vn(Un(),{"xlink:actuate":["actuate",Bl],"xlink:arcrole":["arcrole",Bl],"xlink:href":["href",Bl],"xlink:role":["role",Bl],"xlink:show":["show",Bl],"xlink:title":["title",Bl],"xlink:type":["type",Bl],"xml:lang":["lang",jl],"xml:space":["space",jl],xmlns:["xmlns",Ll],"xmlns:xlink":["xlink",Ll]}),Dl=new cn;Dl.type=6;class Fl{constructor(){this.allowDirtyCheck=!0,this.Xe=Un(),this.Qe=Un(),this.Ke=Un(),this.Ye=Un(),this.Ze=(0,i.DB)(i.P2),this.p=(0,i.DB)(Lr),this.Je=(0,i.DB)(nn),this.svg=(0,i.DB)(dl);const t=["change","input"],e={events:t,default:""};this.useConfig({INPUT:{value:e,valueAsNumber:{events:t,default:0},checked:{type:_l,events:t},files:{events:t,readonly:!0}},SELECT:{value:{type:El,events:["change"],default:""}},TEXTAREA:{value:e}});const s={events:["change","input","blur","keyup","paste"],default:""},n={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:n,scrollLeft:n,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){ur(fn,Fl).register(t),lr(fn,Fl).register(t)}handles(t,e){return t instanceof this.p.Node}useConfig(t,e,s){const i=this.Xe;let n;if(Qn(t))n=i[t]??(i[t]=Un()),null==n[e]?n[e]=s:Vl(t,e);else for(const s in t){n=i[s]??(i[s]=Un());const r=t[s];for(e in r)null==n[e]?n[e]=r[e]:Vl(s,e)}}useConfigGlobal(t,e){const s=this.Qe;if("object"==typeof t)for(const e in t)null==s[e]?s[e]=t[e]:Vl("*",e);else null==s[t]?s[t]=e:Vl("*",t)}getAccessor(t,e,s){if(e in this.Ye||e in(this.Ke[t.tagName]??i.FD))return this.getObserver(t,e,s);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":return kl;default:{const s=Ul[e];return void 0!==s?bl.forNs(s[1]):Hn(t,e,this.svg)?kl:Dl}}}overrideAccessor(t,e){var s,i;let n;if(Qn(t))n=(s=this.Ke)[t]??(s[t]=Un()),n[e]=!0;else for(const e in t)for(const s of t[e])n=(i=this.Ke)[e]??(i[e]=Un()),n[s]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Ye[e]=!0}getNodeObserverConfig(t,e){return this.Xe[t.tagName]?.[e]??this.Qe[e]}getNodeObserver(t,e,s){const i=this.Xe[t.tagName]?.[e]??this.Qe[e];let n;return null!=i?(n=new(i.type??Nl)(t,e,i,s,this.Ze),n.doNotCache||(bn(t)[e]=n),n):null}getObserver(t,e,s){switch(e){case"class":return new Lo(t);case"css":case"style":return new Ml(t)}const i=this.getNodeObserver(t,e,s);if(null!=i)return i;const n=Ul[e];if(void 0!==n)return bl.forNs(n[1]);if(Hn(t,e,this.svg))return kl;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.Je.createProperty(t,e);throw vr(652,e)}return new ln(t,e)}}function Vl(t,e){throw vr(653,t,e)}function Wl(t,e){return t===e}Fl.inject=[i.P2,Lr,nn,dl];class _l{constructor(t,e,s,i){this.type=7,this.v=void 0,this.ov=void 0,this.ti=void 0,this.ei=void 0,this.L=!1,this.P=t,this.oL=i,this.cf=s}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.ii(),this.si(),this.We())}handleCollectionChange(){this.si()}handleChange(t,e){this.si()}si(){const t=this.v,e=this.P,s=Dn.call(e,"model")?e.model:e.value,i="radio"===e.type,n=void 0!==e.matcher?e.matcher:Wl;if(i)e.checked=!!n(t,s);else if(!0===t)e.checked=!0;else{let i=!1;if(zn(t))i=-1!==t.findIndex((t=>!!n(t,s)));else if(t instanceof Set){for(const e of t)if(n(e,s)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(n(t,s)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.P,s=Dn.call(e,"model")?e.model:e.value,i=e.checked,n=void 0!==e.matcher?e.matcher:Wl;if("checkbox"===e.type){if(zn(t)){const e=t.findIndex((t=>!!n(t,s)));return void(i&&-1===e?t.push(s):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===n(e,s)){r=e;break}return void(i&&r===e?t.add(s):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===n(t,s)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=s}this.v=t,this.We()}M(){this.ii()}q(){this.ti?.unsubscribe(this),this.ei?.unsubscribe(this),this.ti=this.ei=void 0}We(){ql=this.ov,this.ov=this.v,this.subs.notify(this.v,ql)}ii(){const t=this.P;(this.ei??(this.ei=t.$observers?.model??t.$observers?.value))?.subscribe(this),this.ti?.unsubscribe(this),this.ti=void 0,"checkbox"===t.type&&(this.ti=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let ql;Bo(_l),wt(_l);class Hl{bind(t,e){if(!(e instanceof $a))throw vr(9994,e);e.useTargetObserver(kl)}}mr("attr")(Hl);class Kl{bind(t,e){if(!(e instanceof Oa))throw vr(801);e.self=!0}unbind(t,e){e.self=!1}}mr("self")(Kl);class zl{constructor(){this.oL=(0,i.DB)(pn),this.ni=(0,i.DB)(fn)}bind(t,e,...s){if(!(this.ni instanceof Fl))throw vr(9993);if(0===s.length)throw vr(802);if(!(e instanceof $a&&4&e.mode))throw vr(803);const i=this.ni.getNodeObserverConfig(e.target,e.targetProperty);if(null==i)throw vr(9992,e);const n=this.ni.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:i.readonly,default:i.default,events:s}),e.useTargetObserver(n)}}mr("updateTrigger")(zl);class Gl{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.ri=!1,this.oi=0,this.li=(0,i.DB)(Pa),this.l=(0,i.DB)(_r)}attaching(t,e){let s;const n=this.$controller,r=this.oi++,o=()=>!this.ri&&this.oi===r+1;return(0,i.p9)(this.pending,(()=>{o()&&(this.pending=void 0,s=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.li.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=s&&(s.setLocation(this.l),this.pending=(0,i.p9)(s.activate(t,n,n.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e){return this.ri=!0,(0,i.p9)(this.pending,(()=>{this.ri=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller)}))}valueChanged(t,e){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;const s=this.view,n=this.$controller,r=this.oi++,o=()=>!this.ri&&this.oi===r+1;let a;return(0,i.p9)(this.pending,(()=>this.pending=(0,i.p9)(s?.deactivate(s,n),(()=>{if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.li.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=a))return a.setLocation(this.l),(0,i.p9)(a.activate(a,n,n.scope),(()=>{o()&&(this.pending=void 0)}))}))))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}An([sr],Gl.prototype,"value",void 0),An([sr({set:t=>""===t||!!t&&"false"!==t})],Gl.prototype,"cache",void 0),eo("if")(Gl);class Ql{constructor(){this.f=(0,i.DB)(Pa)}link(t,e,s,i){const n=t.children,r=n[n.length-1];if(r instanceof Gl)r.elseFactory=this.f;else{if(!(r.viewModel instanceof Gl))throw vr(810);r.viewModel.elseFactory=this.f}}}function Jl(t){t.dispose()}eo({name:"else"})(Ql);const Xl=[20,19];class Yl{constructor(t,e,s,i,n){this.views=[],this.key=null,this.hi=new Map,this.ai=new Map,this.ui=void 0,this.fi=!1,this.di=!1,this.mi=null,this.gi=void 0,this.pi=!1;const r=t.props[0].props[0];if(void 0!==r){const{to:t,value:s,command:i}=r;if("key"!==t)throw vr(776,t);if(null===i)this.key=s;else{if("bind"!==i)throw vr(775,i);this.key=e.parse(s,16)}}this.l=s,this.vi=i,this.f=n}binding(t,e){const s=this.vi.bindings,i=s.length;let n,r,o=0;for(;i>o;++o)if(n=s[o],n.target===this&&"items"===n.targetProperty){r=this.forOf=n.ast,this.bi=n;let t=r.iterable;for(;null!=t&&Xl.includes(t.$kind);)t=t.expression,this.fi=!0;this.mi=t;break}this.xi();const a=r.declaration;(this.pi=26===a.$kind||27===a.$kind)||(this.local=ot(a,this.$controller.scope,n,null))}attaching(t,e){return this.wi(),this.yi(t)}detaching(t,e){return this.xi(),this.ki(t)}unbinding(t,e){this.ai.clear(),this.hi.clear()}itemsChanged(){this.$controller.isActive&&(this.xi(),this.wi(),this.Ci(this.items,void 0))}handleCollectionChange(t,e){const s=this.$controller;if(s.isActive){if(this.fi){if(this.di)return;return this.di=!0,this.items=ot(this.forOf.iterable,s.scope,this.bi,null),void(this.di=!1)}this.wi(),this.Ci(t,e)}}Ci(t,e){const s=this.views,n=s.length,r=this.key,o=null!==r;if(o||void 0===e){const t=this.local,i=this.gi,a=i.length,h=this.forOf,c=h.declaration,l=this.bi,u=this.pi;e=mt(a);let d=0;if(0===n)for(;d<a;++d)e[d]=-2;else if(0===a)if(u)for(d=0;d<n;++d)e.deletedIndices.push(d),e.deletedItems.push(ot(c,s[d].scope,l,null));else for(d=0;d<n;++d)e.deletedIndices.push(d),e.deletedItems.push(s[d].scope.bindingContext[t]);else{const p=Array(n);if(u)for(d=0;d<n;++d)p[d]=ot(c,s[d].scope,l,null);else for(d=0;d<n;++d)p[d]=s[d].scope.bindingContext[t];let f,g,v,m,w=0;const b=n-1,y=a-1,k=new Map,C=new Map,S=this.hi,A=this.ai,T=this.$controller.scope;d=0;t:{for(;;){if(o?(f=p[d],g=i[d],v=lu(S,r,f,uu(A,f,h,T,l,t,u),l),m=lu(S,r,g,uu(A,g,h,T,l,t,u),l)):(f=v=du(p[d],d),g=m=du(i[d],d)),v!==m){S.set(f,v),S.set(g,m);break}if(++d,d>b||d>y)break t}if(b===y)for(w=y;;){if(o?(f=p[w],g=i[w],v=lu(S,r,f,uu(A,f,h,T,l,t,u),l),m=lu(S,r,g,uu(A,g,h,T,l,t,u),l)):(f=v=du(p[d],d),g=m=du(i[d],d)),v!==m){S.set(f,v),S.set(g,m);break}if(--w,d>w)break t}}const $=d,x=d;for(d=x;d<=y;++d)S.has(g=o?i[d]:du(i[d],d))?m=S.get(g):(m=o?lu(S,r,g,uu(A,g,h,T,l,t,u),l):g,S.set(g,m)),C.set(m,d);for(d=$;d<=b;++d)v=S.has(f=o?p[d]:du(p[d],d))?S.get(f):o?lu(S,r,f,s[d].scope,l):f,k.set(v,d),C.has(v)?e[C.get(v)]=d:(e.deletedIndices.push(d),e.deletedItems.push(f));for(d=x;d<=y;++d)k.has(S.get(o?i[d]:du(i[d],d)))||(e[d]=-2);k.clear(),C.clear()}}if(void 0===e){const t=(0,i.p9)(this.ki(null),(()=>this.yi(null)));Kn(t)&&t.catch(Jn)}else{const t=function(t){let e=0,s=0,i=0;const n=function(t){const e=t.slice();return e.deletedIndices=t.deletedIndices.slice(),e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t);n.deletedIndices.length>1&&n.deletedIndices.sort(Xt);const r=n.length;for(;i<r;++i){for(;n.deletedIndices[s]<=i-e;)++s,--e;-2===n[i]?++e:n[i]+=e}return n}(e);if(t.deletedIndices.length>0){const e=(0,i.p9)(this.Ai(t),(()=>this.Bi(n,t)));Kn(e)&&e.catch(Jn)}else this.Bi(n,t)}}xi(){const t=this.$controller.scope;let e,s=this.Si,i=this.fi;i&&(s=this.Si=ot(this.mi,t,this.bi,null)??null,i=this.fi=!Xn(this.items,s));const n=this.ui;this.$controller.isActive?(e=this.ui=(t=>{let e;return u(t)?e=Jt(t):p(t)?e=Se(t):d(t)&&(e=le(t)),e})(i?s:this.items),n!==e&&(n?.unsubscribe(this),e?.subscribe(this))):(n?.unsubscribe(this),this.ui=void 0)}wi(){const{items:t}=this;if(zn(t))return void(this.gi=t);const e=[];ru(t,((t,s)=>{e[s]=t})),this.gi=e}yi(t){let e,s,i,n;const{$controller:r,f:o,local:a,l:h,items:c,ai:l,bi:u,forOf:d,pi:p}=this,f=r.scope,g=nu(c),v=this.views=Array(g);if(ru(c,((c,m)=>{i=v[m]=o.create().setLocation(h),i.nodes.unlink(),n=uu(l,c,d,f,u,a,p),su(n.overrideContext,m,g),s=i.activate(t??i,r,n),Kn(s)&&(e??(e=[])).push(s)})),void 0!==e)return 1===e.length?e[0]:Promise.all(e)}ki(t){let e,s,i,n=0;const{views:r,$controller:o}=this,a=r.length;for(;a>n;++n)i=r[n],i.release(),s=i.deactivate(t??i,o),Kn(s)&&(e??(e=[])).push(s);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ai(t){let e,s,i;const{$controller:n,views:r}=this,o=t.deletedIndices,a=o.length;let h=0;for(;a>h;++h)i=r[o[h]],i.release(),s=i.deactivate(i,n),Kn(s)&&(e??(e=[])).push(s);h=0;let c=0;for(;a>h;++h)c=o[h]-h,r.splice(c,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Bi(t,e){let s,i,n,r,o=0;const{$controller:a,f:h,local:c,gi:l,l:u,views:d,pi:p,bi:f,ai:g,forOf:v}=this,m=e.length;for(;m>o;++o)-2===e[o]&&(n=h.create(),d.splice(o,0,n));if(d.length!==m)throw vr(814,[d.length,m]);const w=a.scope,b=e.length;!function(t,e){const s=t.slice(),i=e.length;let n=0,r=0;for(;n<i;)r=e[n],-2!==r&&(t[n]=s[r]),++n}(d,e);const y=function(t){const e=t.length;e>Zl&&(Zl=e,tu=new Int32Array(e),eu=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,h=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=tu[s],n=t[o],-2!==n&&n<i){eu[r]=o,tu[++s]=r;continue}for(a=0,h=s;a<h;)c=a+h>>1,n=t[tu[c]],-2!==n&&n<i?a=c+1:h=c;n=t[tu[a]],(i<n||-2===n)&&(a>0&&(eu[r]=tu[a-1]),tu[a]=r)}r=++s;const l=new Int32Array(r);for(i=tu[s-1];s-- >0;)l[s]=i,i=eu[i];for(;r-- >0;)tu[r]=0;return l}(e),k=y.length,C=v.declaration;let S,A=k-1;for(o=b-1;o>=0;--o)n=d[o],S=d[o+1],n.nodes.link(S?.nodes??u),-2===e[o]?(r=uu(g,l[o],v,w,f,c,p),su(r.overrideContext,o,b),n.setLocation(u),i=n.activate(n,a,r),Kn(i)&&(s??(s=[])).push(i)):A<0||1===k||o!==y[A]?(p?at(C,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],su(n.scope.overrideContext,o,b),n.nodes.insertBefore(n.location)):(p?at(C,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],t!==b&&su(n.scope.overrideContext,o,b),--A);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(Jl),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}Yl.inject=[Fa,Be,_r,tc,Pa],An([sr],Yl.prototype,"items",void 0),eo("repeat")(Yl);let Zl=16,tu=new Int32Array(Zl),eu=new Int32Array(Zl);const su=(t,e,s)=>{const i=0===e,n=e===s-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=n,t.$middle=!i&&!n,t.$even=r,t.$odd=!r,t.$length=s},iu=Ln.toString,nu=t=>{switch(iu.call(t)){case"[object Array]":return t.length;case"[object Map]":case"[object Set]":return t.size;case"[object Number]":return t;case"[object Null]":case"[object Undefined]":return 0;default:throw vr(778,t)}},ru=(t,e)=>{switch(iu.call(t)){case"[object Array]":return ou(t,e);case"[object Map]":return au(t,e);case"[object Set]":return hu(t,e);case"[object Number]":return cu(t,e);case"[object Null]":case"[object Undefined]":return;default:vr(777,t)}},ou=(t,e)=>{const s=t.length;let i=0;for(;i<s;++i)e(t[i],i,t)},au=(t,e)=>{let s,i=-0;for(s of t.entries())e(s,i++,t)},hu=(t,e)=>{let s,i=0;for(s of t.keys())e(s,i++,t)},cu=(t,e)=>{let s=0;for(;s<t;++s)e(s,s,t)},lu=(t,e,s,i,n)=>{let r=t.get(s);return void 0===r&&(r="string"==typeof e?s[e]:ot(e,i,n,null),t.set(s,r)),r},uu=(t,e,s,i,n,r,o)=>{let a=t.get(e);return void 0===a&&(o?at(s.declaration,a=it.fromParent(i,new st),n,e):a=it.fromParent(i,new st(r,e)),t.set(e,a)),a},du=(t,e)=>{const s=typeof t;switch(s){case"object":if(null!==t)return t;case"string":case"number":case"bigint":case"undefined":case"boolean":return`${e}${s}${t}`;default:return t}};class pu{constructor(){this.view=(0,i.DB)(Pa).create().setLocation((0,i.DB)(_r))}valueChanged(t,e){const s=this.$controller,i=this.view.bindings;let n,r=0,o=0;if(s.isActive&&null!=i)for(n=it.fromParent(s.scope,void 0===t?{}:t),o=i.length;o>r;++r)i[r].bind(n)}attaching(t,e){const{$controller:s,value:i}=this,n=it.fromParent(s.scope,void 0===i?{}:i);return this.view.activate(t,s,n)}detaching(t,e){return this.view.deactivate(t,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}An([sr],pu.prototype,"value",void 0),eo("with")(pu);let fu=class{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this.f=(0,i.DB)(Pa),this.l=(0,i.DB)(_r)}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return this.queue((()=>s.activate(t,i,i.scope))),this.queue((()=>this.swap(t,this.value))),this.promise}detaching(t,e){return this.queue((()=>this.view.deactivate(t,this.$controller))),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue((()=>this.swap(null,this.value)))}caseChanged(t){this.queue((()=>this._i(t)))}_i(t){const e=t.isMatch(this.value),s=this.activeCases,n=s.length;if(!e)return n>0&&s[0].id===t.id?this.Ri(null):void 0;if(n>0&&s[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,s=e.indexOf(t);for(let t=s,i=e.length;t<i&&o;t++){const s=e[t];r.push(s),o=s.fallThrough}}else r.push(t);return(0,i.p9)(this.Ri(null,r),(()=>(this.activeCases=r,this.Ti(null))))}swap(t,e){const s=[];let n=!1;for(const t of this.cases)if((n||t.isMatch(e))&&(s.push(t),n=t.fallThrough),s.length>0&&!n)break;const r=this.defaultCase;return 0===s.length&&void 0!==r&&s.push(r),(0,i.p9)(this.activeCases.length>0?this.Ri(t,s):void 0,(()=>{if(this.activeCases=s,0!==s.length)return this.Ti(t)}))}Ti(t){const e=this.$controller;if(!e.isActive)return;const s=this.activeCases,n=s.length;if(0===n)return;const r=e.scope;return 1===n?s[0].activate(t,r):(0,i.TD)(...s.map((e=>e.activate(t,r))))}Ri(t,e=[]){const s=this.activeCases,n=s.length;if(0!==n){if(1===n){const i=s[0];return e.includes(i)?void 0:(s.length=0,i.deactivate(t))}return(0,i.p9)((0,i.TD)(...s.reduce(((s,i)=>(e.includes(i)||s.push(i.deactivate(t)),s)),[])),(()=>{s.length=0}))}}queue(t){const e=this.promise;let s;s=this.promise=(0,i.p9)((0,i.p9)(e,t),(()=>{this.promise===s&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};An([sr],fu.prototype,"value",void 0),fu=An([eo("switch")],fu);let gu=0,vu=class{constructor(){this.id=++gu,this.fallThrough=!1,this.view=void 0,this.f=(0,i.DB)(Pa),this.Ze=(0,i.DB)(pn),this.l=(0,i.DB)(_r),this.Ii=(0,i.DB)(i.Xo).scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,s,i){const n=t.parent,r=n?.viewModel;if(!(r instanceof fu))throw vr(815);this.$switch=r,this.linkToSwitch(r)}detaching(t,e){return this.deactivate(t)}isMatch(t){this.Ii.debug("isMatch()");const e=this.value;return zn(e)?(void 0===this.ui&&(this.ui=this.Ei(e)),e.includes(t)):e===t}valueChanged(t,e){zn(t)?(this.ui?.unsubscribe(this),this.ui=this.Ei(t)):void 0!==this.ui&&this.ui.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(t??s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(t??e,this.$controller)}dispose(){this.ui?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Ei(t){const e=this.Ze.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}};An([sr],vu.prototype,"value",void 0),An([sr({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:1})],vu.prototype,"fallThrough",void 0),vu=An([eo("case")],vu);let mu=class extends vu{linkToSwitch(t){if(void 0!==t.defaultCase)throw vr(816);t.defaultCase=this}};mu=An([eo("default-case")],mu);let wu=class{constructor(){this.preSettledTask=null,this.postSettledTask=null,this.f=(0,i.DB)(Pa),this.l=(0,i.DB)(_r),this.p=(0,i.DB)(Lr),this.logger=(0,i.DB)(i.Xo).scopeTo("promise.resolve")}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,n=this.$controller;return(0,i.p9)(s.activate(t,n,this.viewScope=it.fromParent(n.scope,{})),(()=>this.swap(t)))}valueChanged(t,e){this.$controller.isActive&&this.swap(null)}swap(t){const e=this.value;if(!Kn(e))return;const s=this.p.domWriteQueue,n=this.fulfilled,r=this.rejected,o=this.pending,a=this.viewScope;let h;const c={reusable:!1},l=()=>{(0,i.TD)(h=(this.preSettledTask=s.queueTask((()=>(0,i.TD)(n?.deactivate(t),r?.deactivate(t),o?.activate(t,a))),c)).result.catch((t=>{if(!(t instanceof Sn.Nj))throw t})),e.then((l=>{if(this.value!==e)return;const u=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask((()=>(0,i.TD)(o?.deactivate(t),r?.deactivate(t),n?.activate(t,a,l))),c)).result};1===this.preSettledTask.status?h.then(u):(this.preSettledTask.cancel(),u())}),(l=>{if(this.value!==e)return;const u=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask((()=>(0,i.TD)(o?.deactivate(t),n?.deactivate(t),r?.activate(t,a,l))),c)).result};1===this.preSettledTask.status?h.then(u):(this.preSettledTask.cancel(),u())})))};1===this.postSettledTask?.status?this.postSettlePromise.then(l):(this.postSettledTask?.cancel(),l())}detaching(t,e){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller)}dispose(){this.view?.dispose(),this.view=void 0}};An([sr],wu.prototype,"value",void 0),wu=An([eo("promise")],wu);let bu=class{constructor(){this.view=void 0,this.f=(0,i.DB)(Pa),this.l=(0,i.DB)(_r)}link(t,e,s,i){Cu(t).pending=this}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}};An([sr({mode:2})],bu.prototype,"value",void 0),bu=An([eo("pending")],bu);let yu=class{constructor(){this.view=void 0,this.f=(0,i.DB)(Pa),this.l=(0,i.DB)(_r)}link(t,e,s,i){Cu(t).fulfilled=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}};An([sr({mode:4})],yu.prototype,"value",void 0),yu=An([eo("then")],yu);let ku=class{constructor(){this.view=void 0,this.f=(0,i.DB)(Pa),this.l=(0,i.DB)(_r)}link(t,e,s,i){Cu(t).rejected=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}};function Cu(t){const e=t.parent,s=e?.viewModel;if(s instanceof wu)return s;throw vr(813)}An([sr({mode:4})],ku.prototype,"value",void 0),ku=An([eo("catch")],ku);let Su=class{"promise.resolve"(t,e,s){return new Oc(t,e,"promise","bind")}};Su=An([Bc({pattern:"promise.resolve",symbols:""})],Su);let Au=class{then(t,e,s){return new Oc(t,e,"then","from-view")}};Au=An([Bc({pattern:"then",symbols:""})],Au);let Tu=class{catch(t,e,s){return new Oc(t,e,"catch","from-view")}};Tu=An([Bc({pattern:"catch",symbols:""})],Tu);class $u{constructor(){this.Pi=!1,this.Li=(0,i.DB)(Vr),this.p=(0,i.DB)(Lr)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Di():this.Pi=!0}attached(){this.Pi&&(this.Pi=!1,this.Di()),this.Li.addEventListener("focus",this),this.Li.addEventListener("blur",this)}detaching(){const t=this.Li;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Mi||(this.value=!1)}Di(){const t=this.Li,e=this.Mi,s=this.value;s&&!e?t.focus():!s&&e&&t.blur()}get Mi(){return this.Li===this.p.document.activeElement}}$u.inject=[Vr,Lr],An([sr({mode:6})],$u.prototype,"value",void 0),to("focus")($u);class xu{constructor(){this.position="beforeend",this.strict=!1;const t=(0,i.DB)(Pa),e=(0,i.DB)(_r),s=(0,i.DB)(Lr);this.p=s,this.qi=s.document.createElement("div"),(this.view=t.create()).setLocation(this.Fi=(t=>{const e=Cl(t,"au-end");return e.$start=Cl(t,"au-start"),e})(s)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)Hr.set(t,e);else{const s=t.childNodes;for(let t=0,i=s.length;t<i;++t)Hr.set(s[t],e)}}(this.view.nodes,e)}attaching(t){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const e=this.qi=this.Hi();return this.Oi(e,this.position),this.Vi(t,e)}detaching(t){return this.Ni(t,this.qi)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.Hi();if(this.qi===e)return;this.qi=e;const s=(0,i.p9)(this.Ni(null,e),(()=>(this.Oi(e,this.position),this.Vi(null,e))));Kn(s)&&s.catch(Jn)}positionChanged(){const{$controller:t,qi:e}=this;if(!t.isActive)return;const s=(0,i.p9)(this.Ni(null,e),(()=>(this.Oi(e,this.position),this.Vi(null,e))));Kn(s)&&s.catch(Jn)}Vi(t,e){const{activating:s,callbackContext:n,view:r}=this;return(0,i.p9)(s?.call(n,e,r),(()=>this.$i(t,e)))}$i(t,e){const{$controller:s,view:n}=this;return null!==t?(0,i.p9)(n.activate(t??n,s,s.scope),(()=>this.Wi(e))):(n.nodes.insertBefore(this.Fi),this.Wi(e))}Wi(t){const{activated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}Ni(t,e){const{deactivating:s,callbackContext:n,view:r}=this;return(0,i.p9)(s?.call(n,e,r),(()=>this.ji(t,e)))}ji(t,e){const{$controller:s,view:n}=this;return null!==t?(0,i.p9)(n.deactivate(t,s),(()=>this.zi(e))):(n.nodes.remove(),this.zi(e))}zi(t){const{deactivated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}Hi(){const t=this.p,e=t.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw vr(811);return e.body}if(Qn(s)){let n=e;Qn(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(n=i),s=n.querySelector(s)}if(s instanceof t.Node)return s;if(null==s){if(this.strict)throw vr(812);return e.body}return s}Oi(t,e){const s=this.Fi,i=s.$start,n=t.parentNode,r=[i,s];switch(e){case"beforeend":Al(t,null,r);break;case"afterbegin":Al(t,t.firstChild,r);break;case"beforebegin":Al(n,t,r);break;case"afterend":Al(n,t.nextSibling,r);break;default:throw new Error("Invalid portal insertion position")}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}An([sr({primary:!0})],xu.prototype,"target",void 0),An([sr()],xu.prototype,"position",void 0),An([sr({callback:"targetChanged"})],xu.prototype,"renderContext",void 0),An([sr()],xu.prototype,"strict",void 0),An([sr()],xu.prototype,"deactivating",void 0),An([sr()],xu.prototype,"activating",void 0),An([sr()],xu.prototype,"deactivated",void 0),An([sr()],xu.prototype,"activated",void 0),An([sr()],xu.prototype,"callbackContext",void 0),eo("portal")(xu);let Iu=class{constructor(){this.Ui=null,this.Gi=null,this.Qt=!1,this.expose=null,this.slotchange=null,this.Xi=new Set,this.ui=null;const t=(0,i.DB)(_r),e=(0,i.DB)(Fa),s=(0,i.DB)(ec),n=(0,i.DB)(Uh),r=e.auSlot,o=s.instruction?.projections?.[r.name],a=s.controller;let h,c;this.name=r.name,null==o?(h=n.getViewFactory(r.fallback,a.container),this.Qi=!1):(c=s.parent.controller.container.createChild({inheritParentResources:!0}),fr(c,a.definition.Type,new i.g(void 0,a.viewModel)),h=n.getViewFactory(o,c),this.Qi=!0,this.Ki=a.container.getAll(ja,!1)?.filter((t=>"*"===t.slotName||t.slotName===r.name))??i.ow),this.Yi=(this.Ki??(this.Ki=i.ow)).length>0,this.Zi=s,this.view=h.create().setLocation(this.l=t)}get nodes(){const t=[],e=this.l;let s=e.$start.nextSibling;for(;null!=s&&s!==e;)8!==s.nodeType&&t.push(s),s=s.nextSibling;return t}subscribe(t){this.Xi.add(t)}unsubscribe(t){this.Xi.delete(t)}binding(t,e){let s;this.Ui=this.$controller.scope.parent,this.Qi&&(s=this.Zi.controller.scope.parent,(this.Gi=it.fromParent(s,s.bindingContext)).overrideContext.$host=this.expose??this.Ui.bindingContext)}attaching(t,e){return(0,i.p9)(this.view.activate(t,this.$controller,this.Qi?this.Gi:this.Ui),(()=>{this.Yi&&(this.Ki.forEach((t=>t.watch(this))),this.ii(),this.Ji(),this.Qt=!0)}))}detaching(t,e){return this.Qt=!1,this.ts(),this.Ki.forEach((t=>t.unwatch(this))),this.view.deactivate(t,this.$controller)}exposeChanged(t){this.Qi&&null!=this.Gi&&(this.Gi.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}ii(){if(null!=this.ui)return;const t=this.l,e=t.parentElement;null!=e&&(this.ui=xl(e,(e=>{Eu(t,e)&&this.Ji()}))).observe(e,{childList:!0})}ts(){this.ui?.disconnect(),this.ui=null}Ji(){const t=this.nodes,e=new Set(this.Xi);let s;for(s of(this.Qt&&this.slotchange?.call(void 0,this.name,t),e))s.handleSlotChange(this,t)}};An([sr],Iu.prototype,"expose",void 0),An([sr],Iu.prototype,"slotchange",void 0),Iu=An([fo({name:"au-slot",template:null,containerless:!0})],Iu);const Ru=(t,e)=>t.compareDocumentPosition(e),Eu=(t,e)=>{for(const{addedNodes:s,removedNodes:i,nextSibling:n}of e){let e,r=0,o=s.length;for(;r<o;++r)if(e=s[r],4===Ru(t.$start,e)&&2===Ru(t,e))return!0;if(i.length>0&&null!=n&&4===Ru(t.$start,n)&&2===Ru(t,n))return!0}};var Ou;!function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(Ou||(Ou={}));class Pu{constructor(){this.scopeBehavior="auto",this.es=void 0,this.c=(0,i.DB)(i.bE),this.parent=(0,i.DB)(tc),this.host=(0,i.DB)(Vr),this.l=(0,i.DB)(_r),this.p=(0,i.DB)(Lr),this.r=(0,i.DB)(Uh),this.ss=(0,i.DB)(Fa),this.rs=(0,i.DB)((0,i.H3)(Nu)),this.ut=(0,i.DB)(oh),this.ht=(0,i.DB)(ec),this.ep=(0,i.DB)(Be),this.oL=(0,i.DB)(pn)}get composing(){return this.os}get composition(){return this.es}attaching(t,e){return this.os=(0,i.p9)(this.queue(new Bu(this.template,this.component,this.model,void 0),t),(t=>{this.rs.ls(t)&&(this.os=void 0)}))}detaching(t){const e=this.es,s=this.os;return this.rs.invalidate(),this.es=this.os=void 0,(0,i.p9)(s,(()=>e?.deactivate(t)))}propertyChanged(t){"composing"!==t&&"composition"!==t&&("model"!==t||null==this.es?this.os=(0,i.p9)(this.os,(()=>(0,i.p9)(this.queue(new Bu(this.template,this.component,this.model,t),void 0),(t=>{this.rs.ls(t)&&(this.os=void 0)})))):this.es.update(this.model))}queue(t,e){const s=this.rs,n=this.es;return(0,i.p9)(s.create(t),(t=>s.ls(t)?(0,i.p9)(this.compose(t),(r=>s.ls(t)?(0,i.p9)(r.activate(e),(()=>s.ls(t)?(this.es=r,(0,i.p9)(n?.deactivate(e),(()=>t))):(0,i.p9)(r.controller.deactivate(r.controller,this.$controller),(()=>(r.controller.dispose(),t))))):(r.controller.dispose(),t))):t))}compose(t){let e;const{cs:s,us:n,ds:r}=t.change,{c:o,host:a,$controller:h,l:c,ss:l}=this,u=this.getDef(n),d=o.createChild();let p;null!==u?(p=this.p.document.createElement(u.name),null==c?a.appendChild(p):c.parentNode.insertBefore(p,c),e=this.gs(d,n,p)):(p=null==c?a:c,e=this.gs(d,n,p));const f=()=>{if(null!==u){const s=l.captures??i.ow,n=u.capture,[r,o]=s.reduce(((t,e)=>(t[!(e.target in u.bindables)&&(!0===n||Gn(n)&&n(e.target))?0:1].push(e),t)),[[],[]]),a=u.containerless?zr(p):null,c=qh.$el(d,e,p,{projections:l.projections,captures:r},u,a),f=new sc(h,{projections:null,captures:o},this.ht.parent),g=()=>{if(null==a)p.remove();else{let t=a.$start.nextSibling,e=null;for(;null!==t&&t!==a;)e=t.nextSibling,t.remove(),t=e;a.$start?.remove(),a.remove()}};return La.create(f,p,u,this.r,this.ut,this.p,this.ep,this.oL).forEach((t=>c.addBinding(t))),new Uu(c,(t=>c.activate(t??c,h,h.scope.parent)),(t=>(0,i.p9)(c.deactivate(t??c,h),g)),(t=>e.activate?.(t)),t)}{const i=vo.create({name:Po.generateName(),template:s}),n=this.r.getViewFactory(i,d),r=qh.$view(n,h),o="auto"===this.scopeBehavior?it.fromParent(this.parent.scope,e):it.create(e);return Gr(p)?r.setLocation(p):r.setHost(p),new Uu(r,(t=>r.activate(t??r,h,o)),(t=>r.deactivate(t??r,h)),(t=>e.activate?.(t)),t)}};return"activate"in e?(0,i.p9)(e.activate(r),(()=>f())):f()}gs(t,e,s){if(null==e)return new Mu;if("object"==typeof e)return e;const n=this.p,r=Gr(s);Zr(t,n,r?null:s),fr(t,_r,new i.g("IRenderLocation",r?s:null));const o=t.invoke(e);return fr(t,e,new i.g("au-compose.component",o)),o}getDef(t){const e=Gn(t)?t:t?.constructor;return Po.isType(e)?Po.getDefinition(e):null}}An([sr],Pu.prototype,"template",void 0),An([sr],Pu.prototype,"component",void 0),An([sr],Pu.prototype,"model",void 0),An([sr({set:t=>{if("scoped"===t||"auto"===t)return t;throw vr(805,t)}})],Pu.prototype,"scopeBehavior",void 0),An([sr({mode:4})],Pu.prototype,"composing",null),An([sr({mode:4})],Pu.prototype,"composition",null),fo({name:"au-compose",capture:!0})(Pu);class Mu{}class Nu{constructor(){this.id=0}ls(t){return t.id===this.id}create(t){return(0,i.p9)(t.load(),(t=>new Lu(++this.id,t)))}invalidate(){this.id++}}class Bu{constructor(t,e,s,i){this.cs=t,this.us=e,this.ds=s,this.ps=i}load(){return Kn(this.cs)||Kn(this.us)?Promise.all([this.cs,this.us]).then((([t,e])=>new ju(t,e,this.ds,this.ps))):new ju(this.cs,this.us,this.ds,this.ps)}}class ju{constructor(t,e,s,i){this.cs=t,this.us=e,this.ds=s,this.ps=i}}class Lu{constructor(t,e){this.id=t,this.change=e}}class Uu{constructor(t,e,s,i,n){this.controller=t,this.start=e,this.stop=s,this.update=i,this.context=n,this.state=0}activate(t){if(0!==this.state)throw vr(807,this);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw vr(808);default:this.state=-1}}}const Du=cr("ISanitizer",(t=>t.singleton(class{sanitize(){throw vr(99,"sanitize")}})));class Fu{constructor(){this.vs=(0,i.DB)(Du)}toView(t){return null==t?null:this.vs.sanitize(t)}}Wo("sanitize")(Fu);const Vu=cr("ITemplateElementFactory",(t=>t.singleton(_u))),Wu={};class _u{constructor(){this.p=(0,i.DB)(Lr),this.cs=this.t()}t(){return this.p.document.createElement("template")}createTemplate(t){if(Qn(t)){let e=Wu[t];if(void 0===e){const s=this.cs;s.innerHTML=t;const i=s.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.cs=this.t(),e=s):(s.content.removeChild(i),e=i),Wu[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.t();return e.content.appendChild(t),e}return t.parentNode?.removeChild(t),t.cloneNode(!0)}}const qu="TEMPLATE",Hu="au-start",Ku="au-end",zu=t=>"au*"===t.nodeValue;class Gu{constructor(t,e,s,n,r,o){this.hasSlot=!1,this.Fs=Un();const a=null!==n;this.c=e,this.root=null===r?this:r,this.def=t,this.ci=s,this.parent=n,this.bs=a?n.bs:e.get(Vu),this.Pe=a?n.Pe:e.get(Mc),this.ep=a?n.ep:e.get(Be),this.m=a?n.m:e.get(fl),this.Ii=a?n.Ii:e.get(i.Xo),this.p=a?n.p:e.get(Lr),this.localEls=a?n.localEls:new Set,this.rows=o??[]}qs(t){var e;((e=this.root).deps??(e.deps=[])).push(t),this.root.c.register(t)}Ms(t){return((t,e)=>t.document.createTextNode(e))(this.p,t)}Ls(t){return Cl(this.p,t)}wt(){return this.Ls("au*")}h(t){const e=((t,e)=>t.document.createElement(e))(this.p,t);return"template"===t&&this.p.document.adoptNode(e.content),e}t(){return this.h("template")}ks(t){return this.c.find(Po,t)}As(t){return this.c.find(co,t)}Ps(t){return new Gu(this.def,this.c,this.ci,this,this.root,t)}Cs(t){if(this.root!==this)return this.root.Cs(t);const e=t.command;if(null===e)return null;let s=this.Fs[e];if(void 0===s){if(s=this.c.create(Yc,e),null===s)throw vr(713,e);this.Fs[e]=s}return s}}const Qu=t=>{const e=t.length;let s=0,i=0;for(;e>i;){if(s=t.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(i+1))return!1}++i}return!1},Ju=()=>{Zu.node=Zu.attr=Zu.bindable=Zu.def=null},Xu={projections:null},Yu={name:"unnamed"},Zu={node:null,attr:null,bindable:null,def:null},td=Vn(Un(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),ed={checkbox:1,radio:1},sd=new WeakMap;class id{static from(t,e){let s=sd.get(t);if(null==s){const i=t.bindables,n=Un(),r=e?void 0===t.defaultBindingMode?8:t.defaultBindingMode:8;let o,a,h,c,l=!1;for(a in i){if(o=i[a],c=o.attribute,!0===o.primary){if(l)throw vr(714,t);l=!0,h=o}else l||null!=h||(h=o);n[c]=or.create(a,t.Type,o)}null==o&&e&&(h=n.value=or.create("value",t.Type,{mode:r})),sd.set(t,s=new id(n,i,h))}return s}constructor(t,e,s){this.attrs=t,this.bindables=e,this.primary=s}}const nd=Fn(["name","attribute","mode"]),rd="as-custom-element",od=(t,e,s)=>{const i=e.getAttribute(rd);if(null===i||""===i)throw vr(715,t);if(s.has(i))throw vr(716,i,t);return s.add(i),e.removeAttribute(rd),i},ad=t=>{switch(t.getAttribute("mode")){case"oneTime":return 1;case"toView":return 2;case"fromView":return 4;case"twoWay":return 6;default:return 8}},hd=cr("ITemplateCompilerHooks"),cd=new WeakMap,ld=On("compiler-hooks");Fn({name:ld,define(t){let e=cd.get(t);return void 0===e&&(cd.set(t,e=new ud(t)),xn(ld,e,t),Pn(t,ld)),t}});class ud{get name(){return""}constructor(t){this.Type=t}register(t){t.register(lr(hd,this.Type))}}const dd="default",pd="au-slot";class fd{constructor(){this.el=(0,i.DB)(Vr),this.p=(0,i.DB)(Lr),this.Hs=!1,this.U=null,this.$val="",this.$prio="",this.update=()=>{this.U=null,Boolean(this.value)!==this.Os&&(this.Os===this.Vs?(this.Os=!this.Vs,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Os=this.Vs,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))};const t=(0,i.DB)(Fa);this.Os=this.Vs="hide"!==t.alias}binding(){this.Hs=!0,this.update()}detaching(){this.Hs=!1,this.U?.cancel(),this.U=null}valueChanged(){this.Hs&&null===this.U&&(this.U=this.p.domWriteQueue.queueTask(this.update))}}An([sr],fd.prototype,"value",void 0),function(...t){return function(e){const s=En("aliases"),i=Tn(s,e);void 0===i?xn(s,t,e):i.push(...t)}}("hide")(fd),to("show")(fd);const gd=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){t.register(lr(this,this),ur(this,oh))}compile(t,e,s){const n=vo.getOrCreate(t);if(null===n.template||void 0===n.template)return n;if(!1===n.needsCompile)return n;s??(s=Xu);const r=new Gu(t,e,s,null,null,void 0),o=Qn(n.template)||!t.enhance?r.bs.createTemplate(n.template):n.template,a=o.nodeName===qu&&null!=o.content,h=a?o.content:o,c=e.get((t=>{function e(t,s,n){i.DI.inject(e)(t,s,n)}return e.$isResolver=!0,e.resolve=function(e,s){return s.root===s?s.getAll(t,!1):s.has(t,!1)?s.getAll(t,!1).concat(s.root.getAll(t,!1)):s.root.getAll(t,!1)},e})(hd)),l=c.length;let u=0;if(l>0)for(;l>u;)c[u].compiling?.(o),++u;if(o.hasAttribute(rd))throw vr(701,n);return this.xs(h,r),this.ws(h,r),vo.create({...t,name:t.name||To(),dependencies:(t.dependencies??i.ow).concat(r.deps??i.ow),instructions:r.rows,surrogates:a?this.ys(o,r):i.ow,template:o,hasSlots:r.hasSlot,needsCompile:!1})}compileSpread(t,e,s,n,r){const o=new Gu(t,s,Xu,null,null,void 0),a=[],h=r??o.ks(n.nodeName.toLowerCase()),c=null!==h,l=o.ep,u=e.length;let d,p,f,g,v,m,w,b,y,k,C=0,S=null,A=null;for(;u>C;++C)if(d=e[C],y=d.target,k=d.rawValue,A=o.Cs(d),null!==A&&(1&A.type)>0)Zu.node=n,Zu.attr=d,Zu.bindable=null,Zu.def=null,a.push(A.build(Zu,o.ep,o.m));else if(S=o.As(y),null===S)if(null===A){if(w=l.parse(k,1),c&&(g=id.from(h,!1),v=g.attrs[y],void 0!==v)){w=l.parse(k,1),a.push(new rh(null==w?new Ha(k,v.name):new Va(w,v.name)));continue}if(null!=w)a.push(new Va(w,o.m.map(n,y)??(0,i.eV)(y)));else switch(y){case"class":a.push(new eh(k));break;case"style":a.push(new sh(k));break;default:a.push(new th(k,y))}}else{if(c&&(g=id.from(h,!1),v=g.attrs[y],void 0!==v)){Zu.node=n,Zu.attr=d,Zu.bindable=v,Zu.def=h,a.push(new rh(A.build(Zu,o.ep,o.m)));continue}Zu.node=n,Zu.attr=d,Zu.bindable=null,Zu.def=null,a.push(A.build(Zu,o.ep,o.m))}else{if(S.isTemplateController)throw vr(9998,y);g=id.from(S,!0),b=!1===S.noMultiBindings&&null===A&&Qu(k),b?f=this.Bs(n,k,S,o):(m=g.primary,null===A?(w=l.parse(k,1),f=[null===w?new Ha(k,m.name):new Va(w,m.name)]):(Zu.node=n,Zu.attr=d,Zu.bindable=m,Zu.def=S,f=[A.build(Zu,o.ep,o.m)])),(p??(p=[])).push(new Ga(this.resolveResources?S:S.name,null!=S.aliases&&S.aliases.includes(y)?y:void 0,f))}return Ju(),null!=p?p.concat(a):a}ys(t,e){const s=[],n=t.attributes,r=e.ep;let o,a,h,c,l,u,d,p,f,g,v,m,w=n.length,b=0,y=null,k=null;for(;w>b;++b){if(o=n[b],a=o.name,h=o.value,c=e.Pe.parse(a,h),v=c.target,m=c.rawValue,td[v])throw vr(702,a);if(k=e.Cs(c),null!==k&&(1&k.type)>0)Zu.node=t,Zu.attr=c,Zu.bindable=null,Zu.def=null,s.push(k.build(Zu,e.ep,e.m));else if(y=e.As(v),null===y)if(null===k)if(f=r.parse(m,1),null!=f)t.removeAttribute(a),--b,--w,s.push(new Va(f,e.m.map(t,v)??(0,i.eV)(v)));else switch(a){case"class":s.push(new eh(m));break;case"style":s.push(new sh(m));break;default:s.push(new th(m,a))}else Zu.node=t,Zu.attr=c,Zu.bindable=null,Zu.def=null,s.push(k.build(Zu,e.ep,e.m));else{if(y.isTemplateController)throw vr(703,v);d=id.from(y,!0),g=!1===y.noMultiBindings&&null===k&&Qu(m),g?u=this.Bs(t,m,y,e):(p=d.primary,null===k?(f=r.parse(m,1),u=[null===f?new Ha(m,p.name):new Va(f,p.name)]):(Zu.node=t,Zu.attr=c,Zu.bindable=p,Zu.def=y,u=[k.build(Zu,e.ep,e.m)])),t.removeAttribute(a),--b,--w,(l??(l=[])).push(new Ga(this.resolveResources?y:y.name,null!=y.aliases&&y.aliases.includes(v)?v:void 0,u))}}return Ju(),null!=l?l.concat(s):s}ws(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.Ss(t,e):this._s(t,e);case 3:return this.Rs(t,e);case 11:{let s=t.firstChild;for(;null!==s;)s=this.ws(s,e);break}}return t.nextSibling}Ss(t,e){const s=t.attributes,n=s.length,r=[],o=e.ep;let a,h,c,l,u,d,p,f,g=!1,v=0;for(;n>v;++v)if(a=s[v],c=a.name,l=a.value,"to-binding-context"!==c)if(h=e.Pe.parse(c,l),d=h.target,p=h.rawValue,u=e.Cs(h),null===u)f=o.parse(p,1),r.push(new Xa(null===f?new W(p):f,(0,i.eV)(d)));else{if("bind"!==h.command)throw vr(704,h);r.push(new Xa(o.parse(p,16),(0,i.eV)(d)))}else g=!0;return e.rows.push([new Ja(r,g)]),this.Ts(t,e).nextSibling}_s(t,e){var s,n,r,o;const a=t.nextSibling,h=(t.getAttribute("as-element")??t.nodeName).toLowerCase(),c=e.ks(h),l=null!==c,u=l&&null!=c.shadowOptions,d=c?.capture,p=null!=d&&"boolean"!=typeof d,f=d?[]:i.ow,g=e.ep,v=this.debug?i.ZT:()=>{t.removeAttribute(b),--U,--L};let m,w,b,y,k,C,S,A,T,$,x,I,R,E,O,P,M,N,B,j=t.attributes,L=j.length,U=0,D=null,F=!1,V=null,W=!0,_=!1,q=!1,H=!1;if("slot"===h){if(null==e.root.def.shadowOptions)throw vr(717,e.root.def.name);e.root.hasSlot=!0}for(l&&(W=c.processContent?.call(c.Type,t,e.p),j=t.attributes,L=j.length);L>U;++U){switch(w=j[U],b=w.name,y=w.value,b){case"as-element":case"containerless":v(),_||(_="containerless"===b);continue}if(k=e.Pe.parse(b,y),V=e.Cs(k),M=k.target,N=k.rawValue,d&&(!p||p&&d(M))){if(null!=V&&1&V.type){v(),f.push(k);continue}if(q=M!==pd&&"slot"!==M,q&&(O=id.from(c,!1),null==O.attrs[M]&&!e.As(M)?.isTemplateController)){v(),f.push(k);continue}}if(null!==V&&1&V.type)Zu.node=t,Zu.attr=k,Zu.bindable=null,Zu.def=null,(C??(C=[])).push(V.build(Zu,e.ep,e.m)),v();else if(D=e.As(M),null===D)if(null!==V)v(),l&&(O=id.from(c,!1),A=O.attrs[M],void 0!==A)?(Zu.node=t,Zu.attr=k,Zu.bindable=A,Zu.def=c,(S??(S=[])).push(V.build(Zu,e.ep,e.m))):(Zu.node=t,Zu.attr=k,Zu.bindable=null,Zu.def=null,(C??(C=[])).push(V.build(Zu,e.ep,e.m)));else{if(l&&(O=id.from(c,!1),A=O.attrs[M],void 0!==A)){R=g.parse(N,1),(S??(S=[])).push(null==R?new Ha(N,A.name):new Va(R,A.name)),v();continue}R=g.parse(N,1),null!=R&&(v(),(C??(C=[])).push(new Va(R,e.m.map(t,M)??(0,i.eV)(M))))}else O=id.from(D,!0),F=!1===D.noMultiBindings&&null===V&&Qu(N),F?$=this.Bs(t,N,D,e):(P=O.primary,null===V?(R=g.parse(N,1),$=[null===R?new Ha(N,P.name):new Va(R,P.name)]):(Zu.node=t,Zu.attr=k,Zu.bindable=P,Zu.def=D,$=[V.build(Zu,e.ep,e.m)])),v(),D.isTemplateController?(x??(x=[])).push(new Qa(Yu,this.resolveResources?D:D.name,void 0,$)):(T??(T=[])).push(new Ga(this.resolveResources?D:D.name,null!=D.aliases&&D.aliases.includes(M)?M:void 0,$))}if(Ju(),this.Is(t,C)&&null!=C&&C.length>1&&this.Es(t,C),l&&(E=new za(this.resolveResources?c:c.name,void 0,S??i.ow,null,_,f),h===pd)){const s=t.getAttribute("name")||dd,i=e.t(),n=e.Ps();let r=t.firstChild,o=0;for(;null!==r;)1===r.nodeType&&r.hasAttribute(pd)?t.removeChild(r):(Tl(i,r),o++),r=t.firstChild;o>0&&this.ws(i.content,n),E.auSlot={name:s,fallback:vo.create({name:To(),template:i,instructions:n.rows,needsCompile:!1})}}if(null==C&&null==E&&null==T||(m=i.ow.concat(E??i.ow,T??i.ow,C??i.ow),H=!0),null!=x){let i;L=x.length-1,U=L,I=x[U],zu(t)?(i=e.t(),$l(i,[e.wt(),e.Ls(Hu),e.Ls(Ku)])):(this.Ds(t,e),"TEMPLATE"===t.nodeName?i=t:(i=e.t(),Tl(i,t)));const r=i,o=e.Ps(null==m?[]:[m]);let a,d,p,f,g,v,w,b,y=0,k=0,C=t.firstChild,S=!1;if(!1!==W)for(;null!==C;)if(d=1===C.nodeType?C.getAttribute(pd):null,null!==d&&C.removeAttribute(pd),l)a=C.nextSibling,u||(S=3===C.nodeType&&""===C.textContent.trim(),S||((s=f??(f={}))[n=d||dd]??(s[n]=[])).push(C),t.removeChild(C)),C=a;else{if(null!==d)throw d=d||dd,vr(706,d,h);C=C.nextSibling}if(null!=f){for(d in p={},f){for(i=e.t(),g=f[d],y=0,k=g.length;k>y;++y)v=g[y],"TEMPLATE"===v.nodeName?v.attributes.length>0?Tl(i,v):Tl(i,v.content):Tl(i,v);b=e.Ps(),this.ws(i.content,b),p[d]=vo.create({name:To(),template:i,instructions:b.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}E.projections=p}if(H&&(l&&(_||c.containerless)?this.Ds(t,e):this.Ts(t,e)),B=!l||!c.containerless&&!_&&!1!==W,B)if(t.nodeName===qu)this.ws(t.content,o);else for(C=t.firstChild;null!==C;)C=this.ws(C,o);for(I.def=vo.create({name:To(),template:r,instructions:o.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});U-- >0;)I=x[U],i=e.t(),w=e.wt(),$l(i,[w,e.Ls(Hu),e.Ls(Ku)]),I.def=vo.create({name:To(),template:i,needsCompile:!1,instructions:[[x[U+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([I])}else{null!=m&&e.rows.push(m);let s,i,n,a,d,p,f,g=t.firstChild,v=null,w=!1,b=0,y=0;if(!1!==W)for(;null!==g;)if(i=1===g.nodeType?g.getAttribute(pd):null,null!==i&&g.removeAttribute(pd),l)s=g.nextSibling,u||(w=3===g.nodeType&&""===g.textContent.trim(),w||((r=n??(n={}))[o=i||dd]??(r[o]=[])).push(g),t.removeChild(g)),g=s;else{if(null!==i)throw i=i||dd,vr(706,i,h);g=g.nextSibling}if(null!=n){for(i in v={},n){for(p=e.t(),a=n[i],b=0,y=a.length;y>b;++b)d=a[b],d.nodeName===qu?d.attributes.length>0?Tl(p,d):Tl(p,d.content):Tl(p,d);f=e.Ps(),this.ws(p.content,f),v[i]=vo.create({name:To(),template:p,instructions:f.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}E.projections=v}if(H&&(l&&(_||c.containerless)?this.Ds(t,e):this.Ts(t,e)),B=!l||!c.containerless&&!_&&!1!==W,B&&t.childNodes.length>0)for(g=t.firstChild;null!==g;)g=this.ws(g,e)}return a}Rs(t,e){const s=t.parentNode,i=e.ep.parse(t.textContent,1),n=t.nextSibling;let r,o,a,h,c;if(null!==i){for(({parts:r,expressions:o}=i),(c=r[0])&&Sl(s,e.Ms(c),t),a=0,h=o.length;h>a;++a)Al(s,t,[e.wt(),e.Ms(" ")]),(c=r[a+1])&&Sl(s,e.Ms(c),t),e.rows.push([new Ya(o[a],e.root.def.isStrictBinding)]);s.removeChild(t)}return n}Bs(t,e,s,i){const n=id.from(s,!0),r=e.length,o=[];let a,h,c,l,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){h=e.slice(p,g);break}if(void 0===h&&(h=e.slice(p)),l=i.Pe.parse(a,h),u=i.Cs(l),d=n.attrs[l.target],null==d)throw vr(707,l.target,s.name);for(null===u?(c=i.ep.parse(h,1),o.push(null===c?new Ha(h,d.name):new Va(c,d.name))):(Zu.node=t,Zu.attr=l,Zu.bindable=d,Zu.def=s,o.push(u.build(Zu,i.ep,i.m)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,h=void 0}return Ju(),o}xs(t,e){const s=e.root.def.name,n=t,r=(0,i.qo)(n.querySelectorAll("template[as-custom-element]")),o=r.length;if(0===o)return;if(o===n.childElementCount)throw vr(708,s);const a=new Set,h=[];for(const t of r){if(t.parentNode!==n)throw vr(709,s);const r=od(s,t,a),o=t.content,c=(0,i.qo)(o.querySelectorAll("bindable")),l=new Set,u=new Set,d=c.reduce(((t,e)=>{if(e.parentNode!==o)throw vr(710,r);const s=e.getAttribute("name");if(null===s)throw vr(711,e,r);const n=e.getAttribute("attribute");if(null!==n&&u.has(n)||l.has(s))throw vr(712,l,n);null!==n&&u.add(n),l.add(s);const a=(0,i.qo)(e.attributes).filter((t=>!nd.includes(t.name)));return a.length,e.remove(),t[s]={attribute:n??void 0,mode:ad(e)},t}),{});class p{}Yn(p,"name",{value:r}),h.push(p),e.qs($o({name:r,template:t,bindables:d},p)),n.removeChild(t)}const c=[...e.def.dependencies??i.ow,...h];for(const t of h)Eo(t).dependencies.push(c.filter((e=>e!==t)))}Is(t,e){const s=t.nodeName;return"INPUT"===s&&1===ed[t.type]||"SELECT"===s&&(t.hasAttribute("multiple")||e?.some((t=>"rg"===t.type&&"multiple"===t.to)))}Es(t,e){switch(t.nodeName){case"INPUT":{const t=e;let s,i,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":s=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==s&&i<s&&([t[s],t[i]]=[t[i],t[s]]);break}case"SELECT":{const t=e;let s,i=0,n=0,r=0;for(let e=0;e<t.length&&r<2;++e){switch(s=t[e],s.to){case"multiple":n=e,r++;break;case"value":i=e,r++}2===r&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}}}Ts(t,e){return Sl(t.parentNode,e.Ls("au*"),t),t}Ds(t,e){if(zu(t))return t;const s=t.parentNode,i=e.wt();return Al(s,t,[i,e.Ls(Hu),e.Ls(Ku)]),s.removeChild(t),i}},on,Fl],vd=[Wc,Vc,Hc],md=[il,Zc,el,tl,sl,nl,ll,rl,ol,cl,hl,al,ul],wd=[Rr,Ar,Tr,$r,Er,Pr,xr,Fu,Gl,Ql,Yl,pu,fu,vu,mu,wu,bu,yu,ku,Su,Au,Tu,Hl,Kl,zl,Pu,xu,$u,fd,Iu],bd=[wh,bh,vh,mh,uh,dh,ph,fh,gh,kh,$h,Ch,Sh,Ah,Th,yh,xh],yd=kd(i.ZT);function kd(t){return{optionsProvider:t,register(e){const s={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return t(s),e.register(dr(ft,s.coercingOptions),...gd,...wd,...vd,...md,...bd)},customize:e=>kd(e??t)}}}},i={};function n(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,exports:{}};return s[t](r,r.exports,n),r.exports}n.m=s,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,s)=>(n.f[s](t,e),e)),[])),n.u=t=>t+"."+{454:"7b487b173e9643dc5bb0",461:"3de9d9f9d1069b55cf80",877:"51bc4fed58f3d653af1f"}[t]+".bundle.js",n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="au2-ex1:",n.l=(s,i,r,o)=>{if(t[s])t[s].push(i);else{var a,h;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==e+r){a=u;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+r),a.src=s),t[s]=[i];var d=(e,i)=>{a.onerror=a.onload=null,clearTimeout(p);var n=t[s];if(delete t[s],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((t=>t(i))),e)return e(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),h&&document.head.appendChild(a)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/au2-ex1",(()=>{n.b=document.baseURI||self.location.href;var t={497:0};n.f.j=(e,s)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)s.push(i[2]);else{var r=new Promise(((s,n)=>i=t[e]=[s,n]));s.push(i[2]=r);var o=n.p+n.u(e),a=new Error;n.l(o,(s=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var r=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,i[1](a)}}),"chunk-"+e,e)}};var e=(e,s)=>{var i,r,[o,a,h]=s,c=0;if(o.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);h&&h(n)}for(e&&e(s);c<o.length;c++)r=o[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0},s=self.webpackChunkau2_ex1=self.webpackChunkau2_ex1||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),n.nc=void 0,(()=>{var t={};n.r(t),n.d(t,{default:()=>Km,dependencies:()=>zm,name:()=>qm,register:()=>Qm,template:()=>Hm});var e={};n.r(e),n.d(e,{default:()=>ew,dependencies:()=>sw,name:()=>Zm,register:()=>nw,template:()=>tw});var s=n(344),i=n(134),r=n(932);class o{constructor(t,e,s){this.name=t,this.isOptional=e,this.isStar=s}}class a{constructor(t,e,s){this.path=t,this.caseSensitive=e,this.handler=s}}class h{get residualEndpoint(){return this.t}set residualEndpoint(t){if(null!==this.t)throw new Error("Residual endpoint is already set");this.t=t}constructor(t,e){this.route=t,this.params=e,this.t=null}equalsOrResidual(t){return null!=t&&this===t||this.t===t}}class c{constructor(t,e){this.endpoint=t;const s=Object.create(null);for(const t in e){const i=e[t];s[t]=null!=i?decodeURIComponent(i):i}this.params=Object.freeze(s)}}class l{constructor(t,e,s,i){this.chars=t,this.states=e,this.skippedStates=s,this.result=i,this.head=e[e.length-1],this.endpoint=this.head?.endpoint}advance(t){const{chars:e,states:s,skippedStates:i,result:n}=this;let r=null,o=0;const a=s[s.length-1];function h(c,u){if(c.isMatch(t)&&(1==++o?r=c:n.add(new l(e.concat(t),s.concat(c),null===u?i:i.concat(u),n))),null===a.segment&&c.isOptional&&null!==c.nextStates){if(c.nextStates.length>1)throw y(`${c.nextStates.length} nextStates`);const t=c.nextStates[0];if(!t.isSeparator)throw y("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)h(e,c)}}if(a.isDynamic&&h(a,null),null!==a.nextStates)for(const t of a.nextStates)h(t,null);null!==r&&(s.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&n.remove(this)}finalize(){!function t(e,s){const i=s.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const s of i)if(s.isOptional&&null!==s.endpoint){if(e.push(s),null!==s.nextStates)for(const i of s.nextStates)t(e,i);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:s}=this,i={};for(const t of s.params)i[t.name]=void 0;for(let s=0,n=t.length;s<n;++s){const n=t[s];if(n.isDynamic){const t=n.segment.name;void 0===i[t]?i[t]=e[s]:i[t]+=e[s]}}return i}compareTo(t){const e=this.states,s=t.states;for(let t=0,i=0,n=Math.max(e.length,s.length);t<n;++t){let n=e[t];if(void 0===n)return 1;let r=s[i];if(void 0===r)return-1;let o=n.segment,a=r.segment;if(null===o){if(null===a){++i;continue}if(void 0===(n=e[++t]))return 1;o=n.segment}else if(null===a){if(void 0===(r=s[++i]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,n=t.skippedStates,r=i.length,o=n.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=i[t],s=n[t];if(e.length<s.length)return 1;if(e.length>s.length)return-1}return 0}}function u(t){return null!==t.head.endpoint}function d(t,e){return t.compareTo(e)}class p{get isEmpty(){return 0===this.candidates.length}constructor(t){this.candidates=[],this.candidates=[new l([""],[t],[],this)]}getSolution(){const t=this.candidates.filter(u);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(d),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const s of e)s.advance(t)}}const f="$$residue";class g{constructor(t,e,s){switch(this.prevState=t,this.segment=e,this.value=s,this.nextStates=null,this.endpoint=null,e?.kind){case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 2:case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 4:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let s,i=this.nextStates;return null===i?(s=void 0,i=this.nextStates=[]):s=null===t?i.find((t=>t.value===e)):i.find((e=>e.segment?.equals(t))),void 0===s&&i.push(s=new g(this,t,e)),s}setEndpoint(t){if(null!==this.endpoint)throw y(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(e?.kind){case 3:return!this.value.includes(t);case 2:case 1:return!0;case 4:case void 0:return this.value.includes(t)}}}function v(t){return t.length>0}class m{get kind(){return 4}constructor(t,e){this.value=t,this.caseSensitive=e}appendTo(t){const{value:e,value:{length:s}}=this;if(this.caseSensitive)for(let i=0;i<s;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<s;++i){const s=e.charAt(i);t=t.append(this,s.toUpperCase()+s.toLowerCase())}return t}equals(t){return 4===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class w{get kind(){return 3}constructor(t,e){this.name=t,this.optional=e}appendTo(t){return t.append(this,"/")}equals(t){return 3===t.kind&&t.optional===this.optional&&t.name===this.name}}class b{constructor(t,e){this.name=t,this.kind=e}appendTo(t){return t.append(this,"")}equals(t){return(2===t.kind||1===t.kind)&&t.name===this.name}}const y=t=>new Error(t);class k{constructor(t,e,s,i={}){this.router=t,this.name=e,this.connectedCE=s,this.options=i,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(t=1/0){return this.getContent()}getNavigationContent(t){return t instanceof lt&&(t=t.navigation),t instanceof K?this.contents.find((e=>e.navigation===t))??null:null}get activeContent(){return this.getNextContent()??this.getContent()}get connectedScope(){return this.activeContent?.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){return this.connectedCE?.$controller??null}get isViewport(){return this instanceof J}get isViewportScope(){return this instanceof _}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(t,e){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(t,e){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(t){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(t,e){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(t,e=null){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(t){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(t,e){return this.contents.forEach((t=>t.delete())),!0}canUnload(t,e){return!0}canLoad(t,e){return!0}unload(t,e){}load(t,e){}}class C{constructor(t,e,s,i,n=Y.create(""),r=K.create({instruction:"",fullStateInstruction:""})){this.router=t,this.endpoint=e,this.instruction=n,this.navigation=r,this.completed=!1,this.connectedScope=new it(t,i,s,this),null!==this.router.rootScope&&(this.endpoint.connectedScope?.parent??this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){this.connectedScope.parent?.removeChild(this.connectedScope)}}class S{constructor(t=null,e="",s=[],i="",n={}){this.match=t,this.matching=e,this.instructions=s,this.remaining=i,this.params=n}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.some((t=>!t.component.none))}get hasRemaining(){return this.instructions.some((t=>t.hasNextScopeInstructions))}}function A(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}function T(t,e){return function(s,i){e(s,i,t)}}class ${static parse(t,e,s,i){if(!e)return{instructions:[],remaining:""};if(e.startsWith(t.sibling)&&!$.isAdd(t,e))throw new Error(`Instruction parser error: Unnecessary siblings separator ${t.sibling} in beginning of instruction part "${e}".`);const n=[];let r=1e3;for(;e.length&&r;)if(r--,e.startsWith(t.scope)){if(0===n.length)throw new Error(`Instruction parser error: Children without parent in instruction part "(${e}" is not allowed.`);i=!1;const r=(e=e.slice(t.scope.length)).startsWith(t.groupStart);r&&(e=e.slice(t.groupStart.length),s=!0);const{instructions:o,remaining:a}=$.parse(t,e,r,!1);n[n.length-1].nextScopeInstructions=o,e=a}else if(e.startsWith(t.groupStart)){e=e.slice(t.groupStart.length);const{instructions:s,remaining:r}=$.parse(t,e,!0,i);n.push(...s),e=r}else if(e.startsWith(t.groupEnd)){s&&(e=e.slice(t.groupEnd.length));let i=0;const r=e.length;for(;i<r;i++){if(e.slice(i,i+t.sibling.length)===t.sibling)return{instructions:n,remaining:e};if(e.slice(i,i+t.groupEnd.length)!==t.groupEnd){if(n.length>1)throw new Error(`Instruction parser error: Children below scope ${t.groupStart}${t.groupEnd} in instruction part "(${e}" is not allowed.`);e=e.slice(i);break}}if(i>=r)return{instructions:n,remaining:e}}else if(e.startsWith(t.sibling)&&!$.isAdd(t,e)){if(!s)return{instructions:n,remaining:e};e=e.slice(t.sibling.length)}else{const{instruction:s,remaining:i}=$.parseOne(t,e);n.push(s),e=i}return{instructions:n,remaining:e}}static isAdd(t,e){return e===t.add||e.startsWith(`${t.add}${t.viewport}`)}static parseOne(t,e){const s=[t.parameters,t.viewport,t.noScope,t.groupEnd,t.scope,t.sibling];let i,n,r,o,a,h=!0;const c=e,l=[t.add,t.clear];for(const n of l)if(e===n){i=e,e="",s.shift(),s.shift(),o=t.viewport;break}if(void 0===i)for(const n of l)if(e.startsWith(`${n}${t.viewport}`)){i=n,e=e.slice(`${n}${t.viewport}`.length),s.shift(),s.shift(),o=t.viewport;break}if(void 0===i&&(({token:o,pos:a}=$.findNextToken(e,s)),i=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):"",s.shift(),o===t.parameters&&(({token:o,pos:a}=$.findNextToken(e,[t.parametersEnd])),n=e.slice(0,a),e=e.slice(a+o.length),({token:o}=$.findNextToken(e,s)),e=e.slice(o.length)),s.shift()),o===t.viewport&&(({token:o,pos:a}=$.findNextToken(e,s)),r=-1!==a?e.slice(0,a):e,e=-1!==a?e.slice(a+o.length):""),s.shift(),o===t.noScope&&(h=!1),o!==t.groupEnd&&o!==t.scope&&o!==t.sibling||(e=`${o}${e}`),""===(i??""))throw new Error(`Instruction parser error: No component specified in instruction part "${e}".`);const u=Y.create(i,r,n,h);return u.unparsed=c,{instruction:u,remaining:e}}static findNextToken(t,e){const s={};for(const i of e)t.indexOf(i)>-1&&(s[i]=t.indexOf(i));const i=Math.min(...Object.values(s));for(const t in s)if(s[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}}class x{constructor(t="${componentTitles}${appTitleSeparator}Aurelia",e=" | ",s="top-down",i=" > ",n=!0,r="app-",o){this.appTitle=t,this.appTitleSeparator=e,this.componentTitleOrder=s,this.componentTitleSeparator=i,this.useComponentNames=n,this.componentPrefix=r,this.transformTitle=o}static create(t={}){return new x((t="string"==typeof t?{appTitle:t}:t).appTitle,t.appTitleSeparator,t.componentTitleOrder,t.componentTitleSeparator,t.useComponentNames,t.componentPrefix,t.transformTitle)}static for(t){return E.for(t).title}apply(t={}){t="string"==typeof t?{appTitle:t}:t,this.appTitle=t.appTitle??this.appTitle,this.appTitleSeparator=t.appTitleSeparator??this.appTitleSeparator,this.componentTitleOrder=t.componentTitleOrder??this.componentTitleOrder,this.componentTitleSeparator=t.componentTitleSeparator??this.componentTitleSeparator,this.useComponentNames=t.useComponentNames??this.useComponentNames,this.componentPrefix=t.componentPrefix??this.componentPrefix,this.transformTitle="transformTitle"in t?t.transformTitle:this.transformTitle}}class I{constructor(t="@",e="+",s="/",i="(",n=")",r="!",o="(",a=")",h=",",c="=",l="+",u="-",d="."){this.viewport=t,this.sibling=e,this.scope=s,this.groupStart=i,this.groupEnd=n,this.noScope=r,this.parameters=o,this.parametersEnd=a,this.parameterSeparator=h,this.parameterKeySeparator=c,this.add=l,this.clear=u,this.action=d}static create(t={}){return new I(t.viewport,t.sibling,t.scope,t.groupStart,t.groupEnd,t.noScope,t.parameters,t.parametersEnd,t.parameterSeparator,t.parameterKeySeparator,t.add,t.clear,t.action)}static for(t){return E.for(t).separators}apply(t={}){this.viewport=t.viewport??this.viewport,this.sibling=t.sibling??this.sibling,this.scope=t.scope??this.scope,this.groupStart=t.groupStart??this.groupStart,this.groupEnd=t.groupEnd??this.groupEnd,this.noScope=t.noScope??this.noScope,this.parameters=t.parameters??this.parameters,this.parametersEnd=t.parametersEnd??this.parametersEnd,this.parameterSeparator=t.parameterSeparator??this.parameterSeparator,this.parameterKeySeparator=t.parameterKeySeparator??this.parameterKeySeparator,this.add=t.add??this.add,this.clear=t.clear??this.clear,this.action=t.action??this.action}}class R{constructor(t="active",e="navigating"){this.loadActive=t,this.viewportNavigating=e}static create(t={}){return new R(t.loadActive,t.viewportNavigating)}static for(t){return E.for(t).indicators}apply(t={}){this.loadActive=t.loadActive??this.loadActive,this.viewportNavigating=t.viewportNavigating??this.viewportNavigating}}class E{constructor(t=I.create(),e=R.create(),s=!0,i=null,n=!0,r=0,o=!0,a=!0,h=!0,c=x.create(),l=["guardedUnload","swapped","completed"],u="attach-next-detach-current",d="",p="abort"){this.separators=t,this.indicators=e,this.useUrlFragmentHash=s,this.basePath=i,this.useHref=n,this.statefulHistoryLength=r,this.useDirectRouting=o,this.useConfiguredRoutes=a,this.additiveInstructionDefault=h,this.title=c,this.navigationSyncStates=l,this.swapOrder=u,this.fallback=d,this.fallbackAction=p,this.registrationHooks=[]}static create(t={}){return new E(I.create(t.separators),R.create(t.indicators),t.useUrlFragmentHash,t.basePath,t.useHref,t.statefulHistoryLength,t.useDirectRouting,t.useConfiguredRoutes,t.additiveInstructionDefault,x.create(t.title),t.navigationSyncStates,t.swapOrder,t.fallback,t.fallbackAction)}static for(t){return t instanceof Wt?t.options:(t=t instanceof gt?t.configuration:t.get(Dt)).options}apply(t){t=t??{},this.separators.apply(t.separators),this.indicators.apply(t.indicators),this.useUrlFragmentHash=t.useUrlFragmentHash??this.useUrlFragmentHash,this.basePath=t.basePath??this.basePath,this.useHref=t.useHref??this.useHref,this.statefulHistoryLength=t.statefulHistoryLength??this.statefulHistoryLength,this.useDirectRouting=t.useDirectRouting??this.useDirectRouting,this.useConfiguredRoutes=t.useConfiguredRoutes??this.useConfiguredRoutes,this.additiveInstructionDefault=t.additiveInstructionDefault??this.additiveInstructionDefault,this.title.apply(t.title),this.navigationSyncStates=t.navigationSyncStates??this.navigationSyncStates,this.swapOrder=t.swapOrder??this.swapOrder,this.fallback=t.fallback??this.fallback,this.fallbackAction=t.fallbackAction??this.fallbackAction,Array.isArray(t.hooks)&&(void 0!==this.routerConfiguration?t.hooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))):this.registrationHooks=t.hooks)}setRouterConfiguration(t){this.routerConfiguration=t,this.registrationHooks.forEach((t=>this.routerConfiguration.addHook(t.hook,t.options))),this.registrationHooks.length=0}}var O,P;(P=O||(O={})).none="none",P.string="string",P.array="array",P.object="object";class M{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return"none"===this.parametersType}static create(t){const e=new M;return e.set(t),e}static parse(t,e,s=!1){if(null==e||0===e.length)return[];const i=I.for(t),n=i.parameterSeparator,r=i.parameterKeySeparator;if("string"==typeof e){const t=[],i=e.split(n);for(const e of i){let i,n;[i,n]=e.split(r),void 0===n?(n=s?decodeURIComponent(i):i,i=void 0):s&&(i=decodeURIComponent(i),n=decodeURIComponent(n)),t.push({key:i,value:n})}return t}if(Array.isArray(e))return e.map((t=>({key:void 0,value:t})));const o=Object.keys(e);return o.sort(),o.map((t=>({key:t,value:e[t]})))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(t,e,s=!1){if(!Array.isArray(e)||0===e.length)return"";const i=I.for(t);return e.map((t=>{const e=void 0!==t.key&&s?encodeURIComponent(t.key):t.key,n=s?encodeURIComponent(t.value):t.value;return void 0!==e&&e!==n?e+i.parameterKeySeparator+n:n})).join(i.parameterSeparator)}static contains(t,e){return Object.keys(e).every((s=>e[s]===t[s]))}parameters(t){return M.parse(t,this.typedParameters)}set(t){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}get(t,e){if(void 0===e)return this.parameters(t);const s=this.parameters(t).filter((t=>t.key===e)).map((t=>t.value));return 0!==s.length?1===s.length?s[0]:s:void 0}addParameters(t){if("none"===this.parametersType)return this.set(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...t})}toSpecifiedParameters(t,e){e=e??[];const s=this.parameters(t),i={};for(const t of e){let e=s.findIndex((e=>e.key===t));if(e>=0){const[n]=s.splice(e,1);i[t]=n.value}else if(e=s.findIndex((t=>void 0===t.key)),e>=0){const[n]=s.splice(e,1);i[t]=n.value}}for(const t of s.filter((t=>void 0!==t.key)))i[t.key]=t.value;let n=e.length;for(const t of s.filter((t=>void 0===t.key)))i[n++]=t.value;return i}toSortedParameters(t,e){e=e||[];const s=this.parameters(t),i=[];for(const t of e){let e=s.findIndex((e=>e.key===t));if(e>=0){const t={...s.splice(e,1)[0]};t.key=void 0,i.push(t)}else if(e=s.findIndex((t=>void 0===t.key)),e>=0){const t={...s.splice(e,1)[0]};i.push(t)}else i.push({value:void 0})}const n=s.filter((t=>void 0!==t.key));return n.sort(((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0)),i.push(...n),i.push(...s.filter((t=>void 0===t.key))),i}same(t,e,s){const i=null!==s?s.parameters:[],n=this.toSpecifiedParameters(t,i),r=e.toSpecifiedParameters(t,i);return Object.keys(n).every((t=>n[t]===r[t]))&&Object.keys(r).every((t=>r[t]===n[t]))}}class N{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(t){const e=new N;return e.set(t),e}static isName(t){return"string"==typeof t}static isDefinition(t){return i.b_N.isType(t.Type)}static isType(t){return i.b_N.isType(t)}static isInstance(t){return(0,i.T5P)(t)}static isAppelation(t){return N.isName(t)||N.isType(t)||N.isInstance(t)}static getName(t){return N.isName(t)?t:N.isType(t)?i.b_N.getDefinition(t).name:N.getName(t.constructor)}static getType(t){return N.isName(t)?null:N.isType(t)?t:t.constructor}static getInstance(t){return N.isName(t)||N.isType(t)?null:t}set(t){let e=null,s=null,i=null,n=null,r=null;t instanceof Promise?n=t:N.isName(t)?e=N.getName(t):N.isType(t)?(e=this.getNewName(t),s=N.getType(t)):N.isInstance(t)?(e=this.getNewName(N.getType(t)),s=N.getType(t),i=N.getInstance(t)):"function"==typeof t&&(r=t),this.name=e,this.type=s,this.instance=i,this.promise=n,this.func=r}resolve(t){if(null!==this.func&&this.set(this.func(t)),this.promise instanceof Promise)return this.promise.then((t=>{if(N.isAppelation(t))return void this.set(t);if(null!=t.default)return void this.set(t.default);const e=Object.keys(t).filter((t=>!t.startsWith("__")));if(0===e.length)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(e.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const s=e[0];this.set(t[s])}))}get none(){return!(this.isName()||this.isType()||this.isInstance()||this.isFunction()||this.isPromise())}isName(){return!!this.name&&!this.isType()&&!this.isInstance()}isType(){return null!==this.type&&!this.isInstance()}isInstance(){return null!==this.instance}isPromise(){return null!==this.promise}isFunction(){return null!==this.func}toType(t,e){if(this.resolve(e),null!==this.type)return this.type;if(null!==this.name&&"string"==typeof this.name){if(null===t)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(t.has(i.b_N.keyFrom(this.name),!0)){const e=t.getResolver(i.b_N.keyFrom(this.name));if(null!==e&&void 0!==e.getFactory){const s=e.getFactory(t);if(s)return s.Type}}}return null}toInstance(t,e,s,n){if(this.resolve(n),null!==this.instance)return this.instance;if(null==t)return null;const r=t.createChild(),o=this.isType()?r.get(this.type):r.get(function(t){const e=i.b_N.keyFrom(t);return{$isResolver:!0,resolve:(s,i)=>i.has(e,!1)?i.get(e):i.root.has(e,!1)?i.root.get(e):(console.warn(`Detected resource traversal behavior. A custom element "${t}" is neither registered locally nor globally. This is not a supported behavior and will be removed in a future release`),i.get(e))}}(this.name));if(null==o)throw new Error(`Failed to create instance when trying to resolve component '${this.name}'!`);return i.Qrh.$el(r,o,s,null).parent=e,o}same(t,e=!1){return e?this.type===t.type:this.name===t.name}getNewName(t){return null===this.name?N.getName(t):this.name}}function B(t,e){const s=[];let i=t.findIndex(e);for(;i>=0;)s.push(t.splice(i,1)[0]),i=t.findIndex(e);return s}function j(t,e=!1){return t.filter(((t,s,i)=>(e||null!=t)&&i.indexOf(t)===s))}class L{constructor(){this.isPending=!0,this.promise=new Promise(((t,e)=>{this.t=t,this.i=e}))}resolve(t){this.t(t),this.isPending=!1}reject(t){this.i(t),this.isPending=!1}}class U{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(t,...e){if(0===(e?.length??0))return e?.[0];let s=!1;null===t&&(t=new D,s=!0);const i=new D(e.shift());return U.connect(t,i,(t?.runParallel??!1)||s),e.length>0&&U.add(i,!1,...e),s?(U.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),t.result):i}static runParallel(t,...e){if(0===(e?.length??0))return[];let s=!1;return null===t?(t=new D,s=!0):t=U.connect(t,new D,!0),U.add(t,!0,...e),s&&U.process(t),t.result instanceof Promise&&this.runners.set(t.result,t),s?t.result??[]:t}static step(t){if(t instanceof Promise)return U.runners.get(t)}static cancel(t){const e=U.step(t);void 0!==e&&e.cancel()}static add(t,e,...s){let i=new D(s.shift(),e);null!==t&&(i=U.connect(t,i,e));const n=i;for(;s.length>0;)i=U.connect(i,new D(s.shift(),e),!1);return n}static connect(t,e,s){if(s){const s=t.child;t.child=e,e.parent=t,e.next=s,null!==s&&(s.parent=null,s.previous=e)}else{const s=t.next;t.next=e,e.previous=t,e.next=s,null!==s&&(s.previous=e,s.parent=null)}return e}static process(t){const e=t.root;for(;null!==t&&!t.isDoing&&!t.isDone;)if(e.current=t,t.isParallelParent){t.isDone=!0;let e=t.child;for(;null!==e;)U.process(e),e=e.next}else{for(t.isDoing=!0,t.value=t.step;t.value instanceof Function&&!t.isCancelled&&!t.isExited&&!t.isDone;)t.value=t.value(t);if(!t.isCancelled)if(t.value instanceof Promise){const s=t.value;U.ensurePromise(e),((t,e)=>{e.then((e=>{t.value=e,U.settlePromise(t),t.isDone=!0,t.isDoing=!1;const s=t.nextToDo();null===s||t.isExited?(t.root.doneAll||t.isExited)&&U.settlePromise(t.root):U.process(s)})).catch((t=>{throw t}))})(t,s)}else t.isDone=!0,t.isDoing=!1,t=t.isExited?null:t.nextToDo()}e.isCancelled?U.settlePromise(e,"reject"):(e.doneAll||e.isExited)&&U.settlePromise(e)}static ensurePromise(t){return null===t.finally&&(t.finally=new L,t.promise=t.finally.promise,!0)}static settlePromise(t,e="resolve"){if(t.finally?.isPending)switch(t.promise=null,e){case"resolve":t.finally?.resolve(t.result);break;case"reject":t.finally?.reject(t.result)}}}U.runners=new WeakMap,U.roots={};class D{constructor(t=undefined,e=!1){this.step=t,this.runParallel=e,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=""+D.id++}get isParallelParent(){return this.child?.runParallel??!1}get result(){if(null!==this.promise)return this.promise;if(null!==this.child){if(this.isParallelParent){const t=[];let e=this.child;for(;null!==e;)t.push(e.result),e=e.next;return t}return this===this.root&&null!==this.exited?this.exited.result:this.child?.tail?.result}let t=this.value;for(;t instanceof D;)t=t.result;return t}get asValue(){return this.result}get previousValue(){return this.runParallel?this.head.parent?.parent?.previous?.result:this.previous?.result}get name(){let t=`${this.id}`;return this.runParallel&&(t=`:${t}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(t=`${t}*`),null!==this.finally&&(t=`${t}*`),null!==this.child&&(t=`${t}>`),this.isDone&&(t=`(${t})`),t}get root(){let t=this.head;for(;null!==t.parent;)t=t.parent.head;return t}get head(){let t=this;for(;null!==t.previous;)t=t.previous;return t}get tail(){let t=this;for(;null!==t.next;)t=t.next;return t}get done(){if(!this.isDone)return!1;let t=this.child;for(;null!==t;){if(!t.done)return!1;t=t.next}return!0}get doneAll(){return!(!this.isDone||null!==this.child&&!this.child.doneAll||null!==this.next&&!this.next.doneAll)}cancel(t=!0){return t?this.root.cancel(!1):!this.isCancelled&&(this.isCancelled=!0,this.child?.cancel(!1),this.next?.cancel(!1),!0)}exit(t=!0){return t?(this.root.exited=this,this.root.exit(!1)):!this.isExited&&(this.isExited=!0,this.child?.exit(!1),this.next?.exit(!1),!0)}nextToDo(){return null===this.child||this.child.isDoing||this.child.isDone?this.runParallel&&!this.head.parent.done?null:this.nextOrUp():this.child}nextOrUp(){let t=this.next;for(;null!==t;){if(!t.isDoing&&!t.isDone)return t;t=t.next}const e=this.head.parent??null;return null!==e&&e.done?e.nextOrUp():null}get path(){return`${this.head.parent?.path??""}/${this.name}`}get tree(){let t="",e=this.head,s=e.parent,i="";for(;null!==s;)i=`${s.path}${i}`,s=s.head.parent;do{if(t+=`${i}/${e.name}\n`,e===this)break;e=e.next}while(null!==e);return t}get report(){let t=`${this.path}\n`;return t+=this.child?.report??"",t+=this.next?.report??"",t}}D.id=0;class F{constructor(t,e,s,i,n,r,o,a){this.path=t,this.id=e,this.redirectTo=s,this.instructions=i,this.caseSensitive=n,this.title=r,this.reloadBehavior=o,this.data=a}static isConfigured(t){return r.SF.hasOwn(F.resourceKey,t)||"parameters"in t||"title"in t}static configure(t,e){const s=F.create(t,e);return r.SF.define(F.resourceKey,s,e),e}static getConfiguration(t){const e=r.SF.getOwn(F.resourceKey,t)??{};return Array.isArray(t.parameters)&&(e.parameters=t.parameters),"title"in t&&(e.title=t.title),e instanceof F?e:F.create(e,t)}static create(t,e=null){null!==e&&(t=F.transferTypeToComponent(t,e)),i.b_N.isType(t)?t=F.getConfiguration(t):null===e&&(t={...t});const s=F.transferIndividualIntoInstructions(t);F.validateRouteConfiguration(s);let n=s.path;return Array.isArray(n)&&(n=n.join(",")),new F(s.path??"",s.id??n??null,s.redirectTo??null,s.instructions??null,s.caseSensitive??!1,s.title??null,s.reloadBehavior??null,s.data??null)}static transferTypeToComponent(t,e){if(i.b_N.isType(t))throw new Error("Invalid route configuration: A component can't be specified in a component route configuration.");const s={...t}??{};if("component"in s||"instructions"in s)throw new Error("Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.");return"redirectTo"in s||(s.component=e),"path"in s||"redirectTo"in s||(s.path=i.b_N.getDefinition(e).name),s}static transferIndividualIntoInstructions(t){if(null==t)throw new Error("Invalid route configuration: expected an object.");if(null!==(t.component??null)||null!==(t.viewport??null)||null!==(t.parameters??null)||null!==(t.children??null)){if(null!=t.instructions)throw new Error("Invalid route configuration: The 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.");t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]}return t}static validateRouteConfiguration(t){if(null===t.redirectTo&&null===t.instructions)throw new Error("Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.")}}F.resourceKey=s.Protocol.resource.keyFor("route");const V={name:s.Protocol.resource.keyFor("routes"),isConfigured:t=>r.SF.hasOwn(V.name,t)||"routes"in t,configure(t,e){const s=t.map((t=>F.create(t)));return r.SF.define(V.name,s,e),e},getConfiguration(t){const e=t,s=[],i=r.SF.getOwn(V.name,t);return Array.isArray(i)&&s.push(...i),Array.isArray(e.routes)&&s.push(...e.routes),s.map((t=>t instanceof F?t:F.create(t)))}};class W extends C{}class _ extends k{constructor(t,e,s,i,n,r=null,o={catches:[],source:null}){super(t,e,s),this.rootComponentType=r,this.options=o,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new W(t,this,i,n)),this.catches.length>0&&(this.instruction=Y.create(this.catches[0],this.name))}get isEmpty(){return null===this.instruction}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter((t=>t.isViewportScope&&t.endpoint.name===this.name)).map((t=>t.endpoint))}get source(){return this.options.source??null}get catches(){let t=this.options.catches??[];return"string"==typeof t&&(t=t.split(",")),t}get default(){if(this.catches.length>0)return this.catches[0]}toString(){const t=this.instruction?.component.name??"",e=this.getNextContent()?.instruction.component.name??"";return`vs:${this.name}[${t}->${e}]`}setNextContent(t,e){return t.endpoint.set(this),this.remove=t.isClear(this.router)||t.isClearAll(this.router),this.add=t.isAdd(this.router)&&Array.isArray(this.source),this.add&&(t.component.name=null),void 0!==this.default&&null===t.component.name&&(t.component.name=this.default),this.contents.push(new W(this.router,this,this.owningScope,this.scope.hasScope,t,e)),"swap"}transition(t){U.run(null,(e=>t.setEndpointStep(this,e.root)),(()=>t.addEndpointState(this,"guardedUnload")),(()=>t.addEndpointState(this,"guardedLoad")),(()=>t.addEndpointState(this,"guarded")),(()=>t.addEndpointState(this,"loaded")),(()=>t.addEndpointState(this,"unloaded")),(()=>t.addEndpointState(this,"routed")),(()=>t.addEndpointState(this,"swapped")),(()=>t.addEndpointState(this,"completed")))}finalizeContentChange(t,e){const s=this.contents.findIndex((e=>e.navigation===t.navigation));let i=this.contents[s];if(this.remove){const t=new W(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(s,1,t),i.delete(),i=t}i.completed=!0;let n=0;for(let t=0,e=s;t<e&&this.contents[0].navigation.completed;t++)n++;this.contents.splice(0,n),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(t,e=null){[...new Set(this.scope.children.map((t=>t.endpoint)))].forEach((s=>s.cancelContentChange(t,e)));const s=this.contents.findIndex((e=>e.navigation===t.navigation));if(!(s<0)&&(this.contents.splice(s,1),this.add)){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}}acceptSegment(t){return null===t&&void 0===t||0===t.length||t===Y.clear(this.router)||t===Y.add(this.router)||t===this.name||0===this.catches.length||!!this.catches.includes(t)||!!this.catches.filter((t=>t.includes("*"))).length}binding(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){null!==this.sourceItem&&null!==this.source&&B(this.source,(t=>t===this.sourceItem)),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every((t=>t.sourceItem!==e)))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){const t=[];if(null!==this.rootComponentType){const e=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;t.push(...V.getConfiguration(e)??[])}return t}}class q{constructor(t={instruction:"",fullStateInstruction:""}){this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.path=t.path,this.title=t.title,this.query=t.query,this.fragment=t.fragment,this.parameters=t.parameters,this.data=t.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}class H{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class K extends q{constructor(t={instruction:"",fullStateInstruction:""}){super(t),this.navigation=new H,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=t.fromBrowser??this.fromBrowser,this.origin=t.origin??this.origin,this.replacing=t.replacing??this.replacing,this.refreshing=t.refreshing??this.refreshing,this.untracked=t.untracked??this.untracked,this.historyMovement=t.historyMovement??this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){return(this.navigation.back??!1)||(this.navigation.forward??!1)||(this.navigation.refresh??!1)}static create(t={instruction:"",fullStateInstruction:""}){return new K(t)}}class z{constructor(){this.map=new Map}set(t,e){const s=this.map.get(t);s instanceof L&&s.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof L&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new L;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof L?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof L)}clone(){const t=new z;return t.map=new Map(this.map),t}}class G extends C{constructor(t,e,s,i,n=Y.create(""),r=K.create({instruction:"",fullStateInstruction:""}),o=null){super(t,e,s,i,n,r),this.router=t,this.instruction=n,this.navigation=r,this.contentStates=new z,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,this.instruction.component.isType()||null==o?.container||(this.instruction.component.type=this.toComponentType(o.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){return this.instruction.route instanceof S&&null!==this.instruction.route.match?.reloadBehavior?this.instruction.route.match?.reloadBehavior:null!==this.instruction.component.instance&&"reloadBehavior"in this.instruction.component.instance&&void 0!==this.instruction.component.instance.reloadBehavior?this.instruction.component.instance.reloadBehavior:"default"}get controller(){return this.instruction.component.instance?.$controller}equalComponent(t){return this.instruction.sameComponent(this.router,t.instruction)}equalParameters(t){return this.instruction.sameComponent(this.router,t.instruction,!0)&&(this.navigation.query??"")===(t.navigation.query??"")}isCacheEqual(t){return this.instruction.sameComponent(this.router,t.instruction,!0)}contentController(t){return i.Qrh.$el(t.container.createChild(),this.instruction.component.instance,t.element,null)}createComponent(t,e,s){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.instruction.component.set(this.toComponentInstance(t.container,t.controller,t.element))}catch(i){if(!i.message.startsWith("AUR0009:"))throw i;if(""===(e??""))throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`);"process-children"===s?this.instruction.parameters.set([this.instruction.component.name]):(this.instruction.parameters.set([this.instruction.unparsed??this.instruction.component.name]),this.instruction.nextScopeInstructions=null),this.instruction.component.set(e);try{this.instruction.component.set(this.toComponentInstance(t.container,t.controller,t.element))}catch(t){if(!t.message.startsWith("AUR0009:"))throw t;throw new Error(`'${this.instruction.component.name}' did not match any configured route or registered component name - did you forget to add the component '${this.instruction.component.name}' to the dependencies or to register it as a global dependency?`)}}this.contentStates.set("created",void 0)}}canLoad(){if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const t=this.instruction.component.instance;if(null==t)return!0;this.contentStates.set("checkedLoad",void 0);const e=this.endpoint.parentViewport?.getTimeContent(this.navigation.timestamp)?.instruction?.typeParameters(this.router),s=this.instruction.typeParameters(this.router),i={...this.navigation.parameters,...e,...s},n=this.getLifecycleHooks(t,"canLoad").map((e=>s=>{const n=e(t,i,this.instruction,this.navigation);return"boolean"==typeof n?(!1===n&&s.exit(),n):"string"==typeof n?(s.exit(),n):n}));if(0!==n.length){const t=U.run(null,...n);if(!0!==t)return!1!==t&&t}if(null==t.canLoad)return!0;return t.canLoad(i,this.instruction,this.navigation)}canUnload(t){if(this.contentStates.has("checkedUnload")&&!this.reload)return!0;if(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded"))return!0;const e=this.instruction.component.instance;null===t&&(t=K.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const s=this.getLifecycleHooks(e,"canUnload").map((s=>i=>{const n=s(e,this.instruction,t);return"boolean"==typeof n?(!1===n&&i.exit(),n):n}));if(0!==s.length){const t=U.run(null,...s);if(!0!==t)return!1!==t&&t}if(!e.canUnload)return!0;const i=e.canUnload(this.instruction,t);if("boolean"!=typeof i&&!(i instanceof Promise))throw new Error(`Method 'canUnload' in component "${this.instruction.component.name}" needs to return true or false or a Promise resolving to true or false.`);return i}load(t){return U.run(t,(()=>this.contentStates.await("checkedLoad")),(()=>{if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const t=this.instruction.component.instance,e=this.endpoint.parentViewport?.getTimeContent(this.navigation.timestamp)?.instruction?.typeParameters(this.router),s=this.instruction.typeParameters(this.router),i={...this.navigation.parameters,...e,...s},n=this.getLifecycleHooks(t,"loading").map((e=>()=>e(t,i,this.instruction,this.navigation)));return n.push(...this.getLifecycleHooks(t,"load").map((e=>()=>(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),e(t,i,this.instruction,this.navigation))))),0!==n.length?("function"==typeof t.loading&&n.push((()=>t.loading(i,this.instruction,this.navigation))),"function"==typeof t.load&&(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),n.push((()=>t.load(i,this.instruction,this.navigation)))),U.run(null,...n)):"function"==typeof t.loading?t.loading(i,this.instruction,this.navigation):"function"==typeof t.load?(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),t.load(i,this.instruction,this.navigation)):void 0}))}unload(t){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const e=this.instruction.component.instance;null===t&&(t=K.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const s=this.getLifecycleHooks(e,"unloading").map((s=>()=>s(e,this.instruction,t)));return s.push(...this.getLifecycleHooks(e,"unload").map((s=>()=>(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),s(e,this.instruction,t))))),0!==s.length?("function"==typeof e.unloading&&s.push((()=>e.unloading(this.instruction,t))),"function"==typeof e.unload&&(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),s.push((()=>e.unload(this.instruction,t)))),U.run(null,...s)):"function"==typeof e.unloading?e.unloading(this.instruction,t):"function"==typeof e.unload?(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),e.unload(this.instruction,t)):void 0}activateComponent(t,e,s,i,n,r){return U.run(t,(()=>this.contentStates.await("loaded")),(()=>this.waitForParent(s)),(()=>{if(!this.contentStates.has("activating")&&!this.contentStates.has("activated"))return this.contentStates.set("activating",void 0),this.controller?.activate(e??this.controller,s,void 0)}),(()=>{this.contentStates.set("activated",void 0)}))}deactivateComponent(t,e,s,i,n=!1){if(this.contentStates.has("activated")||this.contentStates.has("activating"))return U.run(t,(()=>{if(n&&null!==i.element){const t=Array.from(i.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}return this.contentStates.delete("activated"),this.contentStates.delete("activating"),this.controller?.deactivate(e??this.controller,s)}))}disposeComponent(t,e,s=!1){if(this.contentStates.has("created")&&null!=this.instruction.component.instance)return s?void e.push(this):(this.contentStates.delete("created"),this.controller?.dispose())}freeContent(t,e,s,i,n=!1){return U.run(t,(()=>this.unload(s)),(t=>this.deactivateComponent(t,null,e.controller,e,n)),(()=>this.disposeComponent(e,i,n)))}toComponentName(){return this.instruction.component.name}toComponentType(t){return this.instruction.component.none?null:this.instruction.component.toType(t,this.instruction)}toComponentInstance(t,e,s){return this.instruction.component.none?null:this.instruction.component.toInstance(t,e,s,this.instruction)}waitForParent(t){if(null!==t)return t.isActive?void 0:new Promise((t=>{this.endpoint.activeResolve=t}))}getLifecycleHooks(t,e){return(t.$controller.lifecycleHooks[e]??[]).map((t=>t.instance[e].bind(t.instance)))}}class Q{constructor(t=!0,e=[],s="",i="",n="",r=!1,o=!1,a=!1,h=!1,c=!1){this.scope=t,this.usedBy=e,this.fallback=i,this.fallbackAction=n,this.noLink=r,this.noTitle=o,this.stateful=a,this.forceDescription=h,this.noHistory=c,this.default=void 0,this.default=s}static create(t){const e=new Q;return void 0!==t&&e.apply(t),e}apply(t){this.scope=t.scope??this.scope,this.usedBy=("string"==typeof t.usedBy?t.usedBy.split(",").filter((t=>t.length>0)):t.usedBy)??this.usedBy,this.default=t.default??this.default,this.fallback=t.fallback??this.fallback,this.fallbackAction=t.fallbackAction??this.fallbackAction,this.noLink=t.noLink??this.noLink,this.noTitle=t.noTitle??this.noTitle,this.stateful=t.stateful??this.stateful,this.forceDescription=t.forceDescription??this.forceDescription,this.noHistory=t.noHistory??this.noHistory}}class J extends k{constructor(t,e,s,i,n,r){super(t,e,s),this.contents=[],this.forceRemove=!1,this.options=new Q,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new G(t,this,i,n)),this.contents[0].completed=!0,void 0!==r&&this.options.apply(r)}getContent(){if(1===this.contents.length)return this.contents[0];let t;for(let e=0,s=this.contents.length;e<s&&this.contents[e].completed;e++)t=this.contents[e];return t}getNextContent(){if(1===this.contents.length)return null;const t=this.contents.indexOf(this.getContent());return this.contents.length>t?this.contents[t+1]:null}getTimeContent(t){let e=null;for(let s=0,i=this.contents.length;s<i&&!(this.contents[s].navigation.timestamp>t);s++)e=this.contents[s];return e}getNavigationContent(t){return super.getNavigationContent(t)}get parentViewport(){let t=this.connectedScope;for(;null!=t?.parent;)if(t=t.parent,t.endpoint.isViewport)return t.endpoint;return null}get isEmpty(){return null===this.getContent().componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(t.isViewport&&t.endpoint.forceRemove)return!0;t=t.parent}return!1}isActiveNavigation(t){return this.coordinators[this.coordinators.length-1]===t}toString(){const t=this.getContent()?.instruction.component.name??"",e=this.getNextContent()?.instruction.component.name??"";return`v:${this.name}[${t}->${e}]`}setNextContent(t,e){t.endpoint.set(this),this.clear=t.isClear(this.router);const s=this.getContent(),i=new G(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:t,e,this.connectedCE??null);if(this.contents.push(i),i.fromHistory=!(null===i.componentInstance||!e.navigation||!e.navigation.back&&!e.navigation.forward),this.options.stateful){const t=this.cache.find((t=>i.isCacheEqual(t)));void 0!==t?(this.contents.splice(this.contents.indexOf(i),1,t),i.fromCache=!0):this.cache.push(i)}return null!==i.componentInstance&&s.componentInstance===i.componentInstance?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):!s.equalComponent(i)||e.navigation.refresh||"refresh"===s.reloadBehavior?this.transitionAction="swap":"disallow"===s.reloadBehavior?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):"reload"===s.reloadBehavior?(s.reload=!0,i.instruction.component.set(s.componentInstance),i.contentStates=s.contentStates.clone(),i.reload=s.reload,this.transitionAction="reload"):this.options.stateful&&s.equalParameters(i)||s.equalParameters(i)?(i.delete(),this.contents.splice(this.contents.indexOf(i),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(t,e){e=e??{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,this.options.apply(e),null!=this.connectionResolve&&this.connectionResolve());const s=(this.scope.parent?.endpoint.getRoutes()??[]).filter((t=>(Array.isArray(t.path)?t.path:[t.path]).includes(""))).length>0;if(null===this.getContent().componentInstance&&null==this.getNextContent()?.componentInstance&&(this.options.default||s)){const t=Y.parse(this.router,this.options.default??"");if(0===t.length&&s){const e=this.scope.parent?.findInstructions([Y.create("")],!1,this.router.configuration.options.useConfiguredRoutes);e?.foundConfiguration&&t.push(...e.instructions)}for(const e of t)e.endpoint.set(this),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch((t=>{throw t}))}}remove(t,e){return this.connectedCE===e&&U.run(t,(t=>{if(null!==this.getContent().componentInstance)return this.getContent().freeContent(t,this.connectedCE,this.getNextContent()?.navigation??null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}),(t=>{if(this.doForceRemove){const e=[];for(const t of this.historyCache)e.push((e=>t.freeContent(e,null,null,this.historyCache,!1)));return e.push((()=>{this.historyCache=[]})),U.run(t,...e)}return!0}))}async transition(t){const e=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(t);this.coordinators[0]!==t;)await this.coordinators[0].waitForSyncState("completed");let s=this.parentViewport;null!==s&&"reload"!==s.transitionAction&&"swap"!==s.transitionAction&&(s=null);const i=[e=>{if(this.isActiveNavigation(t))return this.canUnload(t,e)},e=>{if(this.isActiveNavigation(t))if(e.previousValue){if(this.router.isRestrictedNavigation){const e=this.router.configuration.options;this.getNavigationContent(t).createComponent(this.connectedCE,this.options.fallback||e.fallback,this.options.fallbackAction||e.fallbackAction)}}else t.cancel();t.addEndpointState(this,"guardedUnload")},()=>t.waitForSyncState("guardedUnload",this),()=>null!==s?t.waitForEndpointState(s,"guardedLoad"):void 0,e=>{if(this.isActiveNavigation(t))return this.canLoad(t,e)},e=>{if(this.isActiveNavigation(t)){let s=e.previousValue;if("boolean"!=typeof s){if(this.getNavigationContent(t).instruction.nextScopeInstructions=null,"string"==typeof s){const t=this.scope,e=this.router.configuration.options;let i=Y.parse(this.router,s);const n=t.parent?.findInstructions(i,e.useDirectRouting,e.useConfiguredRoutes);(n?.foundConfiguration||n?.foundInstructions)&&(i=n.instructions);for(const e of i)e.endpoint.set(this),e.scope=t.owningScope;s=i}return U.run(e,(e=>this.cancelContentChange(t,e)),(t=>(this.router.load(s,{append:!0}),t.exit())))}if(!s)return e.cancel(),t.cancel(),void(this.getNavigationContent(t).instruction.nextScopeInstructions=null)}t.addEndpointState(this,"guardedLoad"),t.addEndpointState(this,"guarded")}],n=[()=>t.waitForSyncState("guarded",this),e=>{if(this.isActiveNavigation(t))return this.unload(t,e)},()=>t.addEndpointState(this,"unloaded"),()=>t.waitForSyncState("unloaded",this),()=>null!==s?t.waitForEndpointState(s,"loaded"):void 0,e=>{if(this.isActiveNavigation(t))return this.load(t,e)},()=>t.addEndpointState(this,"loaded"),()=>t.addEndpointState(this,"routed")],r=[()=>t.waitForSyncState("routed",this),()=>t.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":r.push((e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}));break;case"attach-next-detach-current":r.push((e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}));break;case"detach-attach-simultaneously":r.push((e=>U.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}))));break;case"attach-detach-simultaneously":r.push((e=>U.runParallel(e,(e=>{if(this.isActiveNavigation(t))return this.addContent(e,t)}),(e=>{if(this.isActiveNavigation(t))return this.removeContent(e,t)}))))}r.push((()=>t.addEndpointState(this,"swapped"))),this.connectedCE?.setActivity?.(e,!0),this.connectedCE?.setActivity?.(t.navigation.navigation,!0);const o=U.run(null,(e=>t.setEndpointStep(this,e.root)),...i,...n,...r,(()=>t.addEndpointState(this,"completed")),(()=>t.waitForSyncState("bound")),(()=>{this.connectedCE?.setActivity?.(e,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1)}));o instanceof Promise&&o.catch((t=>{}))}canUnload(t,e){return U.run(e,(e=>this.getContent().connectedScope.canUnload(t,e)),(e=>!!e.previousValue&&this.getContent().canUnload(t.navigation)))}canLoad(t,e){return!!this.clear||U.run(e,(()=>this.waitForConnected()),(()=>{const e=this.router.configuration.options,s=this.getNavigationContent(t);return s.createComponent(this.connectedCE,this.options.fallback||e.fallback,this.options.fallbackAction||e.fallbackAction),s.canLoad()}))}load(t,e){if(!this.clear)return this.getNavigationContent(t).load(e)}addContent(t,e){return this.activate(t,null,this.connectedController,e)}removeContent(t,e){if(this.isEmpty)return;const s=this.router.statefulHistory||(this.options.stateful??!1);return U.run(t,(()=>e.addEndpointState(this,"bound")),(()=>e.waitForSyncState("bound")),(t=>this.deactivate(t,null,this.connectedController)),(()=>s?this.dispose():void 0))}activate(t,e,s,i){if(null!==this.activeContent.componentInstance)return U.run(t,(()=>this.activeContent.canLoad()),(t=>this.activeContent.load(t)),(t=>this.activeContent.activateComponent(t,e,s,this.connectedCE,(()=>i?.addEndpointState(this,"bound")),i?.waitForSyncState("bound"))))}deactivate(t,e,s){const i=this.getContent();if(null!=i?.componentInstance&&!i.reload&&i.componentInstance!==this.getNextContent()?.componentInstance)return i.deactivateComponent(t,e,s,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(t,e){return U.run(e,(e=>this.getContent().connectedScope.unload(t,e)),(()=>null!=this.getContent().componentInstance?this.getContent().unload(t.navigation??null):void 0))}dispose(){null===this.getContent().componentInstance||this.getContent().reload||this.getContent().componentInstance===this.getNextContent()?.componentInstance||this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(t,e){const s=this.contents.findIndex((e=>e.navigation===t.navigation));let i=this.contents[s];const n=this.contents[s-1];if(this.clear){const t=new G(this.router,this,this.owningScope,this.scope.hasScope,void 0,i.navigation);this.contents.splice(s,1,t),i.delete(),i=t}else i.reload=!1;n.delete(),i.completed=!0,this.transitionAction="",i.contentStates.delete("checkedUnload"),i.contentStates.delete("checkedLoad"),this.previousViewportState=null;const r=this.router.configuration.options.indicators.viewportNavigating;this.connectedCE?.setActivity?.(r,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1);let o=0;for(let t=0,e=s;t<e&&this.contents[0].navigation.completed;t++)o++;this.contents.splice(0,o),B(this.coordinators,(e=>e===t))}cancelContentChange(t,e=null){[...new Set(this.scope.children.map((t=>t.endpoint)))].forEach((s=>s.cancelContentChange(t,e)));const s=this.contents.findIndex((e=>e.navigation===t.navigation));if(s<0)return;const i=t.getEndpointStep(this)?.current??null,n=this.contents[s],r=this.contents[s-1];return n.instruction.cancelled=!0,U.run(i,(t=>n.freeContent(t,this.connectedCE,n.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful)),(()=>{this.previousViewportState&&Object.assign(this,this.previousViewportState),n?.delete(),null!==n&&this.contents.splice(this.contents.indexOf(n),1),this.transitionAction="",r?.contentStates.delete("checkedUnload"),r?.contentStates.delete("checkedLoad");const e=this.router.configuration.options.indicators.viewportNavigating;this.connectedCE?.setActivity?.(e,!1),this.connectedCE?.setActivity?.(t.navigation.navigation,!1),t.removeEndpoint(this),B(this.coordinators,(e=>e===t))}),(()=>{if(i!==e)return i?.exit()}))}wantComponent(t){return this.options.usedBy.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;const e=this.options.usedBy;return 0===e.length||!!e.includes(t)||!!e.filter((t=>t.includes("*"))).length}freeContent(t,e){const s=this.historyCache.find((t=>t.componentInstance===e));if(void 0!==s)return U.run(t,(t=>(this.forceRemove=!0,s.freeContent(t,null,null,this.historyCache,!1))),(()=>{this.forceRemove=!1,B(this.historyCache,(t=>t===s))}))}getRoutes(){const t=[];let e=this.getComponentType();return null!=e&&(e=e.constructor===e.constructor.constructor?e:e.constructor,t.push(...V.getConfiguration(e)??[])),t}getTitle(t){if(this.options.noTitle)return"";const e=this.getComponentType();if(null===e)return"";let s="";const i=e.title;if(void 0!==i)if("string"==typeof i)s=i;else{const e=this.getComponentInstance();s=i.call(e,e,t)}else if(this.router.configuration.options.title.useComponentNames){let t=this.getContentInstruction().component.name??"";const e=this.router.configuration.options.title.componentPrefix??"";t.startsWith(e)&&(t=t.slice(e.length)),t=t.replace("-"," "),s=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return s}getComponentType(){let t=this.getContentInstruction().component.type??null;return null===t&&(t=i.b_N.for(this.connectedCE.element).container.componentType),t??null}getComponentInstance(){return this.getContentInstruction().component.instance??null}getContentInstruction(){return this.getNextContent()?.instruction??this.getContent().instruction??null}clearState(){this.options=Q.create();const t=this.owningScope,e=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new G(this.router,this,t,e)),this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise((t=>{this.connectionResolve=t}))}}class X{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return null===this.name&&null===this.instance}get endpointType(){return this.instance instanceof J?"Viewport":this.instance instanceof _?"ViewportScope":null}static create(t){const e=new X;return e.set(t),e}static isName(t){return"string"==typeof t}static isInstance(t){return t instanceof k}static getName(t){return X.isName(t)?t:t?t.name:null}static getInstance(t){return X.isName(t)?null:t}set(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.name=t,this.instance=null):(this.instance=t,null!==t&&(this.name=t.name,this.scope=t.owningScope))}toInstance(t){return null!==this.instance?this.instance:t.getEndpoint(this.endpointType,this.name)}same(t,e){return null!==this.instance&&null!==t.instance?this.instance===t.instance:!(null!==this.endpointType&&null!==t.endpointType&&this.endpointType!==t.endpointType||e&&this.scope!==t.scope||(null!==this.instance?this.instance.name:this.name)!==(null!==t.instance?t.instance.name:t.name))}}class Y{constructor(t,e,s){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.unparsed=null,this.cancelled=!1,this.component=N.create(t),this.endpoint=X.create(e),this.parameters=M.create(s)}static create(t,e,s,i=!0,n=null){const r=new Y(t,e,s);return r.ownsScope=i,r.nextScopeInstructions=n,r}static createClear(t,e){return Y.create(Y.clear(t),e)}static from(t,e){Array.isArray(e)||(e=[e]);const s=[];for(const n of e)if("string"==typeof n)s.push(...Y.parse(t,n));else if(n instanceof Y)s.push(n);else if(n instanceof Promise)s.push(Y.create(n));else if(N.isAppelation(n))s.push(Y.create(n));else if(N.isDefinition(n))s.push(Y.create(n.Type));else if("component"in n||"id"in n){const e=n,i=Y.create(e.component,e.viewport,e.parameters);i.route=n.id??null,void 0!==e.children&&null!==e.children&&(i.nextScopeInstructions=Y.from(t,e.children)),s.push(i)}else if("object"==typeof n&&null!==n){const t=i.b_N.define(n);s.push(Y.create(t))}else s.push(Y.create(n));return s}static clear(t){return I.for(t).clear}static add(t){return I.for(t).add}static parse(t,e){const s=I.for(t);let i="";const n=/^[./]+/.exec(e);Array.isArray(n)&&n.length>0&&(i=n[0],e=e.slice(i.length));const r=$.parse(s,e,!0,!0).instructions;for(const t of r)t.scopeModifier=i;return r}static stringify(t,e,s=!1,i=!1){return"string"==typeof e?e:e.map((e=>e.stringify(t,s,i))).filter((t=>t.length>0)).join(I.for(t).sibling)}static resolve(t){const e=t.filter((t=>t.isUnresolved)).map((t=>t.resolve())).filter((t=>t instanceof Promise));if(e.length>0)return Promise.all(e)}static containsSiblings(t,e){return null!==e&&(e.filter((e=>!e.isClear(t)&&!e.isClearAll(t))).length>1||e.some((e=>Y.containsSiblings(t,e.nextScopeInstructions))))}static flat(t){const e=[];for(const s of t)e.push(s),s.hasNextScopeInstructions&&e.push(...Y.flat(s.nextScopeInstructions));return e}static clone(t,e=!1,s=!1){return t.map((t=>t.clone(e,s)))}static contains(t,e,s,i){return s.every((s=>s.isIn(t,e,i)))}get viewport(){return this.endpoint.instance instanceof J||null===this.endpoint.endpointType?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof _||null===this.endpoint.endpointType?this.endpoint:null}get previous(){return this.endpoint.instance?.getContent()?.instruction}isAdd(t){return this.component.name===I.for(t).add}isClear(t){return this.component.name===I.for(t).clear}isAddAll(t){return this.isAdd(t)&&0===(this.endpoint.name?.length??0)}isClearAll(t){return this.isClear(t)&&0===(this.endpoint.name?.length??0)}get hasNextScopeInstructions(){return(this.nextScopeInstructions?.length??0)>0}get isUnresolved(){return this.component.isFunction()||this.component.isPromise()}resolve(){return this.component.resolve(this)}typeParameters(t){return this.parameters.toSpecifiedParameters(t,this.component.type?.parameters??[])}sameRoute(t){const e=this.route?.match,s=t.route?.match;return null!=e&&null!=s&&("string"==typeof e||"string"==typeof s?e===s:e.id===s.id)}sameComponent(t,e,s=!1,i=!1){return!(s&&!this.sameParameters(t,e,i))&&this.component.same(e.component,i)}sameEndpoint(t,e){return this.endpoint.same(t.endpoint,e)}sameParameters(t,e,s=!1){return!!this.component.same(e.component,s)&&this.parameters.same(t,e.parameters,this.component.type)}stringify(t,e=!1,s=!1,i=!1){const n=I.for(t);let r=e,o=!1;if(s){const t=this.viewport?.instance??null;if(t?.options.noLink)return"";this.needsEndpointDescribed||t?.options.forceDescription&&null==this.viewportScope?.instance||(r=!0),t?.options.fallback===this.component.name&&(o=!0),t?.options.default===this.component.name&&(o=!0)}const a=this.nextScopeInstructions;let h=this.scopeModifier;if(this.route instanceof S&&!this.routeStart)return!i&&Array.isArray(a)?Y.stringify(t,a,e,s):"";const c=this.stringifyShallow(t,r,o);if(h+=c.endsWith(n.scope)?c.slice(0,-n.scope.length):c,!i&&Array.isArray(a)&&a.length>0){const i=Y.stringify(t,a,e,s);i.length>0&&(h+=n.scope,h+=1===a.length?i:`${n.groupStart}${i}${n.groupEnd}`)}return h}clone(t=!1,e=!1,s=!1){const i=Y.create(this.component.func??this.component.promise??this.component.type??this.component.name,this.endpoint.name,null!==this.parameters.typedParameters?this.parameters.typedParameters:void 0);return t&&(i.component.set(this.component.instance??this.component.type??this.component.name),i.endpoint.set(this.endpoint.instance??this.endpoint.name)),i.component.name=this.component.name,i.needsEndpointDescribed=this.needsEndpointDescribed,i.route=this.route,i.routeStart=this.routeStart,i.default=this.default,e&&(i.scopeModifier=this.scopeModifier),i.scope=t?this.scope:null,this.hasNextScopeInstructions&&!s&&(i.nextScopeInstructions=Y.clone(this.nextScopeInstructions,t,e)),i}isIn(t,e,s){const i=e.filter((e=>{if(null!=this.route||null!=e.route){if(!e.sameRoute(this))return!1}else if(!e.sameComponent(t,this))return!1;const s=e.component.type??this.component.type,i=this.component.type??e.component.type,n=e.parameters.toSpecifiedParameters(t,s?.parameters),r=this.parameters.toSpecifiedParameters(t,i?.parameters);return!!M.contains(n,r)&&(this.endpoint.none||e.sameEndpoint(this,!1))}));return!(0===i.length||s&&this.hasNextScopeInstructions&&!i.some((e=>Y.contains(t,e.nextScopeInstructions??[],this.nextScopeInstructions,s))))}getTitle(t){if(this.route instanceof S){const e=this.route.match?.title;if(null!=e)return this.routeStart?"string"==typeof e?e:e(this,t):""}return this.endpoint.instance.getTitle(t)}toJSON(){return{component:this.component.name??void 0,viewport:this.endpoint.name??void 0,parameters:this.parameters.parametersRecord??void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(t,e=!1,s=!1){if(null!=this.route)return(this.route instanceof S?this.route.matching:this.route).split("/").map((e=>e.startsWith(":")?this.parameters.get(t,e.slice(1)):e)).join("/");const i=I.for(t);let n=s?"":this.component.name??"";const r=this.component.type?this.component.type.parameters:null,o=M.stringify(t,this.parameters.toSortedParameters(t,r));return o.length>0&&(n+=s?o:`${i.parameters}${o}${i.parametersEnd}`),null==this.endpoint.name||e||(n+=`${i.viewport}${this.endpoint.name}`),this.ownsScope||(n+=i.noScope),n||""}}class Z{constructor(t,e){this.eventName=t,this.navigation=e}static create(t){return new Z(Z.eventName,t)}}Z.eventName="au:router:navigation-navigate";let tt=class{constructor(t,e){this.ea=t,this.container=e,this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=K.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.lastNavigationIndex=-1}start(t){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.isActive=!1}navigate(t){t instanceof K||(t=K.create(t));const e=new H;return-1===this.lastNavigationIndex&&(this.loadState(),-1!==this.lastNavigationIndex?e.refresh=!0:(e.first=!0,e.new=!0,this.lastNavigationIndex=0,this.navigations=[K.create({index:0,instruction:"",fullStateInstruction:""})])),void 0===t.index||t.replacing||t.refreshing?t.refreshing||e.refresh?((t=this.navigations[this.lastNavigationIndex]).replacing=!0,t.refreshing=!0):t.replacing?(e.replace=!0,e.new=!0,t.index=this.lastNavigationIndex):(e.new=!0,t.index=this.lastNavigationIndex+1,this.navigations[t.index]=t):(t.historyMovement=t.index-Math.max(this.lastNavigationIndex,0),t.instruction=null!=this.navigations[t.index]?this.navigations[t.index].fullStateInstruction:t.fullStateInstruction,t.replacing=!0,t.historyMovement>0?e.forward=!0:t.historyMovement<0&&(e.back=!0)),t.navigation=e,t.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],t.process=new L,this.lastNavigationIndex=t.index,this.notifySubscribers(t),t.process.promise}async finalize(t,e){if(t.untracked)t.fromBrowser&&null!=this.options.store&&await this.options.store.popNavigatorState();else if(t.replacing)0===(t.historyMovement??0)&&(this.navigations[t.previous.index]=t),await this.saveState(t.index,!1);else{const s=t.index;if(e&&(this.navigations=this.navigations.slice(0,s)),this.navigations[s]=t,(this.options.statefulHistoryLength??0)>0){const t=this.navigations.length-(this.options.statefulHistoryLength??0);for(const e of this.navigations.slice(s))"string"==typeof e.instruction&&"string"==typeof e.fullStateInstruction||await this.serializeNavigation(e,this.navigations.slice(t,s))}await this.saveState(t.index,!t.fromBrowser)}}async cancel(t){null!=this.options.store&&(t.navigation?.new?t.fromBrowser&&await this.options.store.popNavigatorState():0!==(t.historyMovement??0)&&await this.options.store.go(-t.historyMovement,!0))}async go(t){let e=this.lastNavigationIndex+t;e=Math.min(e,this.navigations.length-1),await this.options.store.go(t,!0);const s=this.navigations[e];return this.navigate(s)}getState(){const t=null!=this.options.store?{...this.options.store.state}:{};return{navigations:t?.navigations??[],navigationIndex:t?.navigationIndex??-1}}loadState(){const{navigations:t,navigationIndex:e}=this.getState();this.navigations=t.map((t=>K.create(t))),this.lastNavigationIndex=e}async saveState(t,e){for(let t=0;t<this.navigations.length;t++)this.navigations[t]=K.create(this.navigations[t].toStoredNavigation());if((this.options.statefulHistoryLength??0)>0){const t=this.navigations.length-(this.options.statefulHistoryLength??0);for(let e=0;e<t;e++){const s=this.navigations[e];"string"==typeof s.instruction&&"string"==typeof s.fullStateInstruction||await this.serializeNavigation(s,this.navigations.slice(t))}}if(null==this.options.store)return Promise.resolve();const s={navigations:(this.navigations??[]).map((t=>this.toStoreableNavigation(t))),navigationIndex:t};return e?this.options?.store?.pushNavigatorState(s):this.options.store.replaceNavigatorState(s)}async refresh(){if(-1===this.lastNavigationIndex)return Promise.reject();const t=this.navigations[this.lastNavigationIndex];return t.replacing=!0,t.refreshing=!0,this.navigate(t)}notifySubscribers(t){this.ea.publish(Z.eventName,Z.create(t))}toStoreableNavigation(t){const e=t instanceof K?t.toStoredNavigation():t;return e.instruction=Y.stringify(this.container,e.instruction),e.fullStateInstruction=Y.stringify(this.container,e.fullStateInstruction,!1,!0),"string"!=typeof e.scope&&(e.scope=null),e}async serializeNavigation(t,e){let s=[];for(const t of e)"string"!=typeof t.instruction&&s.push(...Y.flat(t.instruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance))),"string"!=typeof t.fullStateInstruction&&s.push(...Y.flat(t.fullStateInstruction).filter((t=>null!==t.endpoint.instance)).map((t=>t.component.instance)));s=j(s);let i=[];"string"!=typeof t.fullStateInstruction&&(i.push(...t.fullStateInstruction),t.fullStateInstruction=Y.stringify(this.container,t.fullStateInstruction,!1,!0)),"string"!=typeof t.instruction&&(i.push(...t.instruction),t.instruction=Y.stringify(this.container,t.instruction)),i=i.filter(((t,e,s)=>null!=t.component.instance&&s.indexOf(t)===e));const n=[];for(const t of i)await this.freeInstructionComponents(t,s,n)}freeInstructionComponents(t,e,s){const i=t.component.instance,n=t.viewport?.instance??null;if(null!==i&&null!==n&&!s.some((t=>t===i))){if(!e.some((t=>t===i)))return U.run(null,(t=>n.freeContent(t,i)),(()=>{s.push(i)}));if(t.hasNextScopeInstructions)for(const i of t.nextScopeInstructions)return this.freeInstructionComponents(i,e,s)}}};tt=A([T(0,s.Rp),T(1,s.bE)],tt);class et extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){B(this,(e=>e===t))}}class st{static matchEndpoints(t,e,s,i=!1){const n=[],r=t.getOwnedRoutingScopes(1/0).map((t=>t.endpoint)).filter((t=>null!==t&&!s.some((e=>t===e.endpoint.instance&&!e.cancelled)))),o=new et(...e.slice());let a=null;for(st.matchKnownEndpoints(t.router,"ViewportScope",o,r,n,!1),i||st.matchKnownEndpoints(t.router,"Viewport",o,r,n,!1),st.matchViewportScopeSegment(t.router,t,o,r,n);null!==(a=o.next());)a.needsEndpointDescribed=!0;return st.matchViewportConfiguration(o,r,n),i||st.matchSpecifiedViewport(o,r,n,!1),st.matchLastViewport(o,r,n),i&&st.matchSpecifiedViewport(o,r,n,!1),{matchedInstructions:n,remainingInstructions:[...o]}}static matchKnownEndpoints(t,e,s,i,n,r=!1){let o;for(;null!==(o=s.next());)null===o.endpoint.instance||o.isAdd(t)||o.endpoint.endpointType!==e||(st.matchEndpoint(o,o.endpoint.instance,r),n.push(o),B(i,(t=>t===o.endpoint.instance)),s.removeCurrent())}static matchViewportScopeSegment(t,e,s,i,n){let r;for(;null!==(r=s.next());)for(let o of i)if(o instanceof _&&o.acceptSegment(r.component.name)){if(Array.isArray(o.source)){let s=i.find((t=>t instanceof _&&t.name===o.name));if(void 0===s||r.isAdd(t)){const t=o.addSourceItem();s=e.getOwnedScopes().filter((t=>t.isViewportScope)).map((t=>t.endpoint)).find((e=>e.sourceItem===t))}o=s}st.matchEndpoint(r,o,!1),n.push(r),B(i,(t=>t===r.endpoint.instance)),s.removeCurrent();break}}static matchViewportConfiguration(t,e,s){let i;for(;null!==(i=t.next());)for(const n of e)if(n instanceof J&&n?.wantComponent(i.component.name)){st.matchEndpoint(i,n,!0),s.push(i),B(e,(t=>t===i.endpoint.instance)),t.removeCurrent();break}}static matchSpecifiedViewport(t,e,s,i){let n;for(;null!==(n=t.next());){let r=n.endpoint.instance;if(null==r){const t=n.endpoint.name;if(0===(t?.length??0))continue;for(const s of e)if(s instanceof J&&t===s.name){r=s;break}}r?.acceptComponent(n.component.name)&&(st.matchEndpoint(n,r,i),s.push(n),B(e,(t=>t===n.endpoint.instance)),t.removeCurrent())}}static matchLastViewport(t,e,s){let i;for(;null!==(i=t.next());){const n=[];for(const t of e)t instanceof J&&t.acceptComponent(i.component.name)&&n.push(t);if(1===n.length){const r=n[0];st.matchEndpoint(i,r,!0),s.push(i),B(e,(t=>t===i.endpoint.instance)),t.removeCurrent()}}}static matchEndpoint(t,e,s){t.endpoint.set(e),s&&(t.needsEndpointDescribed=!1),t.hasNextScopeInstructions&&t.nextScopeInstructions.forEach((t=>{null===t.scope&&(t.scope=e instanceof J?e.scope:e.scope.scope)}))}}class it{constructor(t,e,s,i){this.router=t,this.hasScope=e,this.owningScope=s,this.endpointContent=i,this.id=-1,this.parent=null,this.children=[],this.id=++it.lastId,this.owningScope=s??this}static for(t,e){if(null==t)return{scope:null,instruction:e};if(t instanceof it||t instanceof J||t instanceof _)return{scope:t.scope,instruction:e};let s;if("res"in t)s=t;else if("container"in t)s=t.container;else if("$controller"in t)s=t.$controller.container;else{const e=i.b_N.for(t,{searchParents:!0});s=e?.container}if(null==s)return{scope:null,instruction:e};const n=s.has(gt.closestEndpointKey,!0)?s.get(gt.closestEndpointKey):null;let r=n?.scope??null;if(null===r||void 0===e){const t=e??"";return{scope:r,instruction:t.startsWith("/")?t.slice(1):e}}if(e.startsWith("/"))return{scope:null,instruction:e.slice(1)};for(;e.startsWith(".");)if(e.startsWith("./"))e=e.slice(2);else{if(!e.startsWith("../"))break;r=r.parent??r,e=e.slice(3)}return{scope:r,instruction:e}}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof J}get isViewportScope(){return this.endpoint instanceof _}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}get path(){return`${this.parent?.path??""}${this.routingInstruction?.stringify(this.router,!1,!0,!0)??""}${this.routingInstruction?I.for(this.router).scope:""}`}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.children.map((t=>t.toString(!0))).join(""):"")}toStringOwning(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}`+(t?"\n"+this.ownedScopes.map((t=>t.toStringOwning(!0))).join(""):"")}get enabledChildren(){return this.children.filter((t=>t.enabled))}get hoistedChildren(){const t=this.enabledChildren;for(;t.some((t=>t.passThroughScope));)for(const e of t.slice())if(e.passThroughScope){const s=t.indexOf(e);t.splice(s,1,...e.enabledChildren)}return t}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(t=!1){const e=this.allScopes(t).filter((t=>t.owningScope===this));for(const t of e.slice())if(t.passThroughScope){const s=e.indexOf(t);e.splice(s,1,...t.getOwnedScopes())}return e}async processInstructions(t,e,s,i,n=""){const r=this.router,o=r.configuration.options,a=t.filter((t=>!(t.route instanceof F)));if(a.length>0){const e=this.findInstructions(a,o.useDirectRouting,o.useConfiguredRoutes);!a.some((t=>!t.component.none||null!=t.route))||e.foundConfiguration||e.foundInstructions||this.unknownRoute(a),(t=[...t.filter((t=>t.route instanceof F)),...e.instructions]).some((t=>t.scope!==this))&&console.warn("Not the current scope for instruction(s)!",this,t),e.foundConfiguration&&(n=(n??"")+e.matching)}const h=Y.resolve(t);h instanceof Promise&&await h,o.additiveInstructionDefault||(t=this.ensureClearStateInstruction(t));let c=[];({clearEndpoints:c,instructions:t}=this.getClearAllEndpoints(t));for(const e of t.filter((t=>t.isAddAll(r))))e.endpoint.set(e.scope.endpoint.name),e.scope=e.scope.owningScope;let l=[],{matchedInstructions:u,remainingInstructions:d}=this.matchEndpoints(t,e),p=100;do{p--||r.unresolvedInstructionsError(s,d);const o=[],a=u.map((t=>t.endpoint.instance));u.push(...c.filter((t=>!a.includes(t))).map((t=>Y.createClear(r,t))));const h=await ut.invokeBeforeNavigation(u,s);if(!1===h)return r.cancelNavigation(s,i),[];if(!0!==h&&h!==u){const t=Y.flat(u);d=d.filter((e=>!t.includes(e))),u=h}for(const t of u){const a=t.endpoint.instance;if(null!==a){const h=a.setNextContent(t,s);"skip"!==h&&(o.push(a),i.addEndpoint(a));const d=[a];if("swap"===h&&d.push(...a.getContent().connectedScope.allScopes(!0).map((t=>t.endpoint))),B(c,(t=>d.includes(t))),B(u,(e=>e!==t&&e.isClear(r)&&d.includes(e.endpoint.instance))),!t.isClear(r)&&t.scope?.parent?.isViewportScope&&(B(c,(e=>e===t.scope.parent.endpoint)),B(u,(e=>e!==t&&e.isClear(r)&&e.endpoint.instance===t.scope.parent.endpoint))),"skip"!==h&&t.hasNextScopeInstructions)for(const e of t.nextScopeInstructions)e.scope=a.scope,e.endpoint.instance=null;"skip"!==h||t.hasNextScopeInstructions||l.push(...await a.scope.processInstructions([],e,s,i,n))}}const f=u.filter((t=>"skip"===t.endpoint.instance?.transitionAction)),g=f.filter((t=>t.hasNextScopeInstructions));if((0===f.length||0===g.length)&&(r.isRestrictedNavigation||i.finalEndpoint(),i.run(),i.hasAllEndpoints)){const t=i.waitForSyncState("guardedUnload");t instanceof Promise&&await t}if(i.cancelled)return r.cancelNavigation(s,i),[];for(const t of o)l.every((e=>e!==t))&&l.push(t);if(e.push(...u.splice(0)),d.length>0&&({matchedInstructions:u,remainingInstructions:d}=this.matchEndpoints(d,e)),!r.isRestrictedNavigation&&(u.length>0||d.length>0)&&i.running){const t=i.waitForSyncState("swapped");t instanceof Promise&&await t}if(0===u.length&&0===d.length){const r=[];for(const o of t){if(!o.hasNextScopeInstructions)continue;const t=o.endpoint.instance?.scope??o.endpoint.scope;r.push(t.processInstructions(o.nextScopeInstructions,e,s,i,n))}l.push(...(await Promise.all(r)).flat())}if(({matchedInstructions:u,remainingInstructions:d}=i.dequeueAppendedInstructions(u,e,d)),0===u.length&&0===d.length){const t=e.map((t=>t.endpoint.instance?.connectedCE.pendingPromise?.promise)).filter((t=>null!=t));t.length>0?(await Promise.any(t),({matchedInstructions:u,remainingInstructions:d}=i.dequeueAppendedInstructions(u,e,d))):u=c.map((t=>Y.createClear(r,t)))}const v=Y.resolve(u);v instanceof Promise&&await v,l=l.filter((t=>![...e].reverse().find((e=>e.endpoint.instance===t))?.cancelled))}while(u.length>0||d.length>0);return l}unknownRoute(t){const e=this.router.configuration.options,s=Y.stringify(this.router,t);throw null!=t[0].route?e.useConfiguredRoutes?new Error("No matching configured route found for '"+s+"'."):new Error("Can not match '"+s+"' since the router is configured to not use configured routes."):e.useConfiguredRoutes&&e.useDirectRouting?new Error("No matching configured route or component found for '"+s+"'."):e.useConfiguredRoutes?new Error("No matching configured route found for '"+s+"'."):new Error("No matching route/component found for '"+s+"'.")}ensureClearStateInstruction(t){const e=this.router;if(!t.some((t=>t.isClearAll(e)))){const s=Y.create(Y.clear(e));return s.scope=this,[s,...t]}return t}getClearAllEndpoints(t){const e=this.router;let s=[];return t.some((t=>(t.scope??this)===this&&t.isClearAll(e)))&&(s=this.enabledChildren.filter((t=>!t.endpoint.isEmpty)).map((t=>t.endpoint)),t=t.filter((t=>!((t.scope??this)===this&&t.isClearAll(e))))),{clearEndpoints:s,instructions:t}}findInstructions(t,e,s){const i=this.router;let n=new S;if(s&&!Y.containsSiblings(i,t)){let s=t.filter((t=>t.isClear(i)||t.isClearAll(i)));const r=t.filter((t=>!t.isClear(i)&&!t.isClearAll(i)));if(r.length>0)for(const o of r){const r="string"==typeof o.route?o.route:o.unparsed??Y.stringify(i,[o]),a=this.findMatchingRoute(r,o.parameters.parametersRecord??{});if(a.foundConfiguration)n=a,n.instructions=[...s,...n.instructions],s=[];else{if(!e)throw new Error(`No route found for: ${Y.stringify(i,t)}!`);n.instructions=[...s,...n.instructions,o],s=[],n.remaining=Y.stringify(i,o.nextScopeInstructions??[])}}else n.instructions=[...s]}else{if(!e)throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${Y.stringify(i,t)}!`);n.instructions.push(...t)}n.instructions=n.instructions.filter((t=>""!==t.component.name));for(const t of n.instructions)null===t.scope&&(t.scope=this);return n}matchEndpoints(t,e,s=!1){const i=[],n=t.filter((t=>(t.scope??this)===this)),r=t.filter((t=>(t.scope??this)!==this)),{matchedInstructions:o,remainingInstructions:a}=st.matchEndpoints(this,n,e,s);return i.push(...o),r.push(...a),{matchedInstructions:i,remainingInstructions:r}}addEndpoint(t,e,s,i={}){let n=this.getOwnedScopes().find((s=>s.type===t&&s.endpoint.name===e))?.endpoint??null;return null!=s&&null!=n?.connectedCE&&n.connectedCE!==s&&(n=this.getOwnedScopes(!0).find((i=>i.type===t&&i.endpoint.name===e&&i.endpoint.connectedCE===s))?.endpoint??null),null==n&&(n="Viewport"===t?new J(this.router,e,s,this.scope,!!i.scope,i):new _(this.router,e,s,this.scope,!0,null,i),this.addChild(n.connectedScope)),null!=s&&n.setConnectedCE(s,i),n}removeEndpoint(t,e,s){return!(null===(s??null)&&!e.removeEndpoint(t,s)||(this.removeChild(e.connectedScope),0))}addChild(t){this.children.some((e=>e===t))||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}allScopes(t=!1){const e=t?this.children.slice():this.enabledChildren;for(const s of e.slice())e.push(...s.allScopes(t));return e}reparentRoutingInstructions(){const t=this.hoistedChildren.filter((t=>null!==t.routingInstruction&&t.routingInstruction.component.name));if(!t.length)return null;for(const e of t){const t=e.reparentRoutingInstructions();e.routingInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map((t=>t.routingInstruction))}getChildren(t){return this.children.map((e=>e.endpoint.getTimeContent(t))).filter((t=>null!==t)).map((t=>t.connectedScope))}getAllRoutingScopes(t){const e=this.getChildren(t);for(const s of e.slice())e.push(...s.getAllRoutingScopes(t));return e}getOwnedRoutingScopes(t){const e=this.getAllRoutingScopes(t).filter((t=>t.owningScope===this));for(const s of e.slice())if(s.passThroughScope){const i=e.indexOf(s);e.splice(i,1,...s.getOwnedRoutingScopes(t))}return j(e)}getRoutingInstructions(t){const e=j(this.getOwnedRoutingScopes(t).map((t=>t.endpoint))).map((e=>e.getTimeContent(t))).filter((t=>null!==t)),s=[];for(const i of e){const e=i.instruction.clone(!0,!1,!1);""!==(e.component.name??"")&&(e.nextScopeInstructions=i.connectedScope.getRoutingInstructions(t),s.push(e))}return s}canUnload(t,e){return U.run(e,(e=>U.runParallel(e,...this.children.map((e=>null!==e.endpoint?s=>e.endpoint.canUnload(t,s):s=>e.canUnload(t,s))))),(t=>t.previousValue.every((t=>t))))}unload(t,e){return U.runParallel(e,...this.children.map((e=>null!==e.endpoint?s=>e.endpoint.unload(t,s):s=>e.unload(t,s))))}matchScope(t,e=!1){const s=[];for(const i of t)i.scope===this?s.push(i):e&&i.hasNextScopeInstructions&&s.push(...this.matchScope(i.nextScopeInstructions,e));return s}findMatchingRoute(t,e){let s=new S;if(this.isViewportScope&&!this.passThroughScope)s=this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes(),e);else if(this.isViewport)s=this.findMatchingRouteInRoutes(t,this.endpoint.getRoutes(),e);else for(const i of this.enabledChildren)if(s=i.findMatchingRoute(t,e),s.foundConfiguration)break;return s.foundConfiguration?s:null!=this.parent?this.parent.findMatchingRoute(t,e):s}findMatchingRouteInRoutes(t,e,s){const i=new S;if(0===e.length)return i;e=e.map((t=>this.ensureProperRoute(t)));const n=[];for(const t of e){const e=Array.isArray(t.path)?t.path:[t.path];for(const s of e)n.push({...t,path:s,handler:t}),""!==s&&n.push({...t,path:`${s}/*remainingPath`,handler:t})}(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const r=e.find((e=>e.id===t));let l={params:{},endpoint:{}};if(null!=r){l.endpoint={route:{handler:r}};const e=(t=Array.isArray(r.path)?r.path[0]:r.path).split("/").map((t=>{if(t.startsWith(":")){const e=t.slice(1).replace(/\?$/,""),i=s[e];return l.params[e]=i,i}return t}));t=e.join("/")}else{const e=new class{constructor(){this.rootState=new g(null,null,""),this.cache=new Map,this.endpointLookup=new Map}add(t,e=!1){let s,i;if(t instanceof Array)for(const n of t)i=this.$add(n,!1),s=i.params,e&&!s[s.length-1]?.isStar&&(i.residualEndpoint=this.$add({...n,path:`${n.path}/*${f}`},!0));else i=this.$add(t,!1),s=i.params,e&&!s[s.length-1]?.isStar&&(i.residualEndpoint=this.$add({...t,path:`${t.path}/*${f}`},!0));this.cache.clear()}$add(t,e){const s=t.path,i=this.endpointLookup;if(i.has(s))throw y(`Cannot add duplicate path '${s}'.`);const n=new a(s,!0===t.caseSensitive,t.handler),r=""===s?[""]:s.split("/").filter(v),c=[];let l=this.rootState;for(const t of r)switch(l=l.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),s=e?t.slice(1,-1):t.slice(1);if(s===f)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${f}' is used.`);c.push(new o(s,e,!1)),l=new w(s,e).appendTo(l);break}case"*":{const s=t.slice(1);let i;if(s===f){if(!e)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${f}' is used.`);i=1}else i=2;c.push(new o(s,!0,!0)),l=new b(s,i).appendTo(l);break}default:l=new m(t,n.caseSensitive).appendTo(l)}const u=new h(n,c);return l.setEndpoint(u),i.set(s,u),u}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new p(this.rootState);for(let s=0,i=t.length;s<i;++s){const i=t.charAt(s);if(e.advance(i),e.isEmpty)return null}const s=e.getSolution();if(null===s)return null;const{endpoint:i}=s,n=s.getParams();return new c(i,n)}getEndpoint(t){return this.endpointLookup.get(t)??null}};e.add(n),l=e.recognize(t)}if(null!=l){i.match=l.endpoint.route.handler,i.matching=t;const n={...l.params};if(null!=n.remainingPath&&(i.remaining=n.remainingPath,Reflect.deleteProperty(n,"remainingPath"),i.matching=i.matching.slice(0,i.matching.indexOf(i.remaining))),i.params=n,null!=i.match?.redirectTo){let t=i.match?.redirectTo;return(i.remaining??"").length>0&&(t+=`/${i.remaining}`),this.findMatchingRouteInRoutes(t,e,s)}}if(i.foundConfiguration){i.instructions=Y.clone(i.match.instructions,!1,!0);const t=i.instructions.slice();for(;t.length>0;){const e=t.shift();e.parameters.addParameters(i.params),e.route=i,e.hasNextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}i.instructions.length>0&&(i.instructions[0].routeStart=!0);const e=Y.parse(this.router,i.remaining);if(e.length>0){let t=i.instructions[0];for(;t.hasNextScopeInstructions;)t=t.nextScopeInstructions[0];t.nextScopeInstructions=e}}return i}ensureProperRoute(t){return void 0===t.id&&(t.id=Array.isArray(t.path)?t.path.join(","):t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),null===t.redirectTo&&(t.instructions=Y.from(this.router,t.instructions)),t}}it.lastId=0;class nt{constructor(t,e,s=0){this.taskQueue=t,this.item=e,this.cost=s,this.done=!1,this.promise=new Promise(((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}}))}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class rt{get isActive(){return null!==this.task}constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),0!==this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost??0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch((t=>{throw t}))))))}}get length(){return this.pending.length}start(t){this.platform=t.platform,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.platform.domWriteQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const s=Array.isArray(t),i=s?t:[t],n=i.map(((t,s)=>Array.isArray(e)?e[s]:e)).map((t=>void 0!==t?t:1)),r=[];for(const t of i)r.push(t instanceof nt?t:this.createQueueTask(t,n.shift()));return this.pending.push(...r),this.dequeue(),s?r:r[0]}createQueueTask(t,e){return new nt(this,t,e)}clear(){this.pending.length=0}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,s){e(s),this.processing=null,this.dequeue()}}let ot=class{constructor(t,e,s,i,n){this.platform=t,this.window=e,this.history=s,this.location=i,this.ea=n,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls=new rt}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:t,search:e,hash:s}=this.location,i=this.options.useUrlFragmentHash?s.slice(1):`${t}${e}`,n=this.options.useUrlFragmentHash?s.slice(1).includes("#")?s.slice(s.slice(1).indexOf("#",1)):"":s.slice(1);return new at(t,e.slice(1),n,i)}async go(t,e=!1){const s=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue([t=>{const i=s,n=e;this.forwardState({eventTask:i,suppressPopstate:n}),t.resolve()},e=>{const s=this.history,i=t;s.go(i),e.resolve()}],[0,1]),s.wait()}async pushNavigatorState(t){const{title:e,path:s}=t.navigations[t.navigationIndex],i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((n=>{const r=this.history,o=t,a=e||"",h=`${i}${s}`;try{r.pushState(o,a,h),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"push",t);r.pushState(e,a,h),this.setTitle(a)}n.resolve()}),1).wait()}async replaceNavigatorState(t,e,s){const i=t.navigations[t.navigationIndex];e??(e=i.title),s??(s=i.path);const n=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue((i=>{const r=this.history,o=t,a=e||"",h=`${n}${s}`;try{r.replaceState(o,a,h),this.setTitle(a)}catch(t){const e=this.tryCleanState(o,"replace",t);r.replaceState(e,a,h),this.setTitle(a)}i.resolve()}),1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask((t=>t.resolve()),1);return this.pendingCalls.enqueue((async e=>{const s=t;await this.popState(s),e.resolve()}),1),t.wait()}setTitle(t){this.window.document.title=t}handleEvent(t){this.handlePopStateEvent(t)}handlePopStateEvent(t){const{eventTask:e,suppressPopstate:s}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue((async i=>{s||this.notifySubscribers(t),null!==e&&await e.execute(),i.resolve()}),1)}notifySubscribers(t){this.ea.publish(ht.eventName,ht.create(this.viewerState,t,this.history.state))}async popState(t){await this.go(-1,!0);const e=this.history.state,s=e?.navigations?.[e?.navigationIndex??0];null==s||s.firstEntry||(await this.go(-1,!0),await this.pushNavigatorState(e)),await t.execute()}forwardState(t){this.forwardedState=t}tryCleanState(t,e,s){try{return JSON.parse(JSON.stringify(t))}catch(t){throw new Error(`Failed to ${e} state, probably due to unserializable data and/or parameters: ${t}${s}`)}}};ot=A([T(0,i.TIm),T(1,i.EmM),T(2,i.zQX),T(3,i.A8T),T(4,s.Rp)],ot);class at{constructor(t,e,s,i){this.path=t,this.query=e,this.hash=s,this.instruction=i}}class ht{constructor(t,e,s,i){this.eventName=t,this.viewerState=e,this.event=s,this.state=i}static create(t,e,s){return new ht(ht.eventName,t,e,s)}}ht.eventName="au:router:navigation-state-change";class ct{constructor(t){this.endpoint=t,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(t){return this.states.has(t)&&null===this.states.get(t)}}class lt{constructor(t,e){this.router=t,this.navigation=e,this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(t,e,s){const i=new lt(t,e);return s.syncStates.forEach((t=>i.addSyncState(t))),i}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.endpoint.transition(this))}}addSyncState(t){const e=new L;this.syncStates.set(t,e)}addEndpoint(t){const e=new ct(t);return this.entities.push(e),this.recheckSyncStates(),this.running&&e.endpoint.transition(this),e}removeEndpoint(t){const e=this.entities.find((e=>e.endpoint===t));void 0!==e&&B(this.entities,(t=>t===e))}setEndpointStep(t,e){let s=this.entities.find((e=>e.endpoint===t));void 0===s&&(s=this.addEndpoint(t)),s.step=e}getEndpointStep(t){const e=this.entities.find((e=>e.endpoint===t));return e?.step??null}addEndpointState(t,e){let s=this.entities.find((e=>e.endpoint===t));void 0===s&&(s=this.addEndpoint(t));const i=s.states.get(e);i instanceof L&&i.resolve(),s.states.set(e,null),this.checkSyncState(e)}waitForSyncState(t,e=null){if(0===this.entities.length)return;const s=this.syncStates.get(t);if(void 0!==s){if(null!==e){const i=this.entities.find((t=>t.endpoint===e));if(null===i?.syncPromise&&s.isPending)return i.syncingState=t,i.syncPromise=new L,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then((()=>{this.checkSyncState(t)})).catch((t=>{throw t})),i.syncPromise.promise}return s.isPending?s.promise:void 0}}waitForEndpointState(t,e){if(!this.syncStates.has(e))return;let s=this.entities.find((e=>e.endpoint===t));if(null==s&&(s=this.addEndpoint(t)),s.hasReachedState(e))return;let i=s.states.get(e);return null==i&&(i=new L,s.states.set(e,i)),i.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach(((t,e)=>this.checkSyncState(e)))}finalize(){this.entities.forEach((t=>t.endpoint.finalizeContentChange(this,null))),this.completed=!0,this.navigation.completed=!0}cancel(){this.cancelled=!0,this.entities.forEach((t=>{const e=t.endpoint.cancelContentChange(this);e instanceof Promise&&e.catch((t=>{throw t}))})),this.router.navigator.cancel(this.navigation).then((()=>{this.navigation.process?.resolve(!1)})).catch((t=>{throw t})),this.completed=!0,this.navigation.completed=!0}enqueueAppendedInstructions(t){this.appendedInstructions.push(...t)}dequeueAppendedInstructions(t,e,s){let i=[...this.appendedInstructions];t=[...t],s=[...s];const n=i.filter((t=>!t.default)),r=i.filter((t=>t.default));for(i=n.length>0?[...n]:[...r];i.length>0;){const n=i.shift();B(this.appendedInstructions,(t=>t===n));const r=e.some((t=>!t.cancelled&&t.sameEndpoint(n,!0))),o=t.find((t=>t.sameEndpoint(n,!0))),a=s.find((t=>t.sameEndpoint(n,!0)));n.default&&(r||void 0!==o&&!o.default||void 0!==a&&!a.default)||(void 0!==o&&B(t,(t=>t===o)),void 0!==a&&B(s,(t=>t===a)),null!==n.endpoint.instance?t.push(n):s.push(n))}return{matchedInstructions:t,remainingInstructions:s}}checkSyncState(t){const e=this.syncStates.get(t);if(void 0!==e&&this.hasAllEndpoints&&e.isPending&&this.entities.every((e=>e.hasReachedState(t)))&&(!this.checkedSyncStates.has(t)||this.entities.every((e=>e.checkedStates.includes(t))))){for(const e of this.entities)e.syncingState===t&&(e.syncPromise?.resolve(),e.syncPromise=null,e.syncingState=null);e.resolve()}}recheckSyncStates(){this.syncStates.forEach(((t,e)=>{t.isPending||this.entities.every((t=>t.hasReachedState(e)))||this.addSyncState(e)}))}}class ut{constructor(t,e,s){this.hook=t,this.id=s,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of e.include??[])this.includeTargets.push(new dt(t));for(const t of e.exclude??[])this.excludeTargets.push(new dt(t))}static add(t,e){const s=new ut(t,e??{},++this.lastIdentity);return this.hooks[s.type].push(s),this.lastIdentity}static remove(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const s=this.hooks[e].findIndex((e=>e.id===t));s>=0&&this.hooks[e].splice(s,1)}}static removeAll(){for(const t in this.hooks)this.hooks[t]=[]}static async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}static async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}static async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}static async invokeTransformTitle(t,e){return this.invoke("transformTitle",e,t)}static async invoke(t,e,s){let i=s;for(const n of this.hooks[t])if(!n.wantsMatch||n.matches(s))if(i=await n.invoke(e,s),"boolean"==typeof i){if(!i)return!1}else s=i;return i}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some((e=>e.matches(t)))||this.excludeTargets.length&&this.excludeTargets.some((e=>e.matches(t))))}invoke(t,e){return this.hook(e,t)}}ut.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]},ut.lastIdentity=0;class dt{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(N.isType(t))this.componentType=t,this.componentName=N.getName(t);else{const e=t;null!=e.component&&(this.componentType=N.isType(e.component)?N.getType(e.component):null,this.componentName=N.getName(e.component)),null!=e.viewport&&(this.viewport=X.isInstance(e.viewport)?e.viewport:null,this.viewportName=X.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(Y.create(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.component.name||null!==this.componentType&&this.componentType===t.component.type||null!==this.viewportName&&this.viewportName===t.endpoint.name||null!==this.viewport&&this.viewport===t.endpoint.instance)return!0;return!1}}class pt{static async getTitle(t,e,s){let i=await ut.invokeTransformTitle(t,e);if("string"!=typeof i){const t=pt.stringifyTitles(i,e,s);i=s.appTitle,i=i.replace(/\${componentTitles}/g,t),i=i.replace(/\${appTitleSeparator}/g,""!==t?s.appTitleSeparator:"")}return i=await ut.invokeTransformTitle(i,e),i}static stringifyTitles(t,e,s){return t.map((t=>pt.stringifyTitle(t,e,s))).filter((t=>(t?.length??0)>0)).join(" + ")}static stringifyTitle(t,e,s){const i=t.nextScopeInstructions;let n=pt.resolveTitle(t,e,s);if(Array.isArray(i)&&i.length>0){let t=pt.stringifyTitles(i,e,s);t.length>0&&(1!==i.length&&(t=`[ ${t} ]`),n=n.length>0?"top-down"===s.componentTitleOrder?n+s.componentTitleSeparator+t:t+s.componentTitleSeparator+n:t)}return n}static resolveTitle(t,e,s){let i=t.getTitle(e);return null!=s.transformTitle&&(i=s.transformTitle(i,t,e)),i}}const ft=s.DI.createInterface("IRouter",(t=>t.singleton(gt)));class gt{static get inject(){return[s.bE,s.Rp,tt,ot,ot,Dt]}constructor(t,e,s,i,n,r){this.container=t,this.ea=e,this.navigator=s,this.viewer=i,this.store=n,this.configuration=r,this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this.handleNavigatorNavigateEvent=t=>{this.processNavigation(t.navigation).catch((t=>{throw t}))},this.handleNavigatorStateChangeEvent=t=>{if(null!=t.state?.navigationIndex){const e=K.create(t.state.navigations[t.state.navigationIndex]);e.instruction=t.viewerState.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch((t=>{throw t}))}else this.load(t.viewerState.instruction,{fromBrowser:!0}).catch((t=>{throw t}))},this.processNavigation=async t=>{this.loadedFirst=!0;const e=this.configuration.options,s=lt.create(this,t,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(s),s.appendedInstructions.push(...this.appendedInstructions.splice(0)),this.ea.publish(yt.eventName,yt.create(t));let i="string"!=typeof t.instruction||t.useFullStateInstruction?t.useFullStateInstruction?t.fullStateInstruction:t.instruction:await ut.invokeTransformFromUrl(t.instruction,s.navigation);const n=e.basePath;null!==n&&"string"==typeof i&&i.startsWith(n)&&!e.useUrlFragmentHash&&(i=i.slice(n.length)),"/"===i&&(i=""),"string"==typeof i&&(i=""===i?[new Y("")]:Y.parse(this,i)),t.scope??(t.scope=this.rootScope.scope);const r=await t.scope.processInstructions(i,[],t,s);return U.run(null,(()=>(s.finalEndpoint(),s.waitForSyncState("completed"))),(()=>(s.finalize(),this.updateNavigation(t))),(()=>{t.navigation.new&&!t.navigation.first&&!t.repeating&&r.every((t=>t.options.noHistory))&&(t.untracked=!0)}),(async()=>{for(;this.coordinators.length>0&&this.coordinators[0].completed;){const t=this.coordinators.shift();await this.navigator.finalize(t.navigation,!1),this.ea.publish(St.eventName,St.create(t.navigation)),this.ea.publish(kt.eventName,kt.create(t.navigation)),t.navigation.process?.resolve(!0)}}))}}get isNavigating(){return this.coordinators.length>0}get isRestrictedNavigation(){const t=this.configuration.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.configuration.options.statefulHistoryLength&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw new Error("Router has already been started");this.isActive=!0;const t=this.container.get(i.IUY);this.rootScope=new _(this,"rootScope",t.controller.viewModel,null,!0,t.config.component);const e=this.configuration.options;if(null===e.basePath){const s=new URL(t.host.baseURI);e.basePath=s.pathname}e.basePath.endsWith("/")&&(e.basePath=e.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this.navigatorStateChangeEventSubscription=this.ea.subscribe(ht.eventName,this.handleNavigatorStateChangeEvent),this.navigatorNavigateEventSubscription=this.ea.subscribe(Z.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(mt.eventName,mt.create())}stop(){if(!this.isActive)throw new Error("Router has not been started");this.ea.publish(wt.eventName,wt.create()),this.navigator.stop(),this.viewer.stop(),this.navigatorStateChangeEventSubscription.dispose(),this.navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:t,hash:e}=this.viewer.viewerState,s=this.load(t,{fragment:e,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,s}getEndpoint(t,e){return this.allEndpoints(t).find((t=>t.name===e))??null}allEndpoints(t,e=!1){return this.rootScope.scope.allScopes(e).filter((e=>null===t||e.type===t)).map((t=>t.endpoint))}addEndpoint(t,...e){throw new Error("Not implemented")}connectEndpoint(t,e,i,n,r){const o=i.container,a=(o.has(gt.closestEndpointKey,!0)?o.get(gt.closestEndpointKey):this.rootScope).connectedScope;return null===t&&(t=a.addEndpoint(e,n,i,r),s.YM.instance(gt.closestEndpointKey,t).register(o)),t}disconnectEndpoint(t,e,s){if(!e.connectedScope.parent.removeEndpoint(t,e,s))throw new Error("Router failed to remove endpoint: "+e.name)}async load(t,e){e=e??{},t=this.extractFragment(t,e),t=this.extractQuery(t,e);let s=null;if(({instructions:t,scope:s}=this.applyLoadOptions(t,e)),e.append&&(!this.loadedFirst||this.isNavigating))return t=Y.from(this,t),this.appendInstructions(t,s),Promise.resolve();const i=K.create({instruction:t,fullStateInstruction:"",scope:s,title:e.title,data:e.data,query:e.query,fragment:e.fragment,parameters:e.parameters,replacing:(e.replacing??!1)||e.replace,repeating:e.append,fromBrowser:e.fromBrowser??!1,origin:e.origin,completed:!1});return this.navigator.navigate(i)}applyLoadOptions(t,e,s=!0){"origin"in(e=e??{})&&!("context"in e)&&(e.context=e.origin);const{scope:i,instruction:n}=it.for(e.context??null,"string"==typeof t?t:void 0);if("string"==typeof t)if(s)t=n;else{t=Y.from(this,n);for(const e of t)null===e.scope&&(e.scope=i)}else{t=Y.from(this,t);for(const e of t)null===e.scope&&(e.scope=i)}return{instructions:t,scope:i}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t,e){if("string"==typeof t)throw new Error(`Parameter instructions to checkActivate can not be a string ('${t}')!`);e=e??{},({instructions:t}=this.applyLoadOptions(t,e)),t.forEach((t=>t.scope??(t.scope=this.rootScope.scope)));const s=j(t.map((t=>t.scope)));for(const e of s){const s=e.matchScope(t,!1),i=e.matchScope(this.activeComponents,!0);if(!Y.contains(this,i,s,!0))return!1}return!0}unresolvedInstructionsError(t,e){throw this.ea.publish(At.eventName,At.create(t)),this.ea.publish(kt.eventName,kt.create(t)),function(t){const e=new Error(`${t.length} remaining instructions after 100 iterations; there is likely an infinite loop.`);return e.remainingInstructions=t,console.log(e,e.remainingInstructions),e}(e)}cancelNavigation(t,e){e.cancel(),this.ea.publish(Ct.eventName,Ct.create(t)),this.ea.publish(kt.eventName,kt.create(t))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const s of t)null===s.scope&&(s.scope=e);let s=null;for(let t=this.coordinators.length-1;t>=0;t--)if(!this.coordinators[t].completed){s=this.coordinators[t];break}if(null===s){if(this.loadedFirst)throw Error("Router failed to append routing instructions to coordinator");this.appendedInstructions.push(...t)}s?.enqueueAppendedInstructions(t)}async updateNavigation(t){this.rootScope.scope.reparentRoutingInstructions();const e=this.rootScope.scope.getRoutingInstructions(t.timestamp);let{matchedInstructions:s}=this.rootScope.scope.matchEndpoints(e,[],!0),i=100;for(;s.length>0;){if(0==i--)throw new Error("Router failed to find viewport when updating viewer paths.");s=s.map((t=>{const{matchedInstructions:e}=t.endpoint.instance.scope.matchEndpoints(t.nextScopeInstructions??[],[],!0);return e})).flat()}t.timestamp>=(this.activeNavigation?.timestamp??0)&&(this.activeNavigation=t,this.activeComponents=e);let n=await ut.invokeTransformToUrl(e,t);if("string"!=typeof n&&(n=Y.stringify(this,n,!1,!0)),n=await ut.invokeTransformToUrl(n,t),null==t.query&&null!=t.parameters){const e=new URLSearchParams;for(let[s,i]of Object.entries(t.parameters)){s=encodeURIComponent(s),Array.isArray(i)||(i=[i]);for(const t of i)e.append(s,encodeURIComponent(t))}t.query=e.toString()}let r=`${this.configuration.options.basePath}/`;(null===r||""!==n&&"/"===n[0]||this.configuration.options.useUrlFragmentHash)&&(r="");const o=(t.query?.length??0)>0?"?"+t.query:"",a=(t.fragment?.length??0)>0?"#"+t.fragment:"";t.path=r+n+o+a;const h=[Y.create(Y.clear(this))];if(h.push(...Y.clone(e,this.statefulHistory)),t.fullStateInstruction=h,null===(t.title??null)){const s=await pt.getTitle(e,t,this.configuration.options.title);null!==s&&(t.title=s)}return Promise.resolve()}extractFragment(t,e){if("string"==typeof t&&null==e.fragment){const[s,i]=t.split("#");t=s,e.fragment=i}return t}extractQuery(t,e){if("string"==typeof t&&null==e.query){const[s,i]=t.split("?");t=s,e.query=i}return"string"==typeof e.parameters&&null==e.query&&(e.query=e.parameters,e.parameters=void 0),"string"==typeof e.query&&e.query.length>0&&(e.parameters??(e.parameters={}),new URLSearchParams(e.query).forEach(((t,s)=>{s=decodeURIComponent(s),t=decodeURIComponent(t),s in e.parameters?(Array.isArray(e.parameters[s])||(e.parameters[s]=[e.parameters[s]]),e.parameters[s].push(t)):e.parameters[s]=t}))),t}}gt.closestEndpointKey=s.Protocol.annotation.keyFor("closest-endpoint");class vt{constructor(t){this.eventName=t}}class mt extends vt{static create(){return new mt(this.eventName)}}mt.eventName="au:router:router-start";class wt extends vt{static create(){return new wt(this.eventName)}}wt.eventName="au:router:router-stop";class bt{constructor(t,e){this.eventName=t,this.navigation=e}}class yt extends bt{static create(t){return new yt(this.eventName,t)}}yt.eventName="au:router:navigation-start";class kt extends bt{static create(t){return new kt(this.eventName,t)}}kt.eventName="au:router:navigation-end";class Ct extends bt{static create(t){return new Ct(this.eventName,t)}}Ct.eventName="au:router:navigation-cancel";class St extends bt{static create(t){return new St(this.eventName,t)}}St.eventName="au:router:navigation-complete";class At extends bt{static create(t){return new At(this.eventName,t)}}At.eventName="au:router:navigation-error";const Tt=s.DI.createInterface("ILinkHandler",(t=>t.singleton($t)));let $t=class{constructor(t,e){this.window=t,this.router=e}handleEvent(t){this.handleClick(t)}handleClick(t){if(0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;const e=t.currentTarget;if(e.hasAttribute("external"))return;const s=e.getAttribute("target")??"";if(s.length>0&&s!==this.window.name&&"_self"!==s)return;const n=i.brw.for(e,"load"),r=void 0!==n?n.viewModel.value:null,o=this.router.configuration.options.useHref&&e.hasAttribute("href")?e.getAttribute("href"):null;if(!(null!==r&&0!==r.length||null!==o&&0!==o.length))return;t.preventDefault();let a=r??o??"";"string"==typeof a&&a.startsWith("#")&&(a=a.slice(1),a.startsWith("/")||(a=`/${a}`)),this.router.load(a,{origin:e}).catch((t=>{throw t}))}};var xt;function It(t,e,s,i,n=!1){if(n)return""===e;if(s)return e;const r=i.getAttribute(t)??"";return r.length>0?r:e}function Rt(t,e){if(!t.isActive)return new Promise((t=>{const s=e.subscribe(mt.eventName,(()=>{t(),s.dispose()}))}))}function Et(t,e,s,n){let r=i.brw.for(s,"considered-active")?.viewModel?.value;void 0===r&&(r=n);const o=t.applyLoadOptions(r,{context:e}),a=Y.from(t,o.instructions);for(const t of a)null===t.scope&&(t.scope=o.scope);return a}function Ot(t){let e=t.parentElement;for(;null!=e;){if("AU-VIEWPORT"===e.tagName){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return e??(e=t),e}$t=A([T(0,i.EmM),T(1,ft)],$t),function(t){t.default="default",t.disallow="disallow",t.reload="reload",t.refresh="refresh"}(xt||(xt={}));const Pt=i.b_N.createInjectable();let Mt=class{constructor(t,e,s,i,n,r){this.router=t,this.element=e,this.container=s,this.ea=i,this.parentViewport=n,this.instruction=r,this.name="default",this.usedBy="",this.default="",this.fallback="",this.fallbackAction="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1}hydrated(t){this.controller=t,this.container=t.container;const e=this.instruction.props.filter((t=>"default"===t.to)).length>0;return e&&null!=this.parentViewport&&(this.parentViewport.pendingChildren.push(this),null===this.parentViewport.pendingPromise&&(this.parentViewport.pendingPromise=new L)),U.run(null,(()=>Rt(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation&&this.connect()}))}binding(t,e){return this.isBound=!0,U.run(null,(()=>Rt(this.router,this.ea)),(()=>{this.router.isRestrictedNavigation||this.connect()}),(()=>{null!=this.endpoint?.activeResolve&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)}),(()=>{if(null!==this.endpoint&&null===this.endpoint.getNextContent())return this.endpoint.activate(null,t,this.controller,void 0)?.asValue}))}detaching(t,e){if(null!==this.endpoint)return this.isBound=!1,this.endpoint.deactivate(null,t,e)}unbinding(t,e){if(null!==this.endpoint)return this.disconnect(null)}dispose(){this.endpoint?.dispose(),this.endpoint=null}connect(){const{isBound:t,element:e}=this,s=It("name",this.name,t,e),i={};i.scope=!It("no-scope",this.noScope,!1,e,!0),i.usedBy=It("used-by",this.usedBy,t,e),i.default=It("default",this.default,t,e),i.fallback=It("fallback",this.fallback,t,e),i.fallbackAction=It("fallback-action",this.fallbackAction,t,e),i.noLink=It("no-link",this.noLink,t,e,!0),i.noTitle=It("no-title",this.noTitle,t,e,!0),i.noHistory=It("no-history",this.noHistory,t,e,!0),i.stateful=It("stateful",this.stateful,t,e,!0),Object.keys(i).forEach((t=>{void 0===i[t]&&delete i[t]})),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,s,i);const n=this.parentViewport;null!=n&&(B(n.pendingChildren,(t=>t===this)),0===n.pendingChildren.length&&null!==n.pendingPromise&&(n.pendingPromise.resolve(),n.pendingPromise=null))}disconnect(t){null!==this.endpoint&&this.router.disconnectEndpoint(t,this.endpoint,this)}setActivity(t,e){const s=this.router.configuration.options.indicators.viewportNavigating;if("string"==typeof t)this.element.classList.toggle(t,e);else for(const i in t)this.element.classList.toggle(`${s}-${i}`,e&&t[i])}};A([i.ExJ],Mt.prototype,"name",void 0),A([i.ExJ],Mt.prototype,"usedBy",void 0),A([i.ExJ],Mt.prototype,"default",void 0),A([i.ExJ],Mt.prototype,"fallback",void 0),A([i.ExJ],Mt.prototype,"fallbackAction",void 0),A([i.ExJ],Mt.prototype,"noScope",void 0),A([i.ExJ],Mt.prototype,"noLink",void 0),A([i.ExJ],Mt.prototype,"noTitle",void 0),A([i.ExJ],Mt.prototype,"noHistory",void 0),A([i.ExJ],Mt.prototype,"stateful",void 0),Mt=A([(0,i.MoW)({name:"au-viewport",injectable:Pt}),T(0,ft),T(1,i.ND1),T(2,s.bE),T(3,s.Rp),T(4,Pt),T(5,i.PEj)],Mt);const Nt=i.b_N.createInjectable();let Bt=class{constructor(t,e,s,i,n){this.router=t,this.element=e,this.container=s,this.parent=i,this.parentController=n,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1}hydrated(t){this.controller=t}bound(t,e){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.binding()}unbinding(t,e){return null!==this.viewportScope&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let s=this.getAttribute("catches",this.catches);void 0!==s&&(e.catches=s),s=this.getAttribute("collection",this.collection,!0),void 0!==s&&(e.collection=s),e.source=this.source||null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,s=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(s)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};A([i.ExJ],Bt.prototype,"name",void 0),A([i.ExJ],Bt.prototype,"catches",void 0),A([i.ExJ],Bt.prototype,"collection",void 0),A([i.ExJ],Bt.prototype,"source",void 0),Bt=A([(0,i.MoW)({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:Nt}),T(0,ft),T(1,i.ND1),T(2,s.bE),T(3,Nt),T(4,i.qN_)],Bt);let jt=class{constructor(t,e,s,i){this.element=t,this.router=e,this.linkHandler=s,this.ea=i,this.h=!1,this.hasHref=null,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){null==this.value&&(this.h=!0),this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(kt.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(t){this.updateValue(),this.updateActive()}updateValue(){if(this.h&&(this.value={component:this.component,parameters:this.parameters,viewport:this.viewport,id:this.id}),null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let t=this.value;if("string"!=typeof t){const e=Y.from(this.router,t).shift(),s=this.u(t);s.foundConfiguration&&(e.route=s.matching),t=Y.stringify(this.router,[e])}const{scope:e,instruction:s}=it.for(this.element,t);t=`${e?.path??""}${s??""}`,this.router.configuration.options.useUrlFragmentHash&&!t.startsWith("#")&&(t=`#/${t}`),this.element.setAttribute("href",t)}}async updateActive(){const t=i.brw.for(this.element,"load").parent,e="string"==typeof this.value?{id:this.value,path:this.value}:this.value,s=this.u(e),n=s.foundConfiguration?s.instructions:Et(this.router,t,this.element,this.value);Ot(this.element).classList.toggle(this.activeClass,this.router.checkActive(n,{context:t}))}u(t){if("string"==typeof t)return new S;const e=it.for(this.element).scope??this.router.rootScope.scope;if(null!=t.id)return e.findMatchingRoute(t.id,t.parameters??{});const s=t.path;return null!=s?e.findMatchingRoute(s,t.parameters??{}):new S}};A([(0,i.ExJ)({mode:2})],jt.prototype,"value",void 0),A([i.ExJ],jt.prototype,"component",void 0),A([i.ExJ],jt.prototype,"parameters",void 0),A([i.ExJ],jt.prototype,"viewport",void 0),A([i.ExJ],jt.prototype,"id",void 0),jt=A([(0,i.OVJ)("load"),T(0,i.ND1),T(1,ft),T(2,Tt),T(3,s.Rp)],jt);let Lt=class{constructor(t,e,s,i){this.element=t,this.router=e,this.linkHandler=s,this.ea=i,this.navigationEndHandler=t=>{this.updateActive()},this.activeClass=this.router.configuration.options.indicators.loadActive}binding(){!this.router.configuration.options.useHref||this.hasLoad()||this.element.hasAttribute("external")||(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(kt.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription?.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const t=i.brw.for(this.element,"href").parent,e=Et(this.router,t,this.element,this.value);Ot(this.element).classList.toggle(this.activeClass,this.router.checkActive(e,{context:t}))}}hasLoad(){const t=this.$controller.parent.children;return t?.some((t=>1===t.vmKind&&t.viewModel instanceof jt))??!1}};A([(0,i.ExJ)({mode:2})],Lt.prototype,"value",void 0),Lt=A([(0,i.OVJ)({name:"href",noMultiBindings:!0}),T(0,i.ND1),T(1,ft),T(2,Tt),T(3,s.Rp)],Lt);let Ut=class{};A([(0,i.ExJ)({mode:2})],Ut.prototype,"value",void 0),Ut=A([(0,i.OVJ)("considered-active")],Ut);const Dt=s.DI.createInterface("IRouterConfiguration",(t=>t.singleton(Wt))),Ft=[ft],Vt=[Mt,Bt,jt,Lt,Ut];class Wt{static register(t){const e=t.get(Dt);return e.options=Wt.options,e.options.setRouterConfiguration(e),Wt.options=E.create(),t.register(...Ft,...Vt,i.FdA.activating(ft,Wt.configurationCall),i.FdA.activated(ft,(t=>t.initialLoad())),i.FdA.deactivated(ft,(t=>t.stop())))}static customize(t){return void 0===t?(Wt.options=E.create(),Wt.configurationCall=t=>{t.start()}):t instanceof Function?Wt.configurationCall=t:(Wt.options=E.create(),Wt.options.apply(t)),Wt}static createContainer(){return this.register(s.DI.createContainer())}static for(t){return t instanceof gt?t.configuration:t.get(Dt)}apply(t,e=!1){e&&(this.options=E.create()),this.options.apply(t)}addHook(t,e){return ut.add(t,e)}removeHook(t){return ut.remove(t)}removeAllHooks(){return ut.removeAll()}}Wt.options=E.create(),Wt.configurationCall=t=>{t.start()};var _t=n(58);n(968);const qt=_t.o.getOrCreate(globalThis);class Ht extends i.EQ_{constructor(t=function(){return s.DI.createContainer().register(s.YM.instance(i.TIm,qt),i.BkS)}()){super(t)}static start(t){return(new Ht).start(t)}static app(t){return(new Ht).app(t)}static enhance(t,e){return(new Ht).enhance(t,e)}static register(...t){return(new Ht).register(...t)}app(t){if(i.b_N.isType(t)){const e=i.b_N.getDefinition(t);let s=document.querySelector(e.name);return null===s&&(s=document.body),super.app({host:s,component:t})}return super.app(t)}}function Kt(t){return"object"==typeof t&&null!==t||"function"==typeof t}function zt(t){return null==t}let Gt=new WeakMap;const Qt=(t,e,s,i,n)=>new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${s}' to be of type ${n}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`);function Jt(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function Xt(t,e,s){let i=Gt.get(t);if(void 0===i){if(!s)return;i=new Map,Gt.set(t,i)}let n=i.get(e);if(void 0===n){if(!s)return;n=new Map,i.set(e,n)}return n}function Yt(t,e,s){const i=Xt(e,s,!1);return void 0!==i&&i.has(t)}function Zt(t,e,s){if(Yt(t,e,s))return!0;const i=be(e);return null!==i&&Zt(t,i,s)}function te(t,e,s){const i=Xt(e,s,!1);if(void 0!==i)return i.get(t)}function ee(t,e,s){if(Yt(t,e,s))return te(t,e,s);const i=be(e);return null!==i?ee(t,i,s):void 0}function se(t,e,s,i){Xt(s,i,!0).set(t,e)}function ie(t,e){const s=[],i=Xt(t,e,!1);if(void 0===i)return s;const n=i.keys();let r=0;for(const t of n)s[r]=t,++r;return s}function ne(t,e){const s=ie(t,e),i=be(t);if(null===i)return s;const n=ne(i,e),r=s.length;if(0===r)return n;const o=n.length;if(0===o)return s;const a=new Set,h=[];let c,l=0;for(let t=0;t<r;++t)c=s[t],a.has(c)||(a.add(c),h[l]=c,++l);for(let t=0;t<o;++t)c=n[t],a.has(c)||(a.add(c),h[l]=c,++l);return h}function re(t,e){return function(s,i){if(!Kt(s))throw Qt("@metadata",[t,e,s,i],"target",s,"Object or Function");se(t,e,s,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(i))}}function oe(t,e,s,i){if(void 0!==s){if(!Array.isArray(t))throw Qt("Metadata.decorate",[t,e,s,i],"decorators",t,"Array");if(!Kt(e))throw Qt("Metadata.decorate",[t,e,s,i],"target",e,"Object or Function");if(!Kt(i)&&!zt(i))throw Qt("Metadata.decorate",[t,e,s,i],"attributes",i,"Object, Function, null, or undefined");return null===i&&(i=void 0),function(t,e,s,i){for(let n=t.length-1;n>=0;--n){const r=(0,t[n])(e,s,i);if(!zt(r)){if(!Kt(r))throw Qt("DecorateProperty",[t,e,s,i],"decorated",r,"Object, Function, null, or undefined");i=r}}return i}(t,e,s=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(s),i)}if(!Array.isArray(t))throw Qt("Metadata.decorate",[t,e,s,i],"decorators",t,"Array");if("function"!=typeof e)throw Qt("Metadata.decorate",[t,e,s,i],"target",e,"Function");return function(t,e){for(let s=t.length-1;s>=0;--s){const i=(0,t[s])(e);if(!zt(i)){if("function"!=typeof i)throw Qt("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function ae(t,e,s,i){if(!Kt(s))throw Qt("Metadata.define",[t,e,s,i],"target",s,"Object or Function");return se(t,e,s,Jt(i))}function he(t,e,s){if(!Kt(e))throw Qt("Metadata.has",[t,e,s],"target",e,"Object or Function");return Zt(t,e,Jt(s))}function ce(t,e,s){if(!Kt(e))throw Qt("Metadata.hasOwn",[t,e,s],"target",e,"Object or Function");return Yt(t,e,Jt(s))}function le(t,e,s){if(!Kt(e))throw Qt("Metadata.get",[t,e,s],"target",e,"Object or Function");return ee(t,e,Jt(s))}function ue(t,e,s){if(!Kt(e))throw Qt("Metadata.getOwn",[t,e,s],"target",e,"Object or Function");return te(t,e,Jt(s))}function de(t,e){if(!Kt(t))throw Qt("Metadata.getKeys",[t,e],"target",t,"Object or Function");return ne(t,Jt(e))}function pe(t,e){if(!Kt(t))throw Qt("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return ie(t,Jt(e))}function fe(t,e,s){if(!Kt(e))throw Qt("Metadata.delete",[t,e,s],"target",e,"Object or Function");return function(t,e,s){const i=Xt(t,s,!1);return void 0!==i&&i.delete(e)}(e,t,Jt(s))}const ge={define:ae,has:he,hasOwn:ce,get:le,getOwn:ue,getKeys:de,getOwnKeys:pe,delete:fe},ve="[[$au]]",me=(t,e,s)=>[[ve,Gt],["metadata",re],["decorate",oe],["defineMetadata",ae],["hasMetadata",he],["hasOwnMetadata",ce],["getMetadata",le],["getOwnMetadata",ue],["getMetadataKeys",de],["getOwnMetadataKeys",pe],["deleteMetadata",fe]].forEach((([i,n])=>((t,e,s,i,n)=>{if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:n,value:s}))throw we(`AUR1000:${e}`)})(t,i,n,e,s))),we=t=>new Error(t),be=Object.getPrototypeOf,ye=String,ke=ge.getOwn,Ce=ge.hasOwn,Se=ge.define,Ae=t=>"function"==typeof t,Te=t=>"string"==typeof t,$e=()=>Object.create(null),xe=t=>new Error(t),Ie={},Re=t=>{switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=Ie[t];if(void 0!==e)return e;const s=t.length;if(0===s)return Ie[t]=!1;let i=0,n=0;for(;n<s;++n)if(i=_e(t,n),0===n&&48===i&&s>1||i<48||i>57)return Ie[t]=!1;return Ie[t]=!0}default:return!1}},Ee=function(){const t=Object.assign($e(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,s)=>{const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",h=0,c=t.charAt(0),l=e(c),u=0;for(;u<i;++u)n=h,a=c,h=l,c=t.charAt(u+1),l=e(c),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===l),o+=s(a,r),r=!1);return o}}(),Oe=function(){const t=$e(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=Ee(s,e)),i}}(),Pe=function(){const t=$e();return e=>{let s=t[e];return void 0===s&&(s=Oe(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),Me=function(){const t=$e(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=Ee(s,e)),i}}(),Ne=t=>{const e=t.length,s=Array(e);let i=0;for(;i<e;++i)s[i]=t[i];return s},Be=(t,e,s)=>({configurable:!0,enumerable:s.enumerable,get(){const t=s.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:s.enumerable}),t}}),je=(...t)=>{const e=[];let s=0;const i=t.length;let n,r=0,o=0;for(;o<i;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[s++]=n[t]}return e},Le=(...t)=>{const e=t.length;let s,i=0;for(;e>i;++i)if(s=t[i],void 0!==s)return s;throw xe("No default value found")},Ue=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i,n=t,r=0;return function(o){if(i=s.get(o),void 0===i)for(s.set(o,i=[n=o]),r=0;(n=e(n))!==t;)i[++r]=n;return i}}();function De(...t){return Object.assign($e(),...t)}const Fe=function(){const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),void 0===e&&(s=n.toString(),i=s.length,e=i>=29&&i<=100&&125===_e(s,i-1)&&_e(s,i-2)<=32&&93===_e(s,i-3)&&101===_e(s,i-4)&&100===_e(s,i-5)&&111===_e(s,i-6)&&99===_e(s,i-7)&&32===_e(s,i-8)&&101===_e(s,i-9)&&118===_e(s,i-10)&&105===_e(s,i-11)&&116===_e(s,i-12)&&97===_e(s,i-13)&&110===_e(s,i-14)&&88===_e(s,i-15),t.set(n,e)),e)}(),Ve=(t,e)=>t instanceof Promise?t.then(e):e(t),We=(...t)=>{let e,s,i,n=0,r=t.length;for(;n<r;++n)e=t[n],(e=t[n])instanceof Promise&&(void 0===s?s=e:void 0===i?i=[s,e]:i.push(e));return void 0===i?s:Promise.all(i)},_e=(t,e)=>t.charCodeAt(e),qe="au:annotation",He=(t,e)=>void 0===e?`${qe}:${t}`:`${qe}:${t}:${e}`,Ke=(t,e)=>{const s=ke(qe,t);void 0===s?Se(qe,[e],t):s.push(e)},ze=Object.freeze({name:"au:annotation",appendTo:Ke,set(t,e,s){Se(He(e),s,t)},get:(t,e)=>ke(He(e),t),getKeys(t){let e=ke(qe,t);return void 0===e&&Se(qe,e=[],t),e},isKey:t=>t.startsWith(qe),keyFor:He}),Ge="au:resource",Qe=Object.freeze({name:Ge,appendTo(t,e){const s=ke(Ge,t);void 0===s?Se(Ge,[e],t):s.push(e)},has:t=>Ce(Ge,t),getAll(t){const e=ke(Ge,t);return void 0===e?si:e.map((e=>ke(e,t)))},getKeys(t){let e=ke(Ge,t);return void 0===e&&Se(Ge,e=[],t),e},isKey:t=>t.startsWith(Ge),keyFor:(t,e)=>void 0===e?`${Ge}:${t}`:`${Ge}:${t}:${e}`}),Je={annotation:ze,resource:Qe},Xe=Object.prototype.hasOwnProperty;function Ye(t,e,s,i){let n=ke(He(t),s);return void 0===n?(n=e[t],void 0===n?(n=s[t],void 0!==n&&Xe.call(s,t)?n:i()):n):n}function Ze(t,e,s){let i=ke(He(t),e);return void 0===i?(i=e[t],void 0!==i&&Xe.call(e,t)?i:s()):i}function ts(t,e,s){const i=e[t];return void 0===i?s():i}const es=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let ss=0;class is{constructor(t,e){this.parent=t,this.config=e,this.id=++ss,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=$e()):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign($e(),t.res,this.root.res):this.res=$e()),this.u.set(Ns,os)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw us(t);let e,s,i,n,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],Kt(e))if(as(e))e.register(this);else if(Je.resource.has(e)){const t=Je.resource.getAll(e);if(1===t.length)t[0].register(this);else for(n=0,r=t.length;r>n;)t[n].register(this),++n}else if(cs(e))Zs.singleton(e,e).register(this);else for(s=Object.keys(e),n=0,r=s.length;n<r;++n)i=e[s[n]],Kt(i)&&(as(i)?i.register(this):this.register(i));return--this.t,this}registerResolver(t,e,s=!1){ns(t);const i=this.u,n=i.get(t);if(null==n){if(i.set(t,e),ls(t)){if(void 0!==this.res[t])throw ds(t);this.res[t]=e}}else n instanceof Hs&&4===n.R?n._state.push(e):i.set(t,new Hs(t,4,[n,e]));return s&&this.i.set(t,e),e}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(ns(t),void 0!==t.resolve)return t;let s,i,n=this;for(;null!=n;){if(s=n.u.get(t),null!=s)return s;if(null==n.parent)return i=hs(t)?this:n,e?this.$(t,i):null;n=n.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(ns(t),t.$isResolver)return t.resolve(this,this);let e,s,i=this;for(;null!=i;){if(e=i.u.get(t),null!=e)return e.resolve(i,this);if(null==i.parent)return s=hs(t)?this:i,e=this.$(t,s),e.resolve(i,this);i=i.parent}throw ps(t)}getAll(t,e=!1){ns(t);const s=this;let i,n=s;if(e){let e=si;for(;null!=n;)i=n.u.get(t),null!=i&&(e=e.concat(rs(i,n,s))),n=n.parent;return e}for(;null!=n;){if(i=n.u.get(t),null!=i)return rs(i,n,s);if(n=n.parent,null==n)return si}return si}invoke(t,e){if(Fe(t))throw ws(t);return void 0===e?new t(...Es(t).map(Qs,this)):new t(...Es(t).map(Qs,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(Fe(t))throw ws(t);this.h.set(t,e=new Xs(t,Es(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===xs.DEFAULT?new is(this,this.config):new is(this,xs.from({...this.config,inheritParentResources:!1})):new is(this,xs.from(t??this.config))}disposeResolvers(){const t=this.u,e=this.i;let s,i;for([i,s]of e.entries())s.dispose(),t.delete(i);e.clear()}find(t,e){const s=t.keyFrom(e);let i=this.res[s];if(void 0===i&&(i=this.root.res[s],void 0===i))return null;if(null===i)return null;if(Ae(i.getFactory)){const e=i.getFactory(this);if(null==e)return null;const s=ke(t.name,e.Type);return void 0===s?null:s}return null}create(t,e){const s=t.keyFrom(e);let i=this.res[s];return void 0===i?(i=this.root.res[s],void 0===i?null:i.resolve(this.root,this)??null):i.resolve(this,this)??null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}$(t,e){if(!Ae(t))throw fs(t);if(es.has(t.name))throw gs(t);if(as(t)){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.u.get(t);if(null!=s)return s;throw vs()}return s}if(Je.resource.has(t)){const s=Je.resource.getAll(t);if(1===s.length)s[0].register(e);else{const t=s.length;for(let i=0;i<t;++i)s[i].register(e)}const i=e.u.get(t);if(null!=i)return i;throw vs()}if(t.$isInterface)throw ms(t.friendlyName);{const s=this.config.defaultResolver(t,e);return e.u.set(t,s),s}}}function ns(t){if(null==t)throw xe("AUR0014")}const rs=(t,e,s)=>{if(t instanceof Hs&&4===t.R){const i=t._state;let n=i.length;const r=new Array(n);for(;n--;)r[n]=i[n].resolve(e,s);return r}return[t.resolve(e,s)]},os={$isResolver:!0,resolve:(t,e)=>e},as=t=>Ae(t.register),hs=t=>(t=>as(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,cs=t=>void 0!==t.prototype,ls=t=>Te(t)&&t.indexOf(":")>0,us=t=>xe(`AUR0006:${t.map(ye)}`),ds=t=>xe(`AUR0007:${ye(t)}`),ps=t=>xe(`AUR0008:${ye(t)}`),fs=t=>xe(`AUR0009:${ye(t)}`),gs=t=>xe(`AUR0010:${t.name}`),vs=()=>xe("AUR0011"),ms=t=>xe(`AUR0012:${t}`),ws=t=>xe(`AUR0015:${t.name}`),bs=(t,e)=>new Hs(t,0,e),ys=(t,e)=>new Hs(t,1,e),ks=new WeakMap,Cs=t=>(e,s,i)=>{let n=ks.get(e);if(void 0===n&&ks.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r};((t,e=!0,s=!1,i=!0,n=!0)=>{if((t=>ve in t)(t)){if(t[ve]===Gt)return;if(t[ve]instanceof WeakMap)return void(Gt=t[ve]);throw we("AUR1001")}const r="metadata decorate defineMetadata hasMetadata hasOwnMetadata getMetadata getOwnMetadata getMetadataKeys getOwnMetadataKeys deleteMetadata".split(" ").filter((t=>t in Reflect));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw we(`AUR1002:${t}`)}s&&me(t,i,n)}else me(t,i,n)})(Reflect,!1,!1);class Ss{constructor(t,e){this.c=t,this.k=e}instance(t){return this.C(0,t)}singleton(t){return this.C(1,t)}transient(t){return this.C(2,t)}callback(t){return this.C(3,t)}cachedCallback(t){return this.C(3,Cs(t))}aliasTo(t){return this.C(5,t)}C(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new Hs(i,t,e))}}const As=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],Re(n)||(e[n]=t[n]);return e},Ts={none(t){throw $s(t)},singleton:t=>new Hs(t,1,t),transient:t=>new Hs(t,2,t)},$s=t=>xe(`AUR0002:${ye(t)}`);class xs{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===xs.DEFAULT?xs.DEFAULT:new xs(t.inheritParentResources??!1,t.defaultResolver??Ts.singleton)}}xs.DEFAULT=xs.from({});const Is=t=>{const e=He("di:paramtypes");return ke(e,t)},Rs=t=>{const e=He("di:paramtypes");let s=ke(e,t);return void 0===s&&(Se(e,s=[],t),Ke(t,e)),s},Es=t=>{const e=He("di:dependencies");let s=ke(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=Ms.getDesignParamtypes(t),i=Is(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=Ae(e)&&e!==Function.prototype?As(Es(e)):[]}else s=As(i);else if(void 0===i)s=As(e);else{s=As(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],Re(a)||(s[a]=i[a])}}else s=As(i);Se(e,s,t),Ke(t,e)}return s},Os=(t,e)=>{const s=Ae(t)?t:e,i=Te(t)?t:void 0,n=function(t,e,s){if(null==t||void 0!==new.target)throw Ps(n.friendlyName);Rs(t)[s]=n};return n.$isInterface=!0,n.friendlyName=null==i?"(anonymous)":i,null!=s&&(n.register=(t,e)=>s(new Ss(t,e??n))),n.toString=()=>`InterfaceSymbol<${n.friendlyName}>`,n},Ps=t=>xe(`AUR0001:${t}`),Ms={createContainer:t=>new is(null,xs.from(t)),getDesignParamtypes:t=>ke("design:paramtypes",t),getAnnotationParamtypes:Is,getOrCreateAnnotationParamTypes:Rs,getDependencies:Es,createInterface:Os,inject:(...t)=>(e,s,i)=>{if("number"==typeof i){const s=Rs(e),n=t[0];void 0!==n&&(s[i]=n)}else if(s){const i=Rs(e.constructor),n=t[0];void 0!==n&&(i[s]=n)}else if(i){const e=i.value,s=Rs(e);let n,r=0;for(;r<t.length;++r)n=t[r],void 0!==n&&(s[r]=n)}else{const s=Rs(e);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(s[n]=i)}},transient:t=>(t.register=function(e){return Zs.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=Fs)=>(t.register=function(e){return Zs.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)},Ns=Os("IContainer"),Bs=Ns;function js(t){return function(e){const s=function(t,e,i){Ls(s)(t,e,i)};return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const Ls=Ms.inject;function Us(t){return Ms.transient(t)}function Ds(t){return null==t?Us:Us(t)}const Fs={scoped:!1};Ms.singleton;const Vs=(t,e)=>{e=!!e;const s=function(t,e,i){Ls(s)(t,e,i)};return s.$isResolver=!0,s.resolve=function(s,i){return((t,e,s,i)=>s.getAll(t,i))(t,0,i,e)},s},Ws=(js(((t,e,s)=>()=>s.get(t))),js(((t,e,s)=>s.has(t,!0)?s.get(t):void 0))),_s=(t,e,s)=>{Ls(_s)(t,e,s)};_s.$isResolver=!0,_s.resolve=()=>{},js(((t,e,s)=>(...i)=>e.getFactory(t).construct(s,i))),js(((t,e,s)=>{const i=qs(t,e,s),n=new ti(ye(t),i);return s.registerResolver(t,n,!0),i})),js(((t,e,s)=>qs(t,e,s)));const qs=(t,e,s)=>e.getFactory(t).construct(s);class Hs{constructor(t,e,s){this.k=t,this.R=e,this._state=s,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.R){case 0:return this._state;case 1:if(this.resolving)throw Ks(this._state.name);return this.resolving=!0,this._state=t.getFactory(this._state).construct(e),this.R=0,this.resolving=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw zs(this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw Gs(this.R)}}getFactory(t){switch(this.R){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;default:return null}}}const Ks=t=>xe(`AUR0003:${t}`),zs=t=>xe(`AUR0004:${ye(t)}`),Gs=t=>xe(`AUR0005:${t}`);function Qs(t){return this.get(t)}function Js(t,e){return e(t)}class Xs{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let s;return s=void 0===e?new this.Type(...this.dependencies.map(Qs,t)):new this.Type(...this.dependencies.map(Qs,t),...e),null==this.transformers?s:this.transformers.reduce(Js,s)}registerTransformer(t){(this.transformers??(this.transformers=[])).push(t)}}class Ys{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const Zs={instance:bs,singleton:ys,transient:(t,e)=>new Hs(t,2,e),callback:(t,e)=>new Hs(t,3,e),cachedCallback:(t,e)=>new Hs(t,3,Cs(e)),aliasTo:(t,e)=>new Hs(e,5,t),defer:(t,...e)=>new Ys(t,e)};class ti{constructor(t,e){this.A=null,this.j=t,void 0!==e&&(this.A=e)}get friendlyName(){return this.j}prepare(t){this.A=t}get $isResolver(){return!0}resolve(){if(null==this.A)throw ei(this.j);return this.A}dispose(){this.A=null}}const ei=t=>xe(`AUR0013:${t}`),si=Object.freeze([]),ii=Object.freeze({});function ni(){}const ri=Os("IPlatform");function oi(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}function ai(t,e){return function(s,i){e(s,i,t)}}var hi,ci;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(hi||(hi={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(ci||(ci={}));const li=Os("ILogConfig",(t=>t.instance(new mi(0,3)))),ui=Os("ISink"),di=Os("ILogEventFactory",(t=>t.singleton(ki))),pi=Os("ILogger",(t=>t.singleton(Si))),fi=Os("ILogScope"),gi=Object.freeze({key:He("logger-sink-handles"),define(t,e){return Se(this.key,e.handles,t.prototype),t},getHandles(t){return ge.get(this.key,t)}}),vi=De({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class mi{constructor(t,e){this.colorOptions=t,this.level=e}}const wi=function(){const t=[De({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),De({TRC:vi.grey("TRC"),DBG:vi.grey("DBG"),INF:vi.white("INF"),WRN:vi.yellow("WRN"),ERR:vi.red("ERR"),FTL:vi.red("FTL"),QQQ:vi.grey("???")})];return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),bi=(t,e)=>0===e?new Date(t).toISOString():vi.grey(new Date(t).toISOString());class yi{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${bi(n,i)} [${wi(t,i)}] ${e}`:`${bi(n,i)} [${wi(t,i)} ${((t,e)=>0===e?t.join("."):t.map(vi.cyan).join("."))(s,i)}] ${e}`}}let ki=class{constructor(t){this.config=t}createLogEvent(t,e,s,i){return new yi(e,s,i,t.scope,this.config.colorOptions,Date.now())}};ki=oi([ai(0,li)],ki);let Ci=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const s=t.optionalParams;if(void 0===s||0===s.length){const s=t.toString();switch(t.severity){case 0:case 1:return e.debug(s);case 2:return e.info(s);case 3:return e.warn(s);case 4:case 5:return e.error(s)}}else{let i=t.toString(),n=0;for(;i.includes("%s");)i=i.replace("%s",String(s[n++]));switch(t.severity){case 0:case 1:return e.debug(i,...s.slice(n));case 2:return e.info(i,...s.slice(n));case 3:return e.warn(i,...s.slice(n));case 4:case 5:return e.error(i,...s.slice(n))}}}}static register(e){ys(ui,t).register(e)}};Ci=oi([ai(0,ri)],Ci);let Si=class t{constructor(t,e,s,i=[],n=null){let r,o,a,h,c,l;if(this.scope=i,this.I=$e(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.O=[],o=this.M=[],a=this.F=[],h=this.L=[],c=this.U=[],l=this.T=[];for(const t of s){const e=gi.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&a.push(t),(e?.includes(3)??1)&&h.push(t),(e?.includes(4)??1)&&c.push(t),(e?.includes(5)??1)&&l.push(t)}}else this.root=n.root,this.parent=n,r=this.O=n.O,o=this.M=n.M,a=this.F=n.F,h=this.L=n.L,c=this.U=n.U,l=this.T=n.T}trace(t,...e){this.config.level<=0&&this.P(this.O,0,t,e)}debug(t,...e){this.config.level<=1&&this.P(this.M,1,t,e)}info(t,...e){this.config.level<=2&&this.P(this.F,2,t,e)}warn(t,...e){this.config.level<=3&&this.P(this.L,3,t,e)}error(t,...e){this.config.level<=4&&this.P(this.U,4,t,e)}fatal(t,...e){this.config.level<=5&&this.P(this.T,5,t,e)}scopeTo(e){const s=this.I;let i=s[e];return void 0===i&&(i=s[e]=new t(this.config,this.f,void 0,this.scope.concat(e),this)),i}P(t,e,s,i){const n=Ae(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}};oi([Be],Si.prototype,"trace",null),oi([Be],Si.prototype,"debug",null),oi([Be],Si.prototype,"info",null),oi([Be],Si.prototype,"warn",null),oi([Be],Si.prototype,"error",null),oi([Be],Si.prototype,"fatal",null),Si=oi([ai(0,li),ai(1,di),ai(2,Vs(ui)),ai(3,Ws(fi)),ai(4,_s)],Si),De({create:({level:t=3,colorOptions:e=0,sinks:s=[]}={})=>De({register(i){i.register(bs(li,new mi(e,t)));for(const t of s)Ae(t)?i.register(ys(ui,t)):i.register(t);return i}})}),Os((t=>t.singleton($i)));const Ai=t=>t;class Ti{constructor(t){this.N=new Map,this.W=new Map,this.B=t}transform(t){if(t instanceof Promise)return this._(t);if("object"==typeof t&&null!==t)return this.G(t);throw xe(`Invalid input: ${String(t)}. Expected Promise or Object.`)}_(t){if(this.N.has(t))return this.N.get(t);const e=t.then((t=>this.G(t)));return this.N.set(t,e),e.then((e=>{this.N.set(t,e)})),e}G(t){if(this.W.has(t))return this.W.get(t);const e=this.B(this.K(t));return this.W.set(t,e),e instanceof Promise&&e.then((e=>{this.W.set(t,e)})),e}K(t){if(null==t)throw new Error(`Invalid input: ${String(t)}. Expected Object.`);if("object"!=typeof t)return new xi(t,[]);let e,s,i,n;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;s=Ae(e.register),i=!1,n=si;break;case"function":s=Ae(e.register),i=void 0!==e.prototype,n=Je.resource.getAll(e);break;default:continue}r.push(new Ii(o,e,s,i,n))}return new xi(t,r)}}class $i{constructor(){this.transformers=new Map}load(t,e=Ai){const s=this.transformers;let i=s.get(e);return void 0===i&&s.set(e,i=new Ti(e)),i.transform(t)}dispose(){this.transformers.clear()}}class xi{constructor(t,e){this.raw=t,this.items=e}}class Ii{constructor(t,e,s,i,n){this.key=t,this.value=e,this.isRegistry=s,this.isConstructable=i,this.definitions=n}}class Ri{constructor(t,e){this.type=t,this.cb=e}handle(t){t instanceof this.type&&this.cb.call(null,t)}}Os("IEventAggregator",(t=>t.singleton(Ei)));class Ei{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw xe(`Invalid channel name or instance: ${t}.`);if(Te(t)){let s=this.eventLookup[t];if(void 0!==s){s=s.slice();let i=s.length;for(;i-- >0;)s[i](e,t)}}else{const e=this.messageHandlers.slice();let s=e.length;for(;s-- >0;)e[s].handle(t)}}subscribe(t,e){if(!t)throw xe(`Invalid channel name or type: ${t}.`);let s,i;return Te(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),s=e,i=this.eventLookup[t]):(s=new Ri(t,e),i=this.messageHandlers),i.push(s),{dispose(){const t=i.indexOf(s);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const s=this.subscribe(t,((t,i)=>{s.dispose(),e(t,i)}));return s}}const Oi=Ms.createInterface("IGoogleMapsConfiguration",(t=>t.singleton(Pi)));class Pi{constructor(){this._config={apiScript:"https://maps.googleapis.com/maps/api/js",apiKey:"",client:"",apiLibraries:"",region:"",language:"",options:{},markerCluster:{enable:!1,src:"https://cdn.rawgit.com/googlemaps/v3-utility-library/99a385c1/markerclusterer/src/markerclusterer.js",imagePath:"https://raw.githubusercontent.com/googlemaps/v3-utility-library/99a385c1/markerclusterer/images/m",imageExtension:"png"}}}getOptions(){return this._config}options(t){Object.assign(this._config,t,{markerCluster:Object.assign({},this._config.markerCluster,t.markerCluster)})}get(t){return this._config[t]}set(t,e){return this._config[t]=e,this._config[t]}}const Mi=Object,Ni=Mi.prototype.hasOwnProperty,Bi=Reflect.defineProperty,ji=t=>new Error(t),Li=t=>"function"==typeof t,Ui=t=>t instanceof Mi,Di=t=>t instanceof Array,Fi=t=>t instanceof Set,Vi=t=>t instanceof Map,Wi=Mi.is;function _i(t,e,s){return Bi(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s}function qi(t,e,s){e in t||_i(t,e,s)}const Hi=String,Ki=Ms.createInterface,zi=()=>Mi.create(null),Gi=ge.getOwn;ge.hasOwn;const Qi=ge.define;var Ji;Je.annotation.keyFor,Je.resource.keyFor,Je.resource.appendTo,function(t){t[t.AccessThis=0]="AccessThis",t[t.AccessScope=1]="AccessScope",t[t.ArrayLiteral=2]="ArrayLiteral",t[t.ObjectLiteral=3]="ObjectLiteral",t[t.PrimitiveLiteral=4]="PrimitiveLiteral",t[t.Template=5]="Template",t[t.Unary=6]="Unary",t[t.CallScope=7]="CallScope",t[t.CallMember=8]="CallMember",t[t.CallFunction=9]="CallFunction",t[t.AccessMember=10]="AccessMember",t[t.AccessKeyed=11]="AccessKeyed",t[t.TaggedTemplate=12]="TaggedTemplate",t[t.Binary=13]="Binary",t[t.Conditional=14]="Conditional",t[t.Assign=15]="Assign",t[t.ArrowFunction=16]="ArrowFunction",t[t.ValueConverter=17]="ValueConverter",t[t.BindingBehavior=18]="BindingBehavior",t[t.ArrayBindingPattern=19]="ArrayBindingPattern",t[t.ObjectBindingPattern=20]="ObjectBindingPattern",t[t.BindingIdentifier=21]="BindingIdentifier",t[t.ForOfStatement=22]="ForOfStatement",t[t.Interpolation=23]="Interpolation",t[t.ArrayDestructuring=24]="ArrayDestructuring",t[t.ObjectDestructuring=25]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=26]="DestructuringAssignmentLeaf",t[t.DestructuringAssignmentRestLeaf=27]="DestructuringAssignmentRestLeaf",t[t.Custom=28]="Custom"}(Ji||(Ji={}));class Xi{constructor(t){this.value=t,this.$kind=28}evaluate(t,e,s){return this.value}assign(t,e,s){return s}bind(t,e){}unbind(t,e){}accept(t){}}class Yi{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=18,this.key=`_bb_${e}`}}class Zi{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=17}}class tn{constructor(t,e){this.target=t,this.value=e,this.$kind=15}}class en{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind=14}}class sn{constructor(t=0){this.ancestor=t,this.$kind=0}}sn.$this=new sn(0),sn.$parent=new sn(1);class nn{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=1}}class rn{constructor(t,e,s=!1){this.object=t,this.name=e,this.optional=s,this.$kind=10}}class on{constructor(t,e,s=!1){this.object=t,this.key=e,this.optional=s,this.$kind=11}}class an{constructor(t,e,s=0,i=!1){this.name=t,this.args=e,this.ancestor=s,this.optional=i,this.$kind=7}}class hn{constructor(t,e,s,i=!1,n=!1){this.object=t,this.name=e,this.args=s,this.optionalMember=i,this.optionalCall=n,this.$kind=8}}class cn{constructor(t,e,s=!1){this.func=t,this.args=e,this.optional=s,this.$kind=9}}class ln{constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind=13}}class un{constructor(t,e){this.operation=t,this.expression=e,this.$kind=6}}class dn{constructor(t){this.value=t,this.$kind=4}}dn.$undefined=new dn(void 0),dn.$null=new dn(null),dn.$true=new dn(!0),dn.$false=new dn(!1),dn.$empty=new dn("");class pn{constructor(t){this.elements=t,this.$kind=2}}pn.$empty=new pn(si);class fn{constructor(t,e){this.keys=t,this.values=e,this.$kind=3}}fn.$empty=new fn(si,si);class gn{constructor(t,e=si){this.cooked=t,this.expressions=e,this.$kind=5}}gn.$empty=new gn([""]);class vn{constructor(t,e,s,i=si){this.cooked=t,this.func=s,this.expressions=i,this.$kind=12,t.raw=e}}class mn{constructor(t){this.elements=t,this.$kind=19}}class wn{constructor(t,e){this.keys=t,this.values=e,this.$kind=20}}class bn{constructor(t){this.name=t,this.$kind=21}}class yn{constructor(t,e,s){this.declaration=t,this.iterable=e,this.semiIdx=s,this.$kind=22}}class kn{constructor(t,e=si){this.parts=t,this.expressions=e,this.$kind=23,this.isMulti=e.length>1,this.firstExpression=e[0]}}class Cn{constructor(t,e,s,i){this.$kind=t,this.list=e,this.source=s,this.initializer=i}}class Sn{constructor(t,e,s){this.target=t,this.source=e,this.initializer=s,this.$kind=26}}class An{constructor(t,e,s=!1){this.args=t,this.body=e,this.rest=s,this.$kind=16}}class Tn{constructor(t,e){void 0!==t&&(this[t]=e)}}class $n{constructor(t,e,s,i){this.parent=t,this.bindingContext=e,this.overrideContext=s,this.isBoundary=i}static getContext(t,e,s){if(null==t)throw xn();let i=t.overrideContext,n=t;if(s>0){for(;s>0;)if(s--,n=n.parent,null==n)return;return i=n.overrideContext,e in i?i:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(i=n.overrideContext,e in i?i:n.bindingContext)}static create(t,e,s){if(null==t)throw In();return new $n(null,t,null==e?new Rn:e,s??!1)}static fromParent(t,e){if(null==t)throw xn();return new $n(t,e,new Rn,!1)}}const xn=()=>ji("AUR0203"),In=()=>ji("AUR0204");class Rn{}const En=$n.getContext;function On(t,e,s,i){switch(t.$kind){case 0:{let s=e.overrideContext,i=e,n=t.ancestor;for(;n--&&s;)i=i.parent,s=i?.overrideContext??null;return n<1&&i?i.bindingContext:void 0}case 1:{const n=En(e,t.name,t.ancestor);null!==i&&i.observe(n,t.name);const r=n[t.name];if(null==r&&"$host"===t.name)throw ji("AUR0105");return s?.strict?s?.boundFn&&Li(r)?r.bind(n):r:null==r?"":s?.boundFn&&Li(r)?r.bind(n):r}case 2:return t.elements.map((t=>On(t,e,s,i)));case 3:{const n={};for(let r=0;r<t.keys.length;++r)n[t.keys[r]]=On(t.values[r],e,s,i);return n}case 4:return t.value;case 5:{let n=t.cooked[0];for(let r=0;r<t.expressions.length;++r)n+=String(On(t.expressions[r],e,s,i)),n+=t.cooked[r+1];return n}case 6:switch(t.operation){case"void":return void On(t.expression,e,s,i);case"typeof":return typeof On(t.expression,e,s,i);case"!":return!On(t.expression,e,s,i);case"-":return-On(t.expression,e,s,i);case"+":return+On(t.expression,e,s,i);default:throw ji(`AUR0109:${t.operation}`)}case 7:{const n=t.args.map((t=>On(t,e,s,i))),r=En(e,t.name,t.ancestor),o=Un(s?.strictFnCall,r,t.name);return o?o.apply(r,n):void 0}case 8:{const n=On(t.object,e,s,i),r=t.args.map((t=>On(t,e,s,i))),o=Un(s?.strictFnCall,n,t.name);let a;return o&&(a=o.apply(n,r),Di(n)&&Vn.includes(t.name)&&i?.observeCollection(n)),a}case 9:{const n=On(t.func,e,s,i);if(Li(n))return n(...t.args.map((t=>On(t,e,s,i))));if(!s?.strictFnCall&&null==n)return;throw ji("AUR0107")}case 16:{const n=(...n)=>{const r=t.args,o=t.rest,a=r.length-1,h=r.reduce(((t,e,s)=>(t[e.name]=o&&s===a?n.slice(s):n[s],t)),{}),c=$n.fromParent(e,h);return On(t.body,c,s,i)};return n}case 10:{const n=On(t.object,e,s,i);let r;return s?.strict?null==n?n:(null!==i&&i.observe(n,t.name),r=n[t.name],s?.boundFn&&Li(r)?r.bind(n):r):(null!==i&&Ui(n)&&i.observe(n,t.name),n?(r=n[t.name],s?.boundFn&&Li(r)?r.bind(n):r):"")}case 11:{const n=On(t.object,e,s,i);if(Ui(n)){const r=On(t.key,e,s,i);return null!==i&&i.observe(n,r),n[r]}return}case 12:{const n=t.expressions.map((t=>On(t,e,s,i))),r=On(t.func,e,s,i);if(!Li(r))throw ji("AUR0110");return r(t.cooked,...n)}case 13:{const n=t.left,r=t.right;switch(t.operation){case"&&":return On(n,e,s,i)&&On(r,e,s,i);case"||":return On(n,e,s,i)||On(r,e,s,i);case"??":return On(n,e,s,i)??On(r,e,s,i);case"==":return On(n,e,s,i)==On(r,e,s,i);case"===":return On(n,e,s,i)===On(r,e,s,i);case"!=":return On(n,e,s,i)!=On(r,e,s,i);case"!==":return On(n,e,s,i)!==On(r,e,s,i);case"instanceof":{const t=On(r,e,s,i);return!!Li(t)&&On(n,e,s,i)instanceof t}case"in":{const t=On(r,e,s,i);return!!Ui(t)&&On(n,e,s,i)in t}case"+":{const t=On(n,e,s,i),o=On(r,e,s,i);if(s?.strict)return t+o;if(!t||!o){if(Dn(t)||Dn(o))return(t||0)+(o||0);if(Fn(t)||Fn(o))return(t||"")+(o||"")}return t+o}case"-":return On(n,e,s,i)-On(r,e,s,i);case"*":return On(n,e,s,i)*On(r,e,s,i);case"/":return On(n,e,s,i)/On(r,e,s,i);case"%":return On(n,e,s,i)%On(r,e,s,i);case"<":return On(n,e,s,i)<On(r,e,s,i);case">":return On(n,e,s,i)>On(r,e,s,i);case"<=":return On(n,e,s,i)<=On(r,e,s,i);case">=":return On(n,e,s,i)>=On(r,e,s,i);default:throw ji(`AUR0108:${t.operation}`)}}case 14:return On(t.condition,e,s,i)?On(t.yes,e,s,i):On(t.no,e,s,i);case 15:return Pn(t.target,e,s,On(t.value,e,s,i));case 17:{const n=s?.getConverter?.(t.name);if(null==n)throw ji(`AUR0103:${t.name}`);return"toView"in n?n.toView(On(t.expression,e,s,i),...t.args.map((t=>On(t,e,s,i)))):On(t.expression,e,s,i)}case 18:return On(t.expression,e,s,i);case 21:return t.name;case 22:return On(t.iterable,e,s,i);case 23:if(t.isMulti){let n=t.parts[0],r=0;for(;r<t.expressions.length;++r)n+=Hi(On(t.expressions[r],e,s,i)),n+=t.parts[r+1];return n}return`${t.parts[0]}${On(t.firstExpression,e,s,i)}${t.parts[1]}`;case 26:return On(t.target,e,s,i);case 24:return t.list.map((t=>On(t,e,s,i)));case 19:case 20:case 25:default:return;case 28:return t.evaluate(e,s,i)}}function Pn(t,e,s,i){switch(t.$kind){case 1:if("$host"===t.name)throw ji("AUR0106");return En(e,t.name,t.ancestor)[t.name]=i;case 10:{const n=On(t.object,e,s,null);return Ui(n)?"length"===t.name&&Di(n)&&!isNaN(i)?n.splice(i):n[t.name]=i:Pn(t.object,e,s,{[t.name]:i}),i}case 11:{const n=On(t.object,e,s,null),r=On(t.key,e,s,null);if(Di(n)){if("length"===r&&!isNaN(i))return n.splice(i),i;if(Re(r))return n.splice(r,1,i),i}return n[r]=i}case 15:return Pn(t.value,e,s,i),Pn(t.target,e,s,i);case 17:{const n=s?.getConverter?.(t.name);if(null==n)throw Ln(t.name);return"fromView"in n&&(i=n.fromView(i,...t.args.map((t=>On(t,e,s,null))))),Pn(t.expression,e,s,i)}case 18:return Pn(t.expression,e,s,i);case 24:case 25:{const n=t.list,r=n.length;let o,a;for(o=0;o<r;o++)switch(a=n[o],a.$kind){case 26:Pn(a,e,s,i);break;case 24:case 25:{if("object"!=typeof i||null===i)throw ji("AUR0112");let t=On(a.source,$n.create(i),s,null);void 0===t&&a.initializer&&(t=On(a.initializer,e,s,null)),Pn(a,e,s,t);break}}break}case 26:if(t instanceof Sn){if(null==i)return;if("object"!=typeof i)throw ji("AUR0112");let n=On(t.source,$n.create(i),s,null);void 0===n&&t.initializer&&(n=On(t.initializer,e,s,null)),Pn(t.target,e,s,n)}else{if(null==i)return;if("object"!=typeof i)throw ji("AUR0112");const n=t.indexOrProperties;let r;if(Re(n)){if(!Array.isArray(i))throw ji("AUR0112");r=i.slice(n)}else r=Object.entries(i).reduce(((t,[e,s])=>(n.includes(e)||(t[e]=s),t)),{});Pn(t.target,e,s,r)}break;case 28:return t.assign(e,s,i);default:return}}function Mn(t,e,s){switch(t.$kind){case 18:{const i=t.name,n=t.key,r=s.getBehavior?.(i);if(null==r)throw Bn(i);if(void 0!==s[n])throw jn(i);return s[n]=r,r.bind?.(e,s,...t.args.map((t=>On(t,e,s,null)))),void Mn(t.expression,e,s)}case 17:{const i=t.name,n=s.getConverter?.(i);if(null==n)throw Ln(i);const r=n.signals;if(null!=r){const t=s.getSignaler?.(),e=r.length;let i=0;for(;i<e;++i)t?.addSignalListener(r[i],s)}return void Mn(t.expression,e,s)}case 22:Mn(t.iterable,e,s);break;case 28:t.bind?.(e,s)}}function Nn(t,e,s){switch(t.$kind){case 18:{const i=t.key,n=s;void 0!==n[i]&&(n[i].unbind?.(e,s),n[i]=void 0),Nn(t.expression,e,s);break}case 17:{const i=s.getConverter?.(t.name);if(void 0===i?.signals)return;const n=s.getSignaler?.();let r=0;for(;r<i.signals.length;++r)n?.removeSignalListener(i.signals[r],s);Nn(t.expression,e,s);break}case 22:Nn(t.iterable,e,s);break;case 28:t.unbind?.(e,s)}}const Bn=t=>ji(`AUR0101:${t}`),jn=t=>ji(`AUR0102:${t}`),Ln=t=>ji(`AUR0103:${t}`),Un=(t,e,s)=>{const i=null==e?null:e[s];if(Li(i))return i;if(!t&&null==i)return null;throw ji(`AUR0111:${s}`)},Dn=t=>{switch(typeof t){case"number":case"bigint":return!0;default:return!1}},Fn=t=>{switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}},Vn="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" "),Wn=Ms.createInterface("ICoercionConfiguration");var _n,qn;function Hn(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}!function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(_n||(_n={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(qn||(qn={}));new Map;function Kn(t){return null==t?zn:zn(t)}function zn(t){const e=t.prototype;Bi(e,"subs",{get:Qn}),qi(e,"subscribe",Jn),qi(e,"unsubscribe",Xn)}class Gn{constructor(){this.count=0,this.t=[]}add(t){return!this.t.includes(t)&&(this.t[this.t.length]=t,++this.count,!0)}remove(t){const e=this.t.indexOf(t);return-1!==e&&(this.t.splice(e,1),--this.count,!0)}notify(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleChange(t,e)}notifyCollection(t,e){const s=this.t.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleCollectionChange(t,e)}}function Qn(){return _i(this,"subs",new Gn)}function Jn(t){return this.subs.add(t)}function Xn(t){return this.subs.remove(t)}class Yn{constructor(t){this.owner=t,this.type=18,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleCollectionChange(t,e){const s=this.v,i=this.o.length;(this.v=i)!==s&&this.subs.notify(this.v,s)}}class Zn{constructor(t){this.owner=t,this.v=(this.o=t.collection).size,this.type=Vi(this.o)?66:34}getValue(){return this.o.size}setValue(){throw ji("AUR02")}handleCollectionChange(t,e){const s=this.v,i=this.o.size;(this.v=i)!==s&&this.subs.notify(this.v,s)}}function tr(t){const e=t.prototype;qi(e,"subscribe",er),qi(e,"unsubscribe",sr),Kn(t)}function er(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function sr(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}tr(Yn),tr(Zn);const ir="__au_array_obs__",nr=(()=>{let t=Gi(ir,Array);return null==t&&Qi(ir,t=new WeakMap,Array),t})();function rr(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function or(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function ar(t,e,s,i,n){let r,o,a,h,c,l,u;for(l=s+1;l<i;l++){for(r=t[l],o=e[l],u=l-1;u>=s&&(a=t[u],h=e[u],c=n(a,r),c>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function hr(t,e,s,i,n){let r,o,a,h,c,l,u,d,p,f,g,v,m,w,b,y,k,C,S,A=0,T=0;for(;;){if(i-s<=10)return void ar(t,e,s,i,n);A=s+(i-s>>1),r=t[s],h=e[s],o=t[i-1],c=e[i-1],a=t[A],l=e[A],u=n(r,o),u>0&&(f=r,g=h,r=o,h=c,o=f,c=g),d=n(r,a),d>=0?(f=r,g=h,r=a,h=l,a=o,l=c,o=f,c=g):(p=n(o,a),p>0&&(f=o,g=c,o=a,c=l,a=f,l=g)),t[s]=r,e[s]=h,t[i-1]=a,e[i-1]=l,v=o,m=c,w=s+1,b=i-1,t[A]=t[w],e[A]=e[w],t[w]=v,e[w]=m;t:for(T=w+1;T<b;T++)if(y=t[T],k=e[T],C=n(y,v),C<0)t[T]=t[w],e[T]=e[w],t[w]=y,e[w]=k,w++;else if(C>0){do{if(b--,b==T)break t;S=t[b],C=n(S,v)}while(C>0);t[T]=t[b],e[T]=e[b],t[b]=y,e[b]=k,C<0&&(y=t[T],k=e[T],t[T]=t[w],e[T]=e[w],t[w]=y,e[w]=k,w++)}i-b<w-s?(hr(t,e,b,i,n),i=w):(hr(t,e,s,w,n),s=b)}}const cr=Array.prototype,lr=cr.push,ur=cr.unshift,dr=cr.pop,pr=cr.shift,fr=cr.splice,gr=cr.reverse,vr=cr.sort,mr=["push","unshift","pop","shift","splice","reverse","sort"],wr={push:function(...t){const e=nr.get(this);if(void 0===e)return lr.apply(this,t);const s=this.length,i=t.length;if(0===i)return s;this.length=e.indexMap.length=s+i;let n=s;for(;n<this.length;)this[n]=t[n-s],e.indexMap[n]=-2,n++;return e.notify(),this.length},unshift:function(...t){const e=nr.get(this);if(void 0===e)return ur.apply(this,t);const s=t.length,i=new Array(s);let n=0;for(;n<s;)i[n++]=-2;ur.apply(e.indexMap,i);const r=ur.apply(this,t);return e.notify(),r},pop:function(){const t=nr.get(this);if(void 0===t)return dr.call(this);const e=t.indexMap,s=dr.call(this),i=e.length-1;return e[i]>-1&&(e.deletedIndices.push(e[i]),e.deletedItems.push(s)),dr.call(e),t.notify(),s},shift:function(){const t=nr.get(this);if(void 0===t)return pr.call(this);const e=t.indexMap,s=pr.call(this);return e[0]>-1&&(e.deletedIndices.push(e[0]),e.deletedItems.push(s)),pr.call(e),t.notify(),s},splice:function(...t){const e=t[0],s=t[1],i=nr.get(this);if(void 0===i)return fr.apply(this,t);const n=this.length,r=0|e,o=r<0?Math.max(n+r,0):Math.min(r,n),a=i.indexMap,h=t.length,c=0===h?0:1===h?n-o:s;let l=o;if(c>0){const t=l+c;for(;l<t;)a[l]>-1&&(a.deletedIndices.push(a[l]),a.deletedItems.push(this[l])),l++}if(l=0,h>2){const t=h-2,i=new Array(t);for(;l<t;)i[l++]=-2;fr.call(a,e,s,...i)}else fr.apply(a,t);const u=fr.apply(this,t);return(c>0||l>0)&&i.notify(),u},reverse:function(){const t=nr.get(this);if(void 0===t)return gr.call(this),this;const e=this.length,s=e/2|0;let i=0;for(;i!==s;){const s=e-i-1,n=this[i],r=t.indexMap[i],o=this[s],a=t.indexMap[s];this[i]=o,t.indexMap[i]=a,this[s]=n,t.indexMap[s]=r,i++}return t.notify(),this},sort:function(t){const e=nr.get(this);if(void 0===e)return vr.call(this,t),this;let s=this.length;if(s<2)return this;hr(this,e.indexMap,0,s,or);let i=0;for(;i<s&&void 0!==this[i];)i++;void 0!==t&&Li(t)||(t=rr),hr(this,e.indexMap,0,i,t);let n=!1;for(i=0,s=e.indexMap.length;s>i;++i)if(e.indexMap[i]!==i){n=!0;break}return n&&e.notify(),this}};for(const t of mr)Bi(wr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let br=!1;const yr="__au_arr_on__";class kr{constructor(t){this.type=18,br||(br=!0,function(){if(!Gi(yr,Array)){Qi(yr,!0,Array);for(const t of mr)!0!==cr[t].observing&&_i(cr,t,wr[t])}}()),this.indexObservers={},this.collection=t,this.indexMap=Hn(t.length),this.lenObs=void 0,nr.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,s=e.length;this.indexMap=Hn(s),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??(this.lenObs=new Yn(this))}getIndexObserver(t){var e;return(e=this.indexObservers)[t]??(e[t]=new Cr(this,t))}}class Cr{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,s=this.index,i=e.indexMap;i[s]>-1&&i.deletedIndices.push(i[s]),i[s]=-2,e.collection[s]=t,e.notify()}handleCollectionChange(t,e){const s=this.index;if(e[s]===s)return;const i=this.value,n=this.value=this.getValue();i!==n&&this.subs.notify(n,i)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Sr(t){let e=nr.get(t);return void 0===e&&(e=new kr(t)),e}Kn(kr),Kn(Cr);const Ar=(t,e)=>t-e,Tr="__au_set_obs__",$r=(()=>{let t=Gi(Tr,Set);return null==t&&Qi(Tr,t=new WeakMap,Set),t})(),xr=Set.prototype,Ir=xr.add,Rr=xr.clear,Er=xr.delete,Or=["add","clear","delete"],Pr={add:function(t){const e=$r.get(this);if(void 0===e)return Ir.call(this,t),this;const s=this.size;return Ir.call(this,t),this.size===s||(e.indexMap[s]=-2,e.notify()),this},clear:function(){const t=$r.get(this);if(void 0===t)return Rr.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;Rr.call(this),e.length=0,t.notify()}},delete:function(t){const e=$r.get(this);if(void 0===e)return Er.call(this,t);if(0===this.size)return!1;let s=0;const i=e.indexMap;for(const n of this.keys()){if(n===t){i[s]>-1&&(i.deletedIndices.push(i[s]),i.deletedItems.push(n)),i.splice(s,1);const r=Er.call(this,t);return!0===r&&e.notify(),r}s++}return!1}},Mr={writable:!0,enumerable:!1,configurable:!0};for(const t of Or)Bi(Pr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Nr=!1;const Br="__au_set_on__";class jr{constructor(t){this.type=34,Nr||(Nr=!0,function(){if(!Gi(Br,Set)){Qi(Br,!0,Set);for(const t of Or)!0!==xr[t].observing&&Bi(xr,t,{...Mr,value:Pr[t]})}}()),this.collection=t,this.indexMap=Hn(t.size),this.lenObs=void 0,$r.set(t,this)}notify(){this.subs;const t=this.indexMap;const e=this.collection,s=e.size;this.indexMap=Hn(s),this.subs.notifyCollection(e,t)}getLengthObserver(){return this.lenObs??(this.lenObs=new Zn(this))}}function Lr(t){let e=$r.get(t);return void 0===e&&(e=new jr(t)),e}Kn(jr);const Ur="__au_map_obs__",Dr=(()=>{let t=Gi(Ur,Map);return null==t&&Qi(Ur,t=new WeakMap,Map),t})(),Fr=Map.prototype,Vr=Fr.set,Wr=Fr.clear,_r=Fr.delete,qr=["set","clear","delete"],Hr={set:function(t,e){const s=Dr.get(this);if(void 0===s)return Vr.call(this,t,e),this;const i=this.get(t),n=this.size;if(Vr.call(this,t,e),this.size===n){let e=0;for(const n of this.entries()){if(n[0]===t)return n[1]!==i&&(s.indexMap.deletedIndices.push(s.indexMap[e]),s.indexMap.deletedItems.push(n),s.indexMap[e]=-2,s.notify()),this;e++}return this}return s.indexMap[n]=-2,s.notify(),this},clear:function(){const t=Dr.get(this);if(void 0===t)return Wr.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;Wr.call(this),e.length=0,t.notify()}},delete:function(t){const e=Dr.get(this);if(void 0===e)return _r.call(this,t);if(0===this.size)return!1;let s=0;const i=e.indexMap;for(const n of this.keys()){if(n===t){i[s]>-1&&(i.deletedIndices.push(i[s]),i.deletedItems.push(n)),i.splice(s,1);const r=_r.call(this,t);return!0===r&&e.notify(),r}++s}return!1}},Kr={writable:!0,enumerable:!1,configurable:!0};for(const t of qr)Bi(Hr[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let zr=!1;const Gr="__au_map_on__";class Qr{constructor(t){this.type=66,zr||(zr=!0,function(){if(!Gi(Gr,Map)){Qi(Gr,!0,Map);for(const t of qr)!0!==Fr[t].observing&&Bi(Fr,t,{...Kr,value:Hr[t]})}}()),this.collection=t,this.indexMap=Hn(t.size),this.lenObs=void 0,Dr.set(t,this)}notify(){const t=this.subs,e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=Hn(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??(this.lenObs=new Zn(this))}}function Jr(t){let e=Dr.get(t);return void 0===e&&(e=new Qr(t)),e}function Xr(){return _i(this,"obs",new io(this))}function Yr(t,e){this.obs.add(this.oL.getObserver(t,e))}function Zr(t){let e;if(Di(t))e=Sr(t);else if(Fi(t))e=Lr(t);else{if(!Vi(t))throw ji("AUR0210");e=Jr(t)}this.obs.add(e)}function to(t){this.obs.add(t)}function eo(){throw ji("AUR2011:handleChange")}function so(){throw ji("AUR2011:handleCollectionChange")}Kn(Qr);class io{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(ro,this),this.count=this.o.size}clearAll(){this.o.forEach(no,this),this.o.clear(),this.count=0}}function no(t,e){e.unsubscribe(this.b)}function ro(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}function oo(t){const e=t.prototype;return qi(e,"observe",Yr),qi(e,"observeCollection",Zr),qi(e,"subscribeTo",to),Bi(e,"obs",{get:Xr}),qi(e,"handleChange",eo),qi(e,"handleCollectionChange",so),t}function ao(t){return null==t?oo:oo(t)}const ho=Ki("IExpressionParser",(t=>t.singleton(co)));class co{constructor(){this.i=zi(),this.u=zi(),this.h=zi()}parse(t,e){let s;switch(e){case 32:return new Xi(t);case 1:return s=this.h[t],void 0===s&&(s=this.h[t]=this.$parse(t,e)),s;case 2:return s=this.u[t],void 0===s&&(s=this.u[t]=this.$parse(t,e)),s;default:if(0===t.length){if((24&e)>0)return dn.$empty;throw Zo()}return s=this.i[t],void 0===s&&(s=this.i[t]=this.$parse(t,e)),s}}$parse(t,e){return yo=t,ko=0,Co=t.length,So=0,Ao=0,To=6291456,$o="",bo=Oo(0),xo=!0,Io=!1,Ro=-1,Mo(61,void 0===e?16:e)}}function lo(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}const uo=dn.$false,po=dn.$true,fo=dn.$null,go=dn.$undefined,vo=sn.$this,mo=sn.$parent;var wo;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsChainable=4]="IsChainable",t[t.IsFunction=8]="IsFunction",t[t.IsProperty=16]="IsProperty",t[t.IsCustom=32]="IsCustom"}(wo||(wo={}));let bo,yo="",ko=0,Co=0,So=0,Ao=0,To=6291456,$o="",xo=!0,Io=!1,Ro=-1;const Eo=String.fromCharCode,Oo=t=>yo.charCodeAt(t),Po=()=>yo.slice(Ao,ko);function Mo(t,e){if(32===e)return new Xi(yo);if(0===ko){if(1&e)return function(){const t=[],e=[],s=Co;let i="";for(;ko<s;){switch(bo){case 36:if(123===Oo(ko+1)){t.push(i),i="",ko+=2,bo=Oo(ko),Fo();const s=Mo(61,1);e.push(s);continue}i+="$";break;case 92:i+=Eo(lo(Vo()));break;default:i+=Eo(bo)}Vo()}return e.length?(t.push(i),new kn(t,e)):null}();if(Fo(),4194304&To)throw zo()}xo=513>t,Io=!1;let s,i=!1,n=0;if(131072&To){const t=wa[63&To];Fo(),s=new un(t,Mo(514,e)),xo=!1}else{t:switch(To){case 12294:n=So,xo=!1;do{switch(Fo(),++n,To){case 65545:if(Fo(),0==(12288&To))throw Qo();break;case 10:case 11:throw Qo();case 2162700:if(Io=!0,Fo(),0==(12288&To)){s=0===n?vo:1===n?mo:new sn(n),i=!0;break t}break;default:if(2097152&To){s=0===n?vo:1===n?mo:new sn(n);break t}throw Jo()}}while(12294===To);case 4096:{const t=$o;if(s=2&e?new bn(t):new nn(t,n),xo=!Io,Fo(),Ho(50)){if(524296===To)throw va();const e=Io,i=So;++So;const n=Mo(62,0);Io=e,So=i,xo=!1,s=new An([new bn(t)],n)}break}case 10:throw ma();case 11:throw Go();case 12292:switch(xo=!1,Fo(),So){case 0:s=vo;break;case 1:s=mo;break;default:s=new sn(So)}break;case 2688007:s=function(t){Fo();const e=ko,s=Ao,i=To,n=bo,r=$o,o=xo,a=Io,h=[];let c=1,l=!1;e:for(;;){if(11===To){if(Fo(),4096!==To)throw Qo();if(h.push(new bn($o)),Fo(),6291471===To)throw ga();if(7340046!==To)throw Go();if(Fo(),50!==To)throw Go();Fo();const t=Io,e=So;++So;const s=Mo(62,0);return Io=t,So=e,xo=!1,new An(h,s,!0)}switch(To){case 4096:h.push(new bn($o)),Fo();break;case 7340046:Fo();break e;case 524296:case 2688016:Fo(),c=4;break;case 6291471:c=2,l=!0;break e;case 2688007:c=2;break e;default:Fo(),c=2}switch(To){case 6291471:if(Fo(),l=!0,1===c)break;break e;case 7340046:Fo();break e;case 4194349:1===c&&(c=3);break e;case 50:if(l)throw da();Fo(),c=2;break e;default:1===c&&(c=2);break e}}if(50===To){if(1===c){if(Fo(),524296===To)throw va();const t=Io,e=So;++So;const s=Mo(62,0);return Io=t,So=e,xo=!1,new An(h,s)}throw da()}if(1===c&&0===h.length)throw aa(50);if(l)switch(c){case 2:throw da();case 3:throw pa();case 4:throw fa()}ko=e,Ao=s,To=i,bo=n,$o=r,xo=o,Io=a;const u=Io,d=Mo(62,t);if(Io=u,Ko(7340046),50===To)switch(c){case 2:throw da();case 3:throw pa();case 4:throw fa()}return d}(e);break;case 2688016:s=yo.search(/\s+of\s+/)>ko?function(){const t=[],e=new Cn(24,t,void 0,void 0);let s="",i=!0,n=0;for(;i;)switch(Fo(),To){case 7340051:i=!1,r();break;case 6291471:r();break;case 4096:s=Po();break;default:throw ca()}return Ko(7340051),e;function r(){""!==s?(t.push(new Sn(new rn(vo,s),new on(vo,new dn(n++)),void 0)),s=""):n++}}():function(t){const e=Io;Fo();const s=new Array;for(;7340051!==To;)if(Ho(6291471)){if(s.push(go),7340051===To)break}else{if(s.push(Mo(62,-3&t)),!Ho(6291471))break;if(7340051===To)break}return Io=e,Ko(7340051),2&t?new mn(s):(xo=!1,new pn(s))}(e);break;case 524296:s=function(t){const e=Io,s=new Array,i=new Array;for(Fo();7340045!==To;){if(s.push($o),49152&To)Fo(),Ko(6291476),i.push(Mo(62,-3&t));else{if(!(12288&To))throw ra();{const e=bo,s=To,n=ko;Fo(),Ho(6291476)?i.push(Mo(62,-3&t)):(bo=e,To=s,ko=n,i.push(Mo(515,-3&t)))}}7340045!==To&&Ko(6291471)}return Io=e,Ko(7340045),2&t?new wn(s,i):(xo=!1,new fn(s,i))}(e);break;case 2163759:s=new gn([$o]),xo=!1,Fo();break;case 2163760:s=Uo(e,s,!1);break;case 16384:case 32768:s=new dn($o),xo=!1,Fo();break;case 8194:case 8195:case 8193:case 8192:s=wa[63&To],xo=!1,Fo();break;default:throw ko>=Co?Xo():Yo()}if(2&e)return function(t){if(0==(23&t.$kind))throw na();if(4204593!==To)throw na();Fo();const e=t,s=Mo(61,4);return new yn(e,s,Ro)}(s);if(514<t)return s;if(10===To||11===To)throw Qo();if(0===s.$kind)switch(To){case 2162700:if(Io=!0,xo=!1,Fo(),0==(13312&To))throw la();if(12288&To)s=new nn($o,s.ancestor),Fo();else if(2688007===To)s=new cn(s,No(),!0);else{if(2688016!==To)throw ua();s=Bo(s,!0)}break;case 65545:if(xo=!Io,Fo(),0==(12288&To))throw Qo();s=new nn($o,s.ancestor),Fo();break;case 10:case 11:throw Qo();case 2688007:s=new cn(s,No(),i);break;case 2688016:s=Bo(s,i);break;case 2163759:s=Do(s);break;case 2163760:s=Uo(e,s,!0)}for(;(65536&To)>0;)switch(To){case 2162700:s=jo(s);break;case 65545:if(Fo(),0==(12288&To))throw Qo();s=Lo(s,!1);break;case 10:case 11:throw Qo();case 2688007:s=1===s.$kind?new an(s.name,No(),s.ancestor,!1):10===s.$kind?new hn(s.object,s.name,No(),s.optional,!1):new cn(s,No(),!1);break;case 2688016:s=Bo(s,!1);break;case 2163759:if(Io)throw ua();s=Do(s);break;case 2163760:if(Io)throw ua();s=Uo(e,s,!0)}}if(10===To||11===To)throw Qo();if(513<t)return s;for(;(262144&To)>0;){const i=To;if((960&i)<=t)break;Fo(),s=new ln(wa[63&i],s,Mo(960&i,e)),xo=!1}if(63<t)return s;if(Ho(6291478)){const t=Mo(62,e);Ko(6291476),s=new en(s,t,Mo(62,e)),xo=!1}if(62<t)return s;if(Ho(4194349)){if(!xo)throw ta();s=new tn(s,Mo(62,e))}if(61<t)return s;for(;Ho(6291480);){if(6291456===To)throw ea();const t=$o;Fo();const i=new Array;for(;Ho(6291476);)i.push(Mo(62,e));s=new Zi(s,t,i)}for(;Ho(6291479);){if(6291456===To)throw sa();const t=$o;Fo();const i=new Array;for(;Ho(6291476);)i.push(Mo(62,e));s=new Yi(s,t,i)}if(6291456!==To){if((1&e)>0&&7340045===To)return s;if((4&e)>0&&6291477===To){if(ko===Co)throw Yo();return Ro=ko-1,s}if("of"===Po())throw ia();throw Yo()}return s}function No(){const t=Io;Fo();const e=[];for(;7340046!==To&&(e.push(Mo(62,0)),Ho(6291471)););return Ko(7340046),xo=!1,Io=t,e}function Bo(t,e){const s=Io;return Fo(),t=new on(t,Mo(62,0),e),Ko(7340051),xo=!s,Io=s,t}function jo(t){if(Io=!0,xo=!1,Fo(),0==(13312&To))throw la();if(12288&To)return Lo(t,!0);if(2688007===To)return 1===t.$kind?new an(t.name,No(),t.ancestor,!0):10===t.$kind?new hn(t.object,t.name,No(),t.optional,!0):new cn(t,No(),!0);if(2688016===To)return Bo(t,!0);throw ua()}function Lo(t,e){const s=$o;switch(To){case 2162700:{Io=!0,xo=!1;const i=ko,n=Ao,r=To,o=bo,a=$o,h=xo,c=Io;if(Fo(),0==(13312&To))throw la();return 2688007===To?new hn(t,s,No(),e,!0):(ko=i,Ao=n,To=r,bo=o,$o=a,xo=h,Io=c,new rn(t,s,e))}case 2688007:return xo=!1,new hn(t,s,No(),e,!1);default:return xo=!Io,Fo(),new rn(t,s,e)}}function Uo(t,e,s){const i=Io,n=[$o];Ko(2163760);const r=[Mo(62,t)];for(;2163759!==(To=qo());)n.push($o),Ko(2163760),r.push(Mo(62,t));return n.push($o),xo=!1,Io=i,s?(Fo(),new vn(n,n,e,r)):(Fo(),new gn(n,r))}function Do(t){xo=!1;const e=[$o];return Fo(),new vn(e,e,t)}function Fo(){for(;ko<Co;)if(Ao=ko,null!=(To=Ta[bo]()))return;To=6291456}function Vo(){return bo=Oo(++ko)}function Wo(t){let e=bo;if(!1===t){do{e=Vo()}while(e<=57&&e>=48);if(46!==e)return $o=parseInt(Po(),10),32768;if(e=Vo(),ko>=Co)return $o=parseInt(Po().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=Vo()}while(e<=57&&e>=48);else bo=Oo(--ko);return $o=parseFloat(Po()),32768}function _o(){let t=!0,e="";for(;96!==Vo();)if(36===bo){if(ko+1<Co&&123===Oo(ko+1)){ko++,t=!1;break}e+="$"}else if(92===bo)e+=Eo(lo(Vo()));else{if(ko>=Co)throw oa();e+=Eo(bo)}return Vo(),$o=e,t?2163759:2163760}const qo=()=>{if(ko>=Co)throw oa();return ko--,_o()},Ho=t=>To===t&&(Fo(),!0),Ko=t=>{if(To!==t)throw aa(t);Fo()},zo=()=>ji(`AUR0151:${yo}`),Go=()=>ji(`AUR0152:${yo}`),Qo=()=>ji(`AUR0153:${yo}`),Jo=()=>ji(`AUR0154:${yo}`),Xo=()=>ji(`AUR0155:${yo}`),Yo=()=>ji(`AUR0156:${yo}`),Zo=()=>ji("AUR0157"),ta=()=>ji(`AUR0158:${yo}`),ea=()=>ji(`AUR0159:${yo}`),sa=()=>ji(`AUR0160:${yo}`),ia=()=>ji(`AUR0161:${yo}`),na=()=>ji(`AUR0163:${yo}`),ra=()=>ji(`AUR0164:${yo}`),oa=()=>ji(`AUR0166:${yo}`),aa=t=>ji(`AUR0167:${yo}<${wa[63&t]}`),ha=()=>{throw ji(`AUR0168:${yo}`)};ha.notMapped=!0;const ca=()=>ji(`AUR0170:${yo}`),la=()=>ji(`AUR0171:${yo}`),ua=()=>ji(`AUR0172:${yo}`),da=()=>ji(`AUR0173:${yo}`),pa=()=>ji(`AUR0174:${yo}`),fa=()=>ji(`AUR0175:${yo}`),ga=()=>ji(`AUR0176:${yo}`),va=()=>ji(`AUR0178:${yo}`),ma=()=>ji(`AUR0179:${yo}`),wa=[uo,po,fo,go,"$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163759,2163760,"of","=>"],ba=Object.assign(Object.create(null),{true:8193,null:8194,false:8192,undefined:8195,$this:12292,$parent:12294,in:6562212,instanceof:6562213,typeof:139304,void:139305,of:4204593}),ya=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],ka=[48,58],Ca=(t,e,s,i)=>{const n=s.length;for(let r=0;r<n;r+=2){const n=s[r];let o=s[r+1];if(o=o>0?o:n+1,t&&t.fill(i,n,o),e)for(let t=n;t<o;t++)e.add(t)}},Sa=t=>()=>(Vo(),t);Ca(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const Aa=new Uint8Array(65535);Ca(Aa,null,ya,1),Ca(Aa,null,ka,1);const Ta=new Array(65535);Ta.fill(ha,0,65535),Ca(Ta,null,[0,33,127,161],(()=>(Vo(),null))),Ca(Ta,null,ya,(function(){for(;Aa[Vo()];);const t=ba[$o=Po()];return void 0===t?4096:t})),Ca(Ta,null,ka,(()=>Wo(!1))),Ta[34]=Ta[39]=()=>function(){const t=bo;Vo();let e=0;const s=new Array;let i=ko;for(;bo!==t;)if(92===bo)s.push(yo.slice(i,ko)),Vo(),e=lo(bo),Vo(),s.push(Eo(e)),i=ko;else{if(ko>=Co)throw ji(`AUR0165:${yo}`);Vo()}const n=yo.slice(i,ko);Vo(),s.push(n);const r=s.join("");return $o=r,16384}(),Ta[96]=()=>_o(),Ta[33]=()=>61!==Vo()?131118:61!==Vo()?6553949:(Vo(),6553951),Ta[61]=()=>62===Vo()?(Vo(),50):61!==bo?4194349:61!==Vo()?6553948:(Vo(),6553950),Ta[38]=()=>38!==Vo()?6291479:(Vo(),6553883),Ta[124]=()=>124!==Vo()?6291480:(Vo(),6553818),Ta[63]=()=>{if(46===Vo()){const t=Oo(ko+1);return t<=48||t>=57?(Vo(),2162700):6291478}return 63!==bo?6291478:(Vo(),6553753)},Ta[46]=()=>Vo()<=57&&bo>=48?Wo(!0):46===bo?46!==Vo()?10:(Vo(),11):65545,Ta[60]=()=>61!==Vo()?6554016:(Vo(),6554018),Ta[62]=()=>61!==Vo()?6554017:(Vo(),6554019),Ta[37]=Sa(6554155),Ta[40]=Sa(2688007),Ta[41]=Sa(7340046),Ta[42]=Sa(6554154),Ta[43]=Sa(2490854),Ta[44]=Sa(6291471),Ta[45]=Sa(2490855),Ta[47]=Sa(6554156),Ta[58]=Sa(6291476),Ta[59]=Sa(6291477),Ta[91]=Sa(2688016),Ta[93]=Sa(7340051),Ta[123]=Sa(524296),Ta[125]=Sa(7340045);let $a=null;const xa=[];let Ia=!1;function Ra(){return $a}function Ea(t){if(null==t)throw ji("AUR0206");if(null==$a)return $a=t,xa[0]=$a,void(Ia=!0);if($a===t)throw ji("AUR0207");xa.push(t),$a=t,Ia=!0}function Oa(t){if(null==t)throw ji("AUR0208");if($a!==t)throw ji("AUR0209");xa.pop(),$a=xa.length>0?xa[xa.length-1]:null,Ia=null!=$a}const Pa=Object.freeze({get current(){return $a},get connecting(){return Ia},enter:Ea,exit:Oa,pause:function(){Ia=!1},resume:function(){Ia=!0}}),Ma=Reflect.get,Na=Object.prototype.toString,Ba=new WeakMap;function ja(t){switch(Na.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const La="__raw__";function Ua(t){return ja(t)?Da(t):t}function Da(t){return Ba.get(t)??function(t){const e=Di(t)?qa:Vi(t)||Fi(t)?ph:_a,s=new Proxy(t,e);return Ba.set(t,s),s}(t)}function Fa(t){return t[La]??t}function Va(t){return ja(t)&&t[La]||t}function Wa(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const _a={get(t,e,s){if(e===La)return t;const i=Ra();return!Ia||Wa(e)||null==i?Ma(t,e,s):(i.observe(t,e),Ua(Ma(t,e,s)))}},qa={get(t,e,s){if(e===La)return t;if(!Ia||Wa(e)||null==$a)return Ma(t,e,s);switch(e){case"length":return $a.observe(t,"length"),t.length;case"map":return Ha;case"includes":return Ga;case"indexOf":return Qa;case"lastIndexOf":return Ja;case"every":return Ka;case"filter":return za;case"find":return Ya;case"findIndex":return Xa;case"flat":return Za;case"flatMap":return th;case"join":return eh;case"push":return ih;case"pop":return sh;case"reduce":return uh;case"reduceRight":return dh;case"reverse":return ah;case"shift":return nh;case"unshift":return rh;case"slice":return lh;case"splice":return oh;case"some":return hh;case"sort":return ch;case"keys":return kh;case"values":case Symbol.iterator:return Ch;case"entries":return Sh}return $a.observe(t,e),Ua(Ma(t,e,s))},ownKeys:t=>(Ra()?.observe(t,"length"),Reflect.ownKeys(t))};function Ha(t,e){const s=Fa(this),i=s.map(((s,i)=>Va(t.call(e,Ua(s),i,this))));return Ah($a,s),Ua(i)}function Ka(t,e){const s=Fa(this),i=s.every(((s,i)=>t.call(e,Ua(s),i,this)));return Ah($a,s),i}function za(t,e){const s=Fa(this),i=s.filter(((s,i)=>Va(t.call(e,Ua(s),i,this))));return Ah($a,s),Ua(i)}function Ga(t){const e=Fa(this),s=e.includes(Va(t));return Ah($a,e),s}function Qa(t){const e=Fa(this),s=e.indexOf(Va(t));return Ah($a,e),s}function Ja(t){const e=Fa(this),s=e.lastIndexOf(Va(t));return Ah($a,e),s}function Xa(t,e){const s=Fa(this),i=s.findIndex(((s,i)=>Va(t.call(e,Ua(s),i,this))));return Ah($a,s),i}function Ya(t,e){const s=Fa(this),i=s.find(((e,s)=>t(Ua(e),s,this)),e);return Ah($a,s),Ua(i)}function Za(){const t=Fa(this);return Ah($a,t),Ua(t.flat())}function th(t,e){const s=Fa(this);return Ah($a,s),Da(s.flatMap(((s,i)=>Ua(t.call(e,Ua(s),i,this)))))}function eh(t){const e=Fa(this);return Ah($a,e),e.join(t)}function sh(){return Ua(Fa(this).pop())}function ih(...t){return Fa(this).push(...t)}function nh(){return Ua(Fa(this).shift())}function rh(...t){return Fa(this).unshift(...t)}function oh(...t){return Ua(Fa(this).splice(...t))}function ah(...t){const e=Fa(this),s=e.reverse();return Ah($a,e),Ua(s)}function hh(t,e){const s=Fa(this),i=s.some(((s,i)=>Va(t.call(e,Ua(s),i,this))));return Ah($a,s),i}function ch(t){const e=Fa(this),s=e.sort(t);return Ah($a,e),Ua(s)}function lh(t,e){const s=Fa(this);return Ah($a,s),Da(s.slice(t,e))}function uh(t,e){const s=Fa(this),i=s.reduce(((e,s,i)=>t(e,Ua(s),i,this)),e);return Ah($a,s),Ua(i)}function dh(t,e){const s=Fa(this),i=s.reduceRight(((e,s,i)=>t(e,Ua(s),i,this)),e);return Ah($a,s),Ua(i)}const ph={get(t,e,s){if(e===La)return t;const i=Ra();if(!Ia||Wa(e)||null==i)return Ma(t,e,s);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return bh;case"delete":return yh;case"forEach":return fh;case"add":if(Fi(t))return wh;break;case"get":if(Vi(t))return vh;break;case"set":if(Vi(t))return mh;break;case"has":return gh;case"keys":return kh;case"values":return Ch;case"entries":return Sh;case Symbol.iterator:return Vi(t)?Sh:Ch}return Ua(Ma(t,e,s))}};function fh(t,e){const s=Fa(this);return Ah($a,s),s.forEach(((s,i)=>{t.call(e,Ua(s),Ua(i),this)}))}function gh(t){const e=Fa(this);return Ah($a,e),e.has(Va(t))}function vh(t){const e=Fa(this);return Ah($a,e),Ua(e.get(Va(t)))}function mh(t,e){return Ua(Fa(this).set(Va(t),Va(e)))}function wh(t){return Ua(Fa(this).add(Va(t)))}function bh(){return Ua(Fa(this).clear())}function yh(t){return Ua(Fa(this).delete(Va(t)))}function kh(){const t=Fa(this);Ah($a,t);const e=t.keys();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Ua(s),done:i}},[Symbol.iterator](){return this}}}function Ch(){const t=Fa(this);Ah($a,t);const e=t.values();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Ua(s),done:i}},[Symbol.iterator](){return this}}}function Sh(){const t=Fa(this);Ah($a,t);const e=t.entries();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[Ua(s[0]),Ua(s[1])],done:i}},[Symbol.iterator](){return this}}}const Ah=(t,e)=>t?.observeCollection(e),Th=Object.freeze({getProxy:Da,getRaw:Fa,wrap:Ua,unwrap:Va,rawKey:La});class $h{constructor(t,e,s,i,n){this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.$get=e,this.$set=s,this.up=i,this.oL=n}static create(t,e,s,i,n){const r=s.get,o=s.set,a=new $h(t,r,o,n,i),h=()=>a.getValue();return h.getObserver=()=>a,Bi(t,e,{enumerable:s.enumerable,configurable:!0,get:h,set:t=>{a.setValue(t)}}),a}getValue(){return 0===this.subs.count?this.$get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t){if(!Li(this.$set))throw ji("AUR0221");t!==this.v&&(this.ir=!0,this.$set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Wi(e,t)||(this.ov=t,xh=this.ov,this.ov=this.v,this.subs.notify(this.v,xh))}compute(){this.ir=!0,this.obs.version++;try{return Ea(this),this.v=Va(this.$get.call(this.up?Ua(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,Oa(this)}}}let xh;ao($h),Kn($h);const Ih=Ki("IDirtyChecker",(t=>t.singleton(Oh))),Rh={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},Eh={persistent:!0};class Oh{constructor(t){this.p=t,this.tracked=[],this.A=null,this.O=0,this.check=()=>{if(Rh.disabled)return;if(++this.O<Rh.timeoutsPerCheck)return;this.O=0;const t=this.tracked,e=t.length;let s,i=0;for(;i<e;++i)s=t[i],s.isDirty()&&s.flush()}}createProperty(t,e){if(Rh.throw)throw ji(`AUR0222:${Hi(e)}`);return new Ph(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.A=this.p.taskQueue.queueTask(this.check,Eh))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.A.cancel(),this.A=null)}}Oh.inject=[ri];class Ph{constructor(t,e,s){this.obj=e,this.key=s,this.type=0,this.ov=void 0,this.C=t}getValue(){return this.obj[this.key]}setValue(t){throw ji(`Trying to set value for property ${Hi(this.key)} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.C.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.C.removeProperty(this)}}Kn(Ph);class Mh{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Nh{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,s){e[s]=t}}class Bh{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t){if(this.iO){if(Wi(t,this.v))return;jh=this.v,this.v=t,this.subs.notify(t,jh)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Bi(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(Bi(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}let jh;Kn(Bh),Kn(class{constructor(t,e,s,i){this.type=1,this.v=void 0,this.ov=void 0,this.o=t,this.S=s,this.hs=Li(s);const n=t[e];this.cb=Li(n)?n:void 0,this.v=i}getValue(){return this.v}setValue(t){this.hs&&(t=this.S(t,null)),Wi(t,this.v)||(this.ov=this.v,this.v=t,this.cb?.call(this.o,this.v,this.ov),jh=this.ov,this.ov=this.v,this.subs.notify(this.v,jh))}});const Lh=new Nh,Uh=Ki("IObserverLocator",(t=>t.singleton(Vh))),Dh=Ki("INodeObserverLocator",(t=>t.cachedCallback((t=>new Fh))));class Fh{handles(){return!1}getObserver(){return Lh}getAccessor(){return Lh}}class Vh{constructor(t,e){this.$=[],this.C=t,this.R=e}addAdapter(t){this.$.push(t)}getObserver(t,e){if(null==t)throw Hh(e);if(!Ui(t))return new Mh(t,e);const s=qh(t);let i=s[e];return void 0===i&&(i=this.createObserver(t,e),i.doNotCache||(s[e]=i)),i}getAccessor(t,e){const s=t.$observers?.[e];return void 0!==s?s:this.R.handles(t,e,this)?this.R.getAccessor(t,e,this):Lh}getArrayObserver(t){return Sr(t)}getMapObserver(t){return Jr(t)}getSetObserver(t){return Lr(t)}createObserver(t,e){if(this.R.handles(t,e,this))return this.R.getObserver(t,e,this);switch(e){case"length":if(Di(t))return Sr(t).getLengthObserver();break;case"size":if(Vi(t))return Jr(t).getLengthObserver();if(Fi(t))return Lr(t).getLengthObserver();break;default:if(Di(t)&&Re(e))return Sr(t).getIndexObserver(Number(e))}let s=_h(t,e);if(void 0===s){let i=Wh(t);for(;null!==i&&(s=_h(i,e),void 0===s);)i=Wh(i)}if(void 0!==s&&!Ni.call(s,"value")){let i=this.U(t,e,s);return null==i&&(i=(s.get?.getObserver??s.set?.getObserver)?.(t,this)),null==i?s.configurable?$h.create(t,e,s,this,!0):this.C.createProperty(t,e):i}return new Bh(t,e)}U(t,e,s){if(this.$.length>0)for(const i of this.$){const n=i.getObserver(t,e,s,this);if(null!=n)return n}return null}}Vh.inject=[Ih,Dh];const Wh=Object.getPrototypeOf,_h=Object.getOwnPropertyDescriptor,qh=t=>{let e=t.$observers;return void 0===e&&Bi(t,"$observers",{enumerable:!1,value:e=zi()}),e},Hh=t=>ji(`AUR0199:${Hi(t)}`);Ki("IObservation",(t=>t.singleton(Kh)));class Kh{constructor(t){this.oL=t}static get inject(){return[Uh]}run(t){const e=new zh(this.oL,t);return e.run(),e}}class zh{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw ji("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{Ea(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,Oa(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,ji("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}ao(zh);const Gh=Ki("ISignaler",(t=>t.singleton(Qh)));class Qh{constructor(){this.signals=zi()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let s;for(s of e.keys())s.handleChange(void 0,void 0)}addSignalListener(t,e){const s=this.signals,i=s[t];void 0===i?s[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}new Map;class Jh extends Error{constructor(t){super("Task was canceled."),this.task=t}}var Xh,Yh;function Zh(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}function tc(t,e){return function(s,i){e(s,i,t)}}!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(Xh||(Xh={})),function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(Yh||(Yh={})),new Map;const ec=ge.getOwn,sc=ge.hasOwn,ic=ge.define,{annotation:nc,resource:rc}=Je,oc=nc.keyFor,ac=rc.keyFor,hc=rc.appendTo,cc=nc.appendTo,lc=nc.getKeys,uc=Object,dc=uc.prototype,pc=()=>uc.create(null),fc=t=>new Error(t),gc=dc.hasOwnProperty,vc=uc.freeze,mc=uc.assign,wc=uc.getOwnPropertyNames,bc=uc.keys,yc=pc(),kc=(t,e,s)=>{if(!0===yc[e])return!0;if(!Tc(e))return!1;const i=e.slice(0,5);return yc[e]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(t,e)},Cc=t=>t instanceof Promise,Sc=t=>t instanceof Array,Ac=t=>"function"==typeof t,Tc=t=>"string"==typeof t,$c=uc.defineProperty,xc=t=>{throw t},Ic=uc.is,Rc=Reflect.defineProperty,Ec=(t,e,s)=>(Rc(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s);function Oc(t,e){let s;function i(t,e){arguments.length>1&&(s.property=e),ic(Mc,Bc.create(e,t,s),t.constructor,e),cc(t.constructor,Nc.keyFrom(e))}return arguments.length>1?(s={},void i(t,e)):Tc(t)?(s={},i):(s=void 0===t?{}:t,i)}function Pc(t){return t.startsWith(Mc)}const Mc=oc("bindable"),Nc=vc({name:Mc,keyFrom:t=>`${Mc}:${t}`,from(t,...e){const s={},i=Array.isArray;function n(e){s[e]=Bc.create(e,t)}function r(e,i){s[e]=i instanceof Bc?i:Bc.create(e,t,i)}return e.forEach((function(t){i(t)?t.forEach(n):t instanceof Bc?s[t.property]=t:void 0!==t&&bc(t).forEach((e=>r(e,t[e])))})),s},for(t){let e;const s={add(i){let n,r;return Tc(i)?(n=i,r={property:n}):(n=i.property,r=i),e=Bc.create(n,t,r),sc(Mc,t,n)||cc(t,Nc.keyFrom(n)),ic(Mc,e,t,n),s},mode:t=>(e.mode=t,s),callback:t=>(e.callback=t,s),attribute:t=>(e.attribute=t,s),primary:()=>(e.primary=!0,s),set:t=>(e.set=t,s)};return s},getAll(t){const e=Mc.length+1,s=[],i=Ue(t);let n,r,o,a,h=i.length,c=0;for(;--h>=0;)for(o=i[h],n=lc(o).filter(Pc),r=n.length,a=0;a<r;++a)s[c++]=ec(Mc,o,n[a].slice(e));return s}});class Bc{constructor(t,e,s,i,n,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.property=n,this.set=r}static create(t,e,s={}){return new Bc(Le(s.attribute,Me(t)),Le(s.callback,`${t}Changed`),Le(s.mode,2),Le(s.primary,!1),Le(s.property,t),Le(s.set,function(t,e,s={}){const i=s.type??ge.get("design:type",e,t)??null;if(null==i)return ni;let n;switch(i){case Number:case Boolean:case String:case BigInt:n=i;break;default:{const t=i.coerce;n="function"==typeof t?t.bind(i):jc.for(i)??ni;break}}return n===ni?n:function(t,e){return function(s,i){return i?.enableCoercion?(e??!i?.coerceNullish)&&null==s?s:t(s,i):s}}(n,s.nullable)}(t,e,s)))}}const jc={key:oc("coercer"),define(t,e){ic(jc.key,t[e].bind(t),t)},for:t=>ec(jc.key,t)};class Lc{constructor(t,e,s,i,n,r){this.set=i,this.$controller=n,this.i=r,this.v=void 0,this.ov=void 0;const o=t[s],a=t.propertyChanged,h=this.u=Ac(o),c=this.A=Ac(a),l=this.hs=i!==ni;let u;this.o=t,this.k=e,this.C=c?a:ni,this.cb=h?o:ni,void 0!==this.cb||c||l?(this.iO=!0,u=t[e],this.v=l&&void 0!==u?i(u,this.i):u,this.B()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t){this.hs&&(t=this.set(t,this.i));const e=this.v;if(this.iO){if(Ic(t,e))return;this.v=t,this.ov=e,(null==this.$controller||this.$controller.isBound)&&(this.u&&this.cb.call(this.o,t,e),this.A&&this.C.call(this.o,this.k,t,e)),this.subs.notify(this.v,this.ov)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.i):this.o[this.k],this.B()),this.subs.add(t)}B(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t)}})}}Kn(Lc);const Uc=function(t){function e(t,s,i){Ms.inject(e)(t,s,i)}return e.$isResolver=!0,e.resolve=function(e,s){return s.root===s||s.has(t,!1)?s.get(t):s.root.get(t)},e},Dc=Ms.createInterface,Fc=Zs.singleton,Vc=Zs.aliasTo,Wc=Zs.instance;Zs.callback;const _c=Zs.transient,qc=(t,e,s)=>t.registerResolver(e,s);function Hc(t,e,s,i){for(let n=0,r=t.length;n<r;++n)Zs.aliasTo(s,e.keyFrom(t[n])).register(i)}class Kc{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.I;break;default:this.has=this.T}else switch(t.length){case 0:this.has=this.P;break;case 1:this.has=this.L;break;default:this.has=this.U}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}U(t){return this.chars.includes(t)}L(t){return this.chars===t}P(t){return!1}T(t){return!this.chars.includes(t)}I(t){return this.chars!==t}R(t){return!0}}class zc{constructor(){this.parts=si,this.$="",this._={},this.q={}}get pattern(){const t=this.$;return""===t?null:t}set pattern(t){null==t?(this.$="",this.parts=si):(this.$=t,this.parts=this.q[t])}append(t,e){const s=this._;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const e=this._;let s;void 0!==e[t]&&(s=this.q,void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0)}}class Gc{constructor(t,...e){this.charSpec=t,this.M=[],this.F=null,this.O=!1,this.V=e}get $(){return this.O?this.V[0]:null}findChild(t){const e=this.M,s=e.length;let i=null,n=0;for(;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const s=this.V;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new Gc(t,e),this.M.push(i),t.repeat&&i.M.push(i)),i}findMatches(t,e){const s=[],i=this.M,n=i.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(t))if(s.push(o),r=o.V.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.V[h]);else for(;h<r;++h)e.append(o.V[h],t);return s}}class Qc{constructor(t){this.text=t;const e=this.N=t.length,s=this.j=[];let i=0;for(;e>i;++i)s.push(new Kc(t[i],!1,!1,!1))}eachChar(t){const e=this.N,s=this.j;let i=0;for(;e>i;++i)t(s[i])}}class Jc{constructor(t){this.text="PART",this.H=new Kc(t,!0,!1,!0)}eachChar(t){t(this.H)}}class Xc{constructor(t){this.text=t,this.H=new Kc(t,!1,!0,!1)}eachChar(t){t(this.H)}}class Yc{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Zc=Dc("ISyntaxInterpreter",(t=>t.singleton(tl)));class tl{constructor(){this.W=new Gc(null),this.G=[this.W]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let s,i,n,r,o,a,h,c,l=0;for(;e>l;){for(s=this.W,i=t[l],n=i.pattern,r=new Yc,o=this.X(i,r),a=o.length,h=t=>s=s.append(t,n),c=0;a>c;++c)o[c].eachChar(h);s.F=r,s.O=!0,++l}}interpret(t){const e=new zc,s=t.length;let i,n=this.G,r=0;for(;r<s&&(n=this.K(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(el),n.length>0&&(n.sort(sl),i=n[0],i.charSpec.isSymbol||e.next(i.$),e.pattern=i.$),e}K(t,e,s){const i=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}X(t,e){const s=[],i=t.pattern,n=i.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=i.charAt(o),0!==r.length&&r.includes(h)?o!==a?(s.push(new Qc(i.slice(a,o))),++e.statics,a=o):(s.push(new Xc(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===i.slice(o,o+4)?(a=o+=4,s.push(new Jc(r)),++e.dynamics):++o;return a!==o&&(s.push(new Qc(i.slice(a,o))),++e.statics),s}}function el(t){return t.O}function sl(t,e){const s=t.F,i=e.F;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}class il{constructor(t,e,s,i){this.rawName=t,this.rawValue=e,this.target=s,this.command=i}}const nl=Dc("IAttributePattern"),rl=Dc("IAttributeParser",(t=>t.singleton(ol)));class ol{constructor(t,e){this.Y={},this.Z=t;const s=this.V={},i=e.reduce(((t,e)=>{const i=ul(e.constructor);return i.forEach((t=>s[t.pattern]=e)),t.concat(i)}),si);t.add(i)}parse(t,e){let s=this.Y[t];null==s&&(s=this.Y[t]=this.Z.interpret(t));const i=s.pattern;return null==i?new il(t,e,t,null):this.V[i][i](t,e,s.parts)}}function al(...t){return function(e){return dl.define(t,e)}}ol.inject=[Zc,Vs(nl)];class hl{constructor(t){this.Type=t,this.name=void 0}register(t){Fc(nl,this.Type).register(t)}}const cl=ac("attribute-pattern"),ll="attribute-pattern-definitions",ul=t=>Je.annotation.get(t,ll),dl=vc({name:cl,definitionAnnotationKey:ll,define(t,e){const s=new hl(e);return ic(cl,s,e),hc(e,cl),Je.annotation.set(e,ll,t),cc(e,ll),e},getPatternDefinitions:ul});let pl=class{"PART.PART"(t,e,s){return new il(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new il(t,e,`${s[0]}.${s[1]}`,s[2])}};pl=Zh([al({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],pl);let fl=class{ref(t,e,s){return new il(t,e,"element","ref")}"PART.ref"(t,e,s){return new il(t,e,s[0],"ref")}};fl=Zh([al({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],fl);let gl=class{":PART"(t,e,s){return new il(t,e,s[0],"bind")}};gl=Zh([al({pattern:":PART",symbols:":"})],gl);let vl=class{"@PART"(t,e,s){return new il(t,e,s[0],"trigger")}};vl=Zh([al({pattern:"@PART",symbols:"@"})],vl);let ml=class{"...$attrs"(t,e,s){return new il(t,e,"","...$attrs")}};ml=Zh([al({pattern:"...$attrs",symbols:""})],ml);class wl{constructor(t,e,s){this.type=7,this.v=null,this.ov=null,this.J=!1,this.o=t,this.tt=e,this.et=s}getValue(){return this.v}setValue(t){this.v=t,this.J=t!==this.ov,this.it()}it(){if(this.J)switch(this.J=!1,this.ov=this.v,this.et){case"class":this.o.classList.toggle(this.tt,!!this.v);break;case"style":{let t="",e=this.v;Tc(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.tt,e,t);break}default:null==this.v?this.o.removeAttribute(this.et):this.o.setAttribute(this.et,String(this.v))}}handleMutation(t){let e=!1;for(let s=0,i=t.length;i>s;++s){const i=t[s];if("attributes"===i.type&&i.attributeName===this.tt){e=!0;break}}if(e){let t;switch(this.et){case"class":t=this.o.classList.contains(this.tt);break;case"style":t=this.o.style.getPropertyValue(this.tt);break;default:throw fc(`AUR0651:${this.et}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.J=!1,this.st())}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.tt),bl(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&yl(this.o,this)}st(){Sl=this.ov,this.ov=this.v,this.subs.notify(this.v,Sl)}}Kn(wl);const bl=(t,e,s)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(kl)).observe(e,{attributes:!0}),e.$eMObs.add(s)},yl=(t,e)=>{const s=t.$eMObs;return!(!s||!s.delete(e)||(0===s.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},kl=t=>{t[0].target.$eMObs.forEach(Cl,t)};function Cl(t){t.handleMutation(this)}let Sl;function Al(t){return function(e){return Il.define(t,e)}}class Tl{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return Tc(t)?(s=t,i={name:s}):(s=t.name,i=t),new Tl(e,Le(xl(e,"name"),s),je(xl(e,"aliases"),i.aliases,e.aliases),Il.keyFrom(s))}register(t){const{Type:e,key:s,aliases:i}=this;Fc(s,e).register(t),Vc(s,e).register(t),Hc(i,Il,s,t)}}const $l=ac("binding-behavior"),xl=(t,e)=>ec(oc(e),t),Il=vc({name:$l,keyFrom:t=>`${$l}:${t}`,isType:t=>Ac(t)&&sc($l,t),define(t,e){const s=Tl.create(t,e);return ic($l,s,s.Type),ic($l,s,s),hc(e,$l),s.Type},getDefinition(t){const e=ec($l,t);if(void 0===e)throw fc(`AUR0151:${t.name}`);return e},annotate(t,e,s){ic(oc(e),s,t)},getAnnotation:xl});class Rl{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return Tc(t)?(s=t,i={name:s}):(s=t.name,i=t),new Rl(e,Le(Ol(e,"name"),s),je(Ol(e,"aliases"),i.aliases,e.aliases),Pl.keyFrom(s))}register(t){const{Type:e,key:s,aliases:i}=this;Zs.singleton(s,e).register(t),Zs.aliasTo(s,e).register(t),Hc(i,Pl,s,t)}}const El=ac("value-converter"),Ol=(t,e)=>ec(oc(e),t),Pl=vc({name:El,keyFrom:t=>`${El}:${t}`,isType:t=>Ac(t)&&sc(El,t),define(t,e){const s=Rl.create(t,e);return ic(El,s,s.Type),ic(El,s,s),hc(e,El),s.Type},getDefinition(t){const e=ec(El,t);if(void 0===e)throw fc(`AUR0152:${t.name}`);return e},annotate(t,e,s){ic(oc(e),s,t)},getAnnotation:Ol});class Ml{constructor(t,e){this.v=void 0,this.b=t,this.nt=e}flush(){this.b.updateSource(this.v)}handleChange(t,e){const s=this.b;t!==On(s.ast,s.s,s,null)&&(this.v=t,this.nt.add(this))}}const Nl=t=>{Ec(t.prototype,"useScope",(function(t){this.s=t}))},Bl=(t,e=!0)=>s=>{const i=s.prototype;null!=t&&Rc(i,"strict",{enumerable:!0,get:function(){return t}}),Rc(i,"strictFnCall",{enumerable:!0,get:function(){return e}}),Ec(i,"get",(function(t){return this.l.get(t)})),Ec(i,"getSignaler",(function(){return this.l.root.get(Gh)})),Ec(i,"getConverter",(function(t){const e=Pl.keyFrom(t);let s=jl.get(this);return null==s&&jl.set(this,s=new Ll),s[e]??(s[e]=this.l.get(Uc(e)))})),Ec(i,"getBehavior",(function(t){const e=Il.keyFrom(t);let s=jl.get(this);return null==s&&jl.set(this,s=new Ll),s[e]??(s[e]=this.l.get(Uc(e)))}))},jl=new WeakMap;class Ll{}const Ul=Dc("IFlushQueue",(t=>t.singleton(Dl)));class Dl{constructor(){this.rt=!1,this.ot=new Set}get count(){return this.ot.size}add(t){if(this.ot.add(t),!this.rt){this.rt=!0;try{this.ot.forEach(Fl)}finally{this.rt=!1}}}clear(){this.ot.clear(),this.rt=!1}}function Fl(t,e,s){s.delete(t),t.flush()}const Vl=new WeakSet,Wl=(t,e)=>{Ec(t.prototype,"limit",(function(t){if(Vl.has(this))throw fc("AURXXXX: a rate limit has already been applied.");Vl.add(this);const s=e(this,t),i=this[s],n=(...t)=>i.call(this,...t),r="debounce"===t.type?_l(t,n,this):ql(t,n,this);return this[s]=r,{dispose:()=>{Vl.delete(this),r.dispose(),delete this[s]}}}))},_l=(t,e,s)=>{let i,n,r;const o=t.queue,a=a=>{r=a,s.isBound?(n=i,i=o.queueTask((()=>e(r)),{delay:t.delay,reusable:!1}),n?.cancel()):e(r)};return a.dispose=()=>{n?.cancel(),i?.cancel()},a},ql=(t,e,s)=>{let i,n,r,o=0,a=0;const h=t.queue,c=()=>t.now(),l=l=>{r=l,s.isBound?(a=c()-o,n=i,a>t.delay?(o=c(),e(r)):i=h.queueTask((()=>{o=c(),e(r)}),{delay:t.delay-a,reusable:!1}),n?.cancel()):e(r)};return l.dispose=()=>{n?.cancel(),i?.cancel()},l},Hl={reusable:!1,preempt:!0};class Kl{constructor(t,e,s,i,n,r,o,a,h){this.targetAttribute=o,this.targetProperty=a,this.mode=h,this.isBound=!1,this.s=void 0,this.lt=null,this.v=void 0,this.boundFn=!1,this.l=e,this.ast=n,this.ht=t,this.target=r,this.oL=s,this.ct=i}updateTarget(t){this.ut.setValue(t,this.target,this.targetProperty)}handleChange(){if(!this.isBound)return;let t;this.obs.version++;const e=On(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),e!==this.v&&(this.v=e,1!==this.ht.state&&(4&this.ut.type)>0?(t=this.lt,this.lt=this.ct.queueTask((()=>{this.lt=null,this.updateTarget(e)}),Hl),t?.cancel()):this.updateTarget(e))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Mn(this.ast,t,this),this.ut??(this.ut=new wl(this.target,this.targetProperty,this.targetAttribute)),3&this.mode&&this.updateTarget(this.v=On(this.ast,t,this,(2&this.mode)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Nn(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.lt?.cancel(),this.lt=null,this.obs.clearAll())}}Nl(Kl),Wl(Kl,(()=>"updateTarget")),ao(Kl),Bl(!0)(Kl);const zl={reusable:!1,preempt:!0};class Gl{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.lt=null,this.ht=t,this.oL=s,this.ct=i,this.ut=s.getAccessor(r,o);const h=n.expressions,c=this.partBindings=Array(h.length),l=h.length;let u=0;for(;l>u;++u)c[u]=new Ql(h[u],r,o,e,s,this)}ft(){this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast.parts,s=t.length;let i="",n=0;if(1===s)i=e[0]+t[0].v+e[1];else for(i=e[0];s>n;++n)i+=t[n].v+e[n+1];const r=this.ut;let o;1!==this.ht.state&&(4&r.type)>0?(o=this.lt,this.lt=this.ct.queueTask((()=>{this.lt=null,r.setValue(i,this.target,this.targetProperty)}),zl),o?.cancel(),o=null):r.setValue(i,this.target,this.targetProperty)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,s=e.length;let i=0;for(;s>i;++i)e[i].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let s=0;for(;e>s;++s)t[s].unbind();this.lt?.cancel(),this.lt=null}}class Ql{constructor(t,e,s,i,n,r){this.ast=t,this.target=e,this.targetProperty=s,this.owner=r,this.mode=2,this.task=null,this.isBound=!1,this.v="",this.boundFn=!1,this.l=i,this.oL=n}updateTarget(){this.owner.ft()}handleChange(){if(!this.isBound)return;this.obs.version++;const t=On(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),t!=this.v&&(this.v=t,Sc(t)&&this.observeCollection(t),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Mn(this.ast,t,this),this.v=On(this.ast,this.s,this,(2&this.mode)>0?this:null),Sc(this.v)&&this.observeCollection(this.v),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Nn(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}Nl(Ql),Wl(Ql,(()=>"updateTarget")),ao(Ql),Bl(!0)(Ql);class Jl{constructor(t,e,s,i,n,r,o,a){this.p=n,this.ast=r,this.target=o,this.strict=a,this.isBound=!1,this.mode=2,this.lt=null,this.v="",this.boundFn=!1,this.l=e,this.ht=t,this.oL=s,this.ct=i}updateTarget(t){const e=this.target,s=this.p.Node,i=this.v;this.v=t,i instanceof s&&i.parentNode?.removeChild(i),t instanceof s?(e.textContent="",e.parentNode?.insertBefore(t,e)):e.textContent=String(t)}handleChange(){if(!this.isBound)return;this.obs.version++;const t=On(this.ast,this.s,this,(2&this.mode)>0?this:null);if(this.obs.clear(),t===this.v)return this.lt?.cancel(),void(this.lt=null);1!==this.ht.state?this.dt(t):this.updateTarget(t)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const t=this.v=On(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),Sc(t)&&this.observeCollection(t),1!==this.ht.state?this.dt(t):this.updateTarget(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Mn(this.ast,t,this);const e=this.v=On(this.ast,this.s,this,(2&this.mode)>0?this:null);Sc(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Nn(this.ast,this.s,this),this.s=void 0,this.obs.clearAll(),this.lt?.cancel(),this.lt=null)}dt(t){const e=this.lt;this.lt=this.ct.queueTask((()=>{this.lt=null,this.updateTarget(t)}),zl),e?.cancel()}}Nl(Jl),Wl(Jl,(()=>"updateTarget")),ao()(Jl),Bl(void 0,!1)(Jl);class Xl{constructor(t,e,s,i,n=!1){this.ast=s,this.targetProperty=i,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.gt=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=On(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.gt?t.bindingContext:t.overrideContext,Mn(this.ast,t,this),this.v=On(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Nn(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}Nl(Xl),Wl(Xl,(()=>"updateTarget")),ao(Xl),Bl(!0)(Xl);class Yl{constructor(t,e,s,i,n,r,o,a){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.isBound=!1,this.s=void 0,this.ut=void 0,this.lt=null,this.vt=null,this.boundFn=!1,this.l=e,this.ht=t,this.ct=i,this.oL=s}updateTarget(t){this.ut.setValue(t,this.target,this.targetProperty)}updateSource(t){Pn(this.ast,this.s,this,t)}handleChange(){if(!this.isBound)return;this.obs.version++;const t=On(this.ast,this.s,this,(2&this.mode)>0?this:null);this.obs.clear(),1!==this.ht.state&&(4&this.ut.type)>0?(Zl=this.lt,this.lt=this.ct.queueTask((()=>{this.updateTarget(t),this.lt=null}),tu),Zl?.cancel(),Zl=null):this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Mn(this.ast,t,this);const e=this.oL,s=this.mode;let i=this.ut;i||(i=4&s?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.ut=i);const n=(2&s)>0;3&s&&this.updateTarget(On(this.ast,this.s,this,n?this:null)),4&s&&(i.subscribe(this.vt??(this.vt=new Ml(this,this.l.get(Ul)))),n||this.updateSource(i.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Nn(this.ast,this.s,this),this.s=void 0,this.vt&&(this.ut.unsubscribe(this.vt),this.vt=null),this.lt?.cancel(),this.lt=null,this.obs.clearAll())}useTargetObserver(t){this.ut?.unsubscribe(this),(this.ut=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.vt)throw fc("AURxxxx: binding already has a target subscriber");this.vt=t}}Nl(Yl),Wl(Yl,(t=>4&t.mode?"updateSource":"updateTarget")),ao(Yl),Bl(!0,!1)(Yl);let Zl=null;const tu={reusable:!1,preempt:!0};class eu{constructor(t,e,s){this.ast=e,this.target=s,this.isBound=!1,this.s=void 0,this.l=t}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Mn(this.ast,t,this),Pn(this.ast,this.s,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,On(this.ast,this.s,this,null)===this.target&&Pn(this.ast,this.s,this,null),Nn(this.ast,this.s,this),this.s=void 0)}}Bl(!1)(eu);class su{constructor(t,e=!1){this.prevent=t,this.capture=e}}class iu{constructor(t,e,s,i,n){this.ast=e,this.target=s,this.targetEvent=i,this.isBound=!1,this.self=!1,this.boundFn=!0,this.l=t,this.xt=n}callSource(t){const e=this.s.overrideContext;e.$event=t;let s=On(this.ast,this.s,this,null);return delete e.$event,Ac(s)&&(s=s(t)),!0!==s&&this.xt.prevent&&t.preventDefault(),s}handleEvent(t){this.self&&this.target!==t.composedPath()[0]||this.callSource(t)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,Mn(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.xt),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Nn(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.xt))}}Nl(iu),Wl(iu,(()=>"callSource")),Bl(!0,!0)(iu);const nu=Dc("IAppTask");class ru{constructor(t,e,s){this.c=void 0,this.slot=t,this.k=e,this.cb=s}register(t){return this.c=t.register(Wc(nu,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}function ou(t){return function(e,s){return Ac(s)?new ru(t,e,s):new ru(t,null,e)}}vc({creating:ou("creating"),hydrating:ou("hydrating"),hydrated:ou("hydrated"),activating:ou("activating"),activated:ou("activated"),deactivating:ou("deactivating"),deactivated:ou("deactivated")});const au=si,hu=oc("watch"),cu=vc({name:hu,add(t,e){let s=ec(hu,t);null==s&&ic(hu,s=[],t),s.push(e)},getAnnotation:t=>ec(hu,t)??au});function lu(t){return function(e){return mu(t,e)}}function uu(t){return function(e){return mu(Tc(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class du{constructor(t,e,s,i,n,r,o,a,h,c){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=c}get type(){return 2}static create(t,e){let s,i;return Tc(t)?(s=t,i={name:s}):(s=t.name,i=t),new du(e,Le(gu(e,"name"),s),je(gu(e,"aliases"),i.aliases,e.aliases),fu(s),Le(gu(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,2),Le(gu(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Nc.from(e,...Nc.getAll(e),gu(e,"bindables"),e.bindables,i.bindables),Le(gu(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),je(cu.getAnnotation(e),e.watches),je(gu(e,"dependencies"),i.dependencies,e.dependencies))}register(t){const{Type:e,key:s,aliases:i}=this;_c(s,e).register(t),Vc(s,e).register(t),Hc(i,bu,s,t)}}const pu=ac("custom-attribute"),fu=t=>`${pu}:${t}`,gu=(t,e)=>ec(oc(e),t),vu=(t,e)=>Jd(t,fu(e))??void 0,mu=(t,e)=>{const s=du.create(t,e);return ic(pu,s,s.Type),ic(pu,s,s),hc(e,pu),s.Type},wu=t=>{const e=ec(pu,t);if(void 0===e)throw fc(`AUR0759:${t.name}`);return e},bu=vc({name:pu,keyFrom:fu,isType:t=>Ac(t)&&sc(pu,t),for:vu,define:mu,getDefinition:wu,annotate(t,e,s){ic(oc(e),s,t)},getAnnotation:gu});function yu(t){return t.startsWith(ku)}const ku=oc("children-observer"),Cu=vc({name:ku,keyFrom:t=>`${ku}:${t}`,from(...t){const e={};function s(t){e[t]=Au.create(t)}function i(t,s){e[t]=Au.create(t,s)}return t.forEach((function(t){Sc(t)?t.forEach(s):t instanceof Au?e[t.property]=t:void 0!==t&&bc(t).forEach((e=>i(e,t)))})),e},getAll(t){const e=ku.length+1,s=[],i=Ue(t);let n,r,o,a=i.length,h=0;for(;--a>=0;){o=i[a],n=lc(o).filter(yu),r=n.length;for(let t=0;t<r;++t)s[h++]=ec(ku,o,n[t].slice(e))}return s}}),Su={childList:!0};class Au{constructor(t,e,s,i,n,r){this.callback=t,this.property=e,this.options=s,this.query=i,this.filter=n,this.map=r}static create(t,e={}){return new Au(Le(e.callback,`${t}Changed`),Le(e.property,t),e.options??Su,e.query,e.filter,e.map)}}class Tu{constructor(t,e,s,i,n=$u,r=xu,o=Iu,a){this.controller=t,this.obj=e,this.propertyKey=s,this.query=n,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[i],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){this.observing||(this.observing=!0,this.children=this.get(),(this.observer??(this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.wt()})))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=si)}wt(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0)}get(){return function(t,e,s,i){const n=e(t),r=n.length,o=[];let a,h,c,l=0;for(;l<r;++l)a=n[l],h=bp(a,Ru),c=h?.viewModel??null,s(a,h,c)&&o.push(i(a,h,c));return o}(this.controller,this.query,this.filter,this.map)}}function $u(t){return t.host.childNodes}function xu(t,e,s){return!!s}function Iu(t,e,s){return s}Kn()(Tu);const Ru={optional:!0},Eu=ri,Ou=(t,e,s,i)=>{t.addEventListener(e,s,i)},Pu=(t,e,s,i)=>{t.removeEventListener(e,s,i)},Mu=t=>{const e=t.prototype;Ec(e,"subscribe",(function(t){if(this.subs.add(t)&&1===this.subs.count){for(Nu of this.cf.events)Ou(this.bt,Nu,this);this.yt=!0,this.kt?.()}})),Ec(e,"unsubscribe",(function(t){if(this.subs.remove(t)&&0===this.subs.count){for(Nu of this.cf.events)Pu(this.bt,Nu,this);this.yt=!1,this.At?.()}})),Ec(e,"useConfig",(function(t){if(this.cf=t,this.yt){for(Nu of this.cf.events)Pu(this.bt,Nu,this);for(Nu of this.cf.events)Ou(this.bt,Nu,this)}}))};let Nu;const Bu=t=>{Ec(t.prototype,"subscribe",ni),Ec(t.prototype,"unsubscribe",ni)};class ju{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.Ct={},this.Bt=0,this.J=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t){this.value=t,this.J=t!==this.ov,this.it()}it(){if(this.J){this.J=!1;const t=this.value,e=this.Ct,s=Lu(t);let i=this.Bt;if(this.ov=t,s.length>0&&this.Rt(s),this.Bt+=1,0===i)return;i-=1;for(const t in e)gc.call(e,t)&&e[t]===i&&this.obj.classList.remove(t)}}Rt(t){const e=this.obj,s=t.length;let i,n=0;for(;n<s;n++)i=t[n],0!==i.length&&(this.Ct[i]=this.Bt,e.classList.add(i))}}function Lu(t){if(Tc(t))return Uu(t);if("object"!=typeof t)return si;if(t instanceof Array){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...Lu(t[i]));return s}return si}const e=[];let s;for(s in t)Boolean(t[s])&&(s.includes(" ")?e.push(...Uu(s)):e.push(s));return e}function Uu(t){const e=t.match(/\S+/g);return null===e?si:e}Bu(ju),Dc("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>_u.supported(t.get(Eu))?t.get(Du):t.get(Fu)))));class Du{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new _u(this.p,t,this.cache,e)}}Du.inject=[Eu];class Fu{constructor(t){this.p=t}createStyles(t,e){return new qu(this.p,t,e)}}Fu.inject=[Eu];const Vu=Dc("IShadowDOMStyles"),Wu=Dc("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:ni})));class _u{constructor(t,e,s,i=null){this.sharedStyles=i,this.styleSheets=e.map((e=>{let i;return e instanceof t.CSSStyleSheet?i=e:(i=s.get(e),void 0===i&&(i=new t.CSSStyleSheet,i.replaceSync(e),s.set(e,i))),i}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class qu{constructor(t,e,s=null){this.p=t,this.localStyles=e,this.sharedStyles=s}applyTo(t){const e=this.localStyles,s=this.p;for(let i=e.length-1;i>-1;--i){const n=s.document.createElement("style");n.innerHTML=e[i],t.prepend(n)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:Hu,exit:Ku}=Pa,{wrap:zu,unwrap:Gu}=Th;class Qu{constructor(t,e,s,i,n){this.obj=t,this.$get=s,this.useProxy=n,this.isBound=!1,this.running=!1,this.v=void 0,this.cb=i,this.oL=e}get value(){return this.v}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.v,s=this.compute();Ic(s,e)||this.cb.call(t,s,e,t)}compute(){this.running=!0,this.obs.version++;try{return Hu(this),this.v=Gu(this.$get.call(void 0,this.useProxy?zu(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,Ku(this)}}}class Ju{constructor(t,e,s,i,n){this.scope=t,this.l=e,this.oL=s,this.isBound=!1,this.boundFn=!1,this.obj=t.bindingContext,this.St=i,this.cb=n}get value(){return this.v}handleChange(t){const e=this.St,s=this.obj,i=this.v;1===e.$kind&&1===this.obs.count||(this.obs.version++,t=On(e,this.scope,this,this),this.obs.clear()),Ic(t,i)||(this.v=t,this.cb.call(s,t,i,s))}bind(){this.isBound||(this.obs.version++,this.v=On(this.St,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}ao(Qu),ao(Ju),Bl(!0)(Ju);const Xu=Dc("ILifecycleHooks");class Yu{constructor(t,e){this.definition=t,this.instance=e}}class Zu{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const s=new Set;let i=e.prototype;for(;i!==dc;){for(const t of wc(i))"constructor"!==t&&s.add(t);i=Object.getPrototypeOf(i)}return new Zu(e,s)}register(t){Fc(Xu,this.Type).register(t)}}const td=new WeakMap,ed=oc("lifecycle-hooks"),sd=vc({name:ed,define(t,e){const s=Zu.create(t,e);return ic(ed,s,e),hc(e,ed),s.Type},resolve(t){let e=td.get(t);if(void 0===e){td.set(t,e=new id);const s=t.root,i=s.id===t.id?t.getAll(Xu):t.has(Xu,!1)?s.getAll(Xu).concat(t.getAll(Xu)):s.getAll(Xu);let n,r,o,a,h;for(n of i)for(a of(r=ec(ed,n.constructor),o=new Yu(r,n),r.propertyNames))h=e[a],void 0===h?e[a]=[o]:h.push(o)}return e}});class id{}const nd=Dc("IViewFactory");class rd{constructor(t,e){this.isCaching=!1,this.Y=null,this.It=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=rd.maxCacheSize:Tc(t)&&(t=parseInt(t,10)),-1!==this.It&&e||(this.It=t)),this.It>0?this.Y=[]:this.Y=null,this.isCaching=this.It>0}canReturnToCache(t){return null!=this.Y&&this.Y.length<this.It}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.Y.push(t),!0)}create(t){const e=this.Y;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=dd.$view(this,t),s)}}rd.maxCacheSize=65535;const od=Dc("IRendering",(t=>t.singleton(ad)));class ad{constructor(t){this.Tt=new WeakMap,this.Pt=new WeakMap;const e=t.root;this.p=(this.Et=e).get(Eu),this.ep=e.get(ho),this.oL=e.get(Uh),this.Lt=new np(this.p,this.p.document.createDocumentFragment())}get renderers(){return this.Dt??(this.Dt=this.Et.getAll(Gp,!1).reduce(((t,e)=>(t[e.target]=e,t)),pc()))}compile(t,e,s){if(!1!==t.needsCompile){const i=this.Tt,n=e.get(zp);let r=i.get(t);return null==r?i.set(t,r=n.compile(t,e,s)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new rd(e,hp.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new np(this.p,t.template);let e;const s=this.Pt;if(s.has(t))e=s.get(t);else{const i=this.p,n=i.document,r=t.template;let o;null===r?e=null:r instanceof i.Node?"TEMPLATE"===r.nodeName?e=n.adoptNode(r.content):(e=n.adoptNode(n.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=n.createElement("template"),Tc(r)&&(o.innerHTML=r),n.adoptNode(e=o.content)),s.set(t,e)}return null==e?this.Lt:new np(this.p,e.cloneNode(!0))}render(t,e,s,i){const n=s.instructions,r=this.renderers,o=e.length;if(e.length!==n.length)throw fc(`AUR0757:${o}<>${n.length}`);let a,h,c,l=0,u=0,d=0;if(o>0)for(;o>l;){for(a=n[l],c=e[l],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,c,h,this.p,this.ep,this.oL),++u;++l}if(null!=i&&(a=s.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,i,h,this.p,this.ep,this.oL),++u}}var hd,cd;ad.inject=[Ns],function(t){t[t.none=0]="none",t[t.fromBind=1]="fromBind",t[t.fromUnbind=2]="fromUnbind",t[t.dispose=4]="dispose"}(hd||(hd={})),function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(cd||(cd={}));const ld={optional:!0},ud=new WeakMap;class dd{constructor(t,e,s,i,n,r,o){this.container=t,this.vmKind=e,this.definition=s,this.viewFactory=i,this.host=r,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.Ut=null,this.state=0,this.$t=!1,this._t=si,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.qt=0,this.Mt=0,this.Ft=0,this.Ot=n,this.Vt=2===e?wd.none:new wd(n),this.location=o,this.r=t.root.get(od)}get lifecycleHooks(){return this.Ut}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get hooks(){return this.Vt}get viewModel(){return this.Ot}set viewModel(t){this.Ot=t,this.Vt=null==t||2===this.vmKind?wd.none:new wd(t)}static getCached(t){return ud.get(t)}static getCachedOrThrow(t){const e=dd.getCached(t);if(void 0===e)throw fc(`AUR0500:${t}`);return e}static $el(t,e,s,i,n=undefined,r=null){if(ud.has(e))return ud.get(e);n=n??kp(e.constructor);const o=new dd(t,0,n,null,e,s,r),a=t.get(Ws(Ad));return n.dependencies.length>0&&t.register(...n.dependencies),qc(t,Ad,new ti("IHydrationContext",new Td(o,i,a))),ud.set(e,o),null!=i&&!1===i.hydrate||o.hE(i,a),o}static $attr(t,e,s,i){if(ud.has(e))return ud.get(e);i=i??wu(e.constructor);const n=new dd(t,1,i,null,e,s,null);return i.dependencies.length>0&&t.register(...i.dependencies),ud.set(e,n),n.Nt(),n}static $view(t,e=undefined){const s=new dd(t.container,2,null,t,null,null,null);return s.parent=e??null,s.jt(),s}hE(t,e){const s=this.container,i=(this.flags,this.Ot);let n=this.definition;if(this.scope=$n.create(i,null,!0),n.watches.length>0&&md(this,s,n,i),fd(this,n,0,i),this._t=function(t,e,s){const i=e.childrenObservers,n=wc(i),r=n.length;if(r>0){const e=pd(s),o=[];let a,h,c=0;for(;c<r;++c)a=n[c],null==e[a]&&(h=i[a],o[o.length]=e[a]=new Tu(t,s,a,h.callback,h.query,h.filter,h.map,h.options));return o}return si}(this,n,i),this.Vt.hasDefine){const t=i.define(this,e,n);void 0!==t&&t!==n&&(n=hp.getOrCreate(t))}this.Ut=sd.resolve(s),n.register(s),null!==n.injectable&&qc(s,n.injectable,new ti("definition.injectable",i)),null!=t&&!1===t.hydrate||(this.hS(t),this.hC())}hS(t){void 0!==this.Ut.hydrating&&this.Ut.hydrating.forEach(Id,this),this.Vt.hasHydrating&&this.Ot.hydrating(this);const e=this.Ht=this.r.compile(this.definition,this.container,t),{shadowOptions:s,isStrictBinding:i,hasSlots:n,containerless:r}=e;let o=this.location;if(this.isStrictBinding=i,null!==(this.hostController=bp(this.host,ld))&&(this.host=this.container.root.get(Eu).document.createElement(this.definition.name),r&&null==o&&(o=this.location=sp(this.host))),Xd(this.host,gp,this),Xd(this.host,this.definition.key,this),null!==s||n){if(null!=o)throw fc("AUR0501");Xd(this.shadowRoot=this.host.attachShadow(s??bd),gp,this),Xd(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else null!=o?(Xd(o,gp,this),Xd(o,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.Ot.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.Ut.hydrated&&this.Ut.hydrated.forEach(Rd,this),this.Vt.hasHydrated&&this.Ot.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Ht,this.host),void 0!==this.Ut.created&&this.Ut.created.forEach(xd,this),this.Vt.hasCreated&&this.Ot.created(this)}Nt(){const t=this.definition,e=this.Ot;t.watches.length>0&&md(this,this.container,t,e),fd(this,t,this.flags,e),e.$controller=this,this.Ut=sd.resolve(this.container),void 0!==this.Ut.created&&this.Ut.created.forEach(xd,this),this.Vt.hasCreated&&this.Ot.created(this)}jt(){this.Ht=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.Ht.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.Ht)).findTargets(),this.Ht,void 0)}activate(t,e,s,i){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw fc(`AUR0502:${this.name}`);default:throw fc(`AUR0503:${this.name} ${Cd(this.state)}`)}switch(this.parent=e,s|=1,this.vmKind){case 0:this.scope.parent=i??null;break;case 1:this.scope=i??null;break;case 2:if(null==i)throw fc("AUR0504");this.hasLockedScope||(this.scope=i)}let n;return this.isStrictBinding,this.$initiator=t,this.$flags=s,this.Wt(),2!==this.vmKind&&null!=this.Ut.binding&&(n=We(...this.Ut.binding.map(Ed,this))),this.Vt.hasBinding&&(n=We(n,this.Ot.binding(this.$initiator,this.parent,this.$flags))),Cc(n)?(this.zt(),n.then((()=>{this.bind()})).catch((t=>{this.Gt(t)})),this.$promise):(this.bind(),this.$promise)}bind(){let t,e=0,s=this._t.length;if(s>0)for(;s>e;)this._t[e].start(),++e;if(null!==this.bindings)for(e=0,s=this.bindings.length;s>e;)this.bindings[e].bind(this.scope),++e;if(2!==this.vmKind&&null!=this.Ut.bound&&(t=We(...this.Ut.bound.map(Od,this))),this.Vt.hasBound&&(t=We(t,this.Ot.bound(this.$initiator,this.parent,this.$flags))),Cc(t))return this.zt(),void t.then((()=>{this.isBound=!0,this.Xt()})).catch((t=>{this.Gt(t)}));this.isBound=!0,this.Xt()}Kt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Xt(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Kt(this.host);break;case 3:this.hostController.Kt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(Vu,!1)?t.get(Vu):t.get(Wu)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}let t,e=0;if(2!==this.vmKind&&null!=this.Ut.attaching&&(t=We(...this.Ut.attaching.map(Pd,this))),this.Vt.hasAttaching&&(t=We(t,this.Ot.attaching(this.$initiator,this.parent,this.$flags))),Cc(t)&&(this.zt(),this.Wt(),t.then((()=>{this.Qt()})).catch((t=>{this.Gt(t)}))),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.Qt()}deactivate(t,e,s){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw fc(`AUR0505:${this.name} ${Cd(this.state)}`)}this.$initiator=t,this.$flags=s,t===this&&this.Yt();let i,n=0;if(this._t.length)for(;n<this._t.length;++n)this._t[n].stop();if(null!==this.children)for(n=0;n<this.children.length;++n)this.children[n].deactivate(t,this,s);if(2!==this.vmKind&&null!=this.Ut.detaching&&(i=We(...this.Ut.detaching.map(Nd,this))),this.Vt.hasDetaching&&(i=We(i,this.Ot.detaching(this.$initiator,this.parent,this.$flags))),Cc(i)&&(this.zt(),t.Yt(),i.then((()=>{t.Zt()})).catch((e=>{t.Gt(e)}))),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Zt(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=2|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parent=null}4==(4&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.Jt()}zt(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.zt())}Jt(){void 0!==this.$promise&&(jd=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,jd(),jd=void 0)}Gt(t){void 0!==this.$promise&&(Ld=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,Ld(t),Ld=void 0),this.$initiator!==this&&this.parent.Gt(t)}Wt(){++this.qt,this.$initiator!==this&&this.parent.Wt()}Qt(){if(0==--this.qt){if(2!==this.vmKind&&null!=this.Ut.attached&&(Ud=We(...this.Ut.attached.map(Md,this))),this.Vt.hasAttached&&(Ud=We(Ud,this.Ot.attached(this.$initiator,this.$flags))),Cc(Ud))return this.zt(),Ud.then((()=>{this.state=2,this.Jt(),this.$initiator!==this&&this.parent.Qt()})).catch((t=>{this.Gt(t)})),void(Ud=void 0);Ud=void 0,this.state=2,this.Jt()}this.$initiator!==this&&this.parent.Qt()}Yt(){++this.Mt}Zt(){if(0==--this.Mt){this.te(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),2!==e.vmKind&&null!=e.Ut.unbinding&&(t=We(...e.Ut.unbinding.map(Bd,this))),e.Vt.hasUnbinding&&(e.debug&&e.logger.trace("unbinding()"),t=We(t,e.viewModel.unbinding(e.$initiator,e.parent,e.$flags))),Cc(t)&&(this.zt(),this.te(),t.then((()=>{this.ee()})).catch((t=>{this.Gt(t)}))),t=void 0,e=e.next;this.ee()}}te(){++this.Ft}ee(){if(0==--this.Ft){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return wu(this.Ot.constructor).name===t;case 0:return kp(this.Ot.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(Xd(t,gp,this),Xd(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(Xd(t,gp,this),Xd(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(Xd(t,gp,this),Xd(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.Vt.hasDispose&&this.Ot.dispose(),null!==this.children&&(this.children.forEach($d),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.Ot&&(ud.delete(this.Ot),this.Ot=null),this.Ot=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.Vt.hasAccept&&!0===this.Ot.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}}function pd(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function fd(t,e,s,i){const n=e.bindables,r=wc(n),o=r.length;if(o>0){let e,s,a=0;const h=pd(i),c=t.container,l=c.has(Wn,!0)?c.get(Wn):null;for(;a<o;++a)e=r[a],void 0===h[e]&&(s=n[e],h[e]=new Lc(i,e,s.callback,s.set,t,l))}}const gd=new Map,vd=t=>{let e=gd.get(t);return null==e&&(e=new nn(t,0),gd.set(t,e)),e};function md(t,e,s,i){const n=e.get(Uh),r=e.get(ho),o=s.watches,a=0===t.vmKind?t.scope:$n.create(i,null,!0),h=o.length;let c,l,u,d=0;for(;h>d;++d){if(({expression:c,callback:l}=o[d]),l=Ac(l)?l:Reflect.get(i,l),!Ac(l))throw fc(`AUR0506:${String(l)}`);Ac(c)?t.addBinding(new Qu(i,n,c,l,!0)):(u=Tc(c)?r.parse(c,16):vd(c),t.addBinding(new Ju(a,e,n,u,l)))}}class wd{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}wd.none=new wd({});const bd={mode:"open"};var yd,kd;function Cd(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(yd||(yd={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(kd||(kd={}));const Sd=Dc("IController"),Ad=Dc("IHydrationContext");class Td{constructor(t,e,s){this.instruction=e,this.parent=s,this.controller=t}}function $d(t){t.dispose()}function xd(t){t.instance.created(this.Ot,this)}function Id(t){t.instance.hydrating(this.Ot,this)}function Rd(t){t.instance.hydrated(this.Ot,this)}function Ed(t){return t.instance.binding(this.Ot,this.$initiator,this.parent,this.$flags)}function Od(t){return t.instance.bound(this.Ot,this.$initiator,this.parent,this.$flags)}function Pd(t){return t.instance.attaching(this.Ot,this.$initiator,this.parent,this.$flags)}function Md(t){return t.instance.attached(this.Ot,this.$initiator,this.$flags)}function Nd(t){return t.instance.detaching(this.Ot,this.$initiator,this.parent,this.$flags)}function Bd(t){return t.instance.unbinding(this.Ot,this.$initiator,this.parent,this.$flags)}let jd,Ld,Ud;const Dd=Dc("IAppRoot"),Fd=(t,e)=>t.document.createComment(e),Vd=(t,e)=>t.document.createTextNode(e),Wd=(t,e,s)=>t.insertBefore(e,s),_d=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},qd=t=>t.previousSibling,Hd=(t,e)=>t.content.appendChild(e),Kd=(t,e)=>{const s=e.length;let i=0;for(;s>i;)t.content.appendChild(e[i]),++i},zd=t=>{const e=t.previousSibling;let s;if(8===e?.nodeType&&"au-end"===e.textContent){if(s=e,null==(s.$start=s.previousSibling))throw Gd();return t.parentNode?.removeChild(t),s}throw Gd()},Gd=()=>fc("AURxxxx");class Qd{}function Jd(t,e){return t.$au?.[e]??null}function Xd(t,e,s){var i;((i=t).$au??(i.$au=new Qd))[e]=s}const Yd=Dc("INode"),Zd=(Dc("IEventTarget",(t=>t.cachedCallback((t=>t.has(Dd,!0)?t.get(Dd).host:t.get(Eu).document)))),Dc("IRenderLocation")),tp=new WeakMap;function ep(t){if(tp.has(t))return tp.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=bp(t);if(void 0===e)return null;if(2===e.mountTarget)return ep(e.host)}return t.parentNode}function sp(t){if(ip(t))return t;const e=t.ownerDocument.createComment("au-end"),s=e.$start=t.ownerDocument.createComment("au-start"),i=t.parentNode;return null!==i&&(i.replaceChild(e,t),i.insertBefore(s,e)),e}function ip(t){return"au-end"===t.textContent}class np{constructor(t,e){this.platform=t,this.next=void 0,this.ne=!1,this.re=!1,this.ref=null,this.f=e;const s=e.querySelectorAll(".au");let i,n=0,r=s.length,o=this.t=Array(r);for(;r>n;)i=s[n],"AU-M"===i.nodeName?o[n]=zd(i):o[n]=i,++n;const a=e.childNodes,h=this.childNodes=Array(r=a.length);for(n=0;r>n;)h[n]=a[n],++n;this.oe=e.firstChild,this.le=e.lastChild}get firstChild(){return this.oe}get lastChild(){return this.le}findTargets(){return this.t}insertBefore(t){if(this.re&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.ne){let s,i=this.oe;const n=this.le;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.ne=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.ne){let e,s=this.oe;const i=this.le;for(;null!=s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}else this.ne=!0,e||t.appendChild(this.f)}remove(){if(this.ne){this.ne=!1;const t=this.f,e=this.le;let s,i=this.oe;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.ne){let s,i=this.oe;const n=this.le;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.ne=!0,e.insertBefore(this.f,t)}unlink(){this.re=!1,this.next=void 0,this.ref=void 0}link(t){this.re=!0,ip(t)?this.ref=t:(this.next=t,this.he())}he(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const rp=Dc("IWindow",(t=>t.callback((t=>t.get(Eu).window))));function op(t){return function(e){return wp(t,e)}}Dc("ILocation",(t=>t.callback((t=>t.get(rp).location)))),Dc("IHistory",(t=>t.callback((t=>t.get(rp).history))));const ap=new WeakMap;class hp{constructor(t,e,s,i,n,r,o,a,h,c,l,u,d,p,f,g,v,m,w,b,y){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.cache=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=h,this.injectable=c,this.needsCompile=l,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=g,this.shadowOptions=v,this.hasSlots=m,this.enhance=w,this.watches=b,this.processContent=y}get type(){return 1}static create(t,e=null){if(null===e){const s=t;if(Tc(s))throw fc(`AUR0761:${t}`);const i=ts("name",s,mp);return e=Ac(s.Type)?s.Type:Cp(Pe(i)),new hp(e,i,je(s.aliases),ts("key",s,(()=>vp(i))),ts("cache",s,lp),ts("capture",s,dp),ts("template",s,up),je(s.instructions),je(s.dependencies),ts("injectable",s,up),ts("needsCompile",s,pp),je(s.surrogates),Nc.from(e,s.bindables),Cu.from(s.childrenObservers),ts("containerless",s,dp),ts("isStrictBinding",s,dp),ts("shadowOptions",s,up),ts("hasSlots",s,dp),ts("enhance",s,dp),ts("watches",s,fp),Ze("processContent",e,up))}if(Tc(t))return new hp(e,t,je(yp(e,"aliases"),e.aliases),vp(t),Ze("cache",e,lp),Ze("capture",e,dp),Ze("template",e,up),je(yp(e,"instructions"),e.instructions),je(yp(e,"dependencies"),e.dependencies),Ze("injectable",e,up),Ze("needsCompile",e,pp),je(yp(e,"surrogates"),e.surrogates),Nc.from(e,...Nc.getAll(e),yp(e,"bindables"),e.bindables),Cu.from(...Cu.getAll(e),yp(e,"childrenObservers"),e.childrenObservers),Ze("containerless",e,dp),Ze("isStrictBinding",e,dp),Ze("shadowOptions",e,up),Ze("hasSlots",e,dp),Ze("enhance",e,dp),je(cu.getAnnotation(e),e.watches),Ze("processContent",e,up));const s=ts("name",t,mp);return new hp(e,s,je(yp(e,"aliases"),t.aliases,e.aliases),vp(s),Ye("cache",t,e,lp),Ye("capture",t,e,dp),Ye("template",t,e,up),je(yp(e,"instructions"),t.instructions,e.instructions),je(yp(e,"dependencies"),t.dependencies,e.dependencies),Ye("injectable",t,e,up),Ye("needsCompile",t,e,pp),je(yp(e,"surrogates"),t.surrogates,e.surrogates),Nc.from(e,...Nc.getAll(e),yp(e,"bindables"),e.bindables,t.bindables),Cu.from(...Cu.getAll(e),yp(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),Ye("containerless",t,e,dp),Ye("isStrictBinding",t,e,dp),Ye("shadowOptions",t,e,up),Ye("hasSlots",t,e,dp),Ye("enhance",t,e,dp),je(t.watches,cu.getAnnotation(e),e.watches),Ye("processContent",t,e,up))}static getOrCreate(t){if(t instanceof hp)return t;if(ap.has(t))return ap.get(t);const e=hp.create(t);return ap.set(t,e),ic(gp,e,e.Type),e}register(t){const{Type:e,key:s,aliases:i}=this;t.has(s,!1)||(_c(s,e).register(t),Vc(s,e).register(t),Hc(i,Sp,s,t))}}const cp={name:void 0,searchParents:!1,optional:!1},lp=()=>0,up=()=>null,dp=()=>!1,pp=()=>!0,fp=()=>si,gp=ac("custom-element"),vp=t=>`${gp}:${t}`,mp=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),wp=(t,e)=>{const s=hp.create(t,e);return ic(gp,s,s.Type),ic(gp,s,s),hc(s.Type,gp),s.Type},bp=(t,e=cp)=>{if(void 0===e.name&&!0!==e.searchParents){const s=Jd(t,gp);if(null===s){if(!0===e.optional)return null;throw fc("AUR0762")}return s}if(void 0!==e.name){if(!0!==e.searchParents){const s=Jd(t,gp);if(null===s)throw fc("AUR0763");return s.is(e.name)?s:void 0}let s=t,i=!1;for(;null!==s;){const t=Jd(s,gp);if(null!==t&&(i=!0,t.is(e.name)))return t;s=ep(s)}if(i)return;throw fc("AUR0764")}let s=t;for(;null!==s;){const t=Jd(s,gp);if(null!==t)return t;s=ep(s)}throw fc("AUR0765")},yp=(t,e)=>ec(oc(e),t),kp=t=>{const e=ec(gp,t);if(void 0===e)throw fc(`AUR0760:${t.name}`);return e},Cp=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,Reflect.defineProperty(n,"name",t),i!==e&&mc(n.prototype,i),n}}(),Sp=vc({name:gp,keyFrom:vp,isType:t=>Ac(t)&&sc(gp,t),for:bp,define:wp,getDefinition:kp,annotate:(t,e,s)=>{ic(oc(e),s,t)},getAnnotation:yp,generateName:mp,createInjectable:()=>{const t=function(e,s,i){return Ms.getOrCreateAnnotationParamTypes(e)[i]=t,e};return t.register=function(e){return{resolve:(e,s)=>s.has(t,!0)?s.get(t):null}},t},generateType:Cp});oc("processContent"),Dc("IProjections");const Ap=Dc("IAuSlotsInfo");class Tp{constructor(t){this.projectedSlots=t}}var $p;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.multiAttr="rl",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}($p||($p={}));const xp=Dc("Instruction");class Ip{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class Rp{constructor(t,e,s){this.from=t,this.to=e,this.mode=s,this.type="rg"}}class Ep{constructor(t,e,s){this.forOf=t,this.to=e,this.props=s,this.type="rk"}}class Op{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class Pp{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class Mp{constructor(t,e,s){this.value=t,this.to=e,this.command=s,this.type="rl"}}class Np{constructor(t,e,s,i,n,r){this.res=t,this.alias=e,this.props=s,this.projections=i,this.containerless=n,this.captures=r,this.type="ra",this.auSlot=null}}class Bp{constructor(t,e,s){this.res=t,this.alias=e,this.props=s,this.type="rb"}}class jp{constructor(t,e,s,i){this.def=t,this.res=e,this.alias=s,this.props=i,this.type="rc"}}class Lp{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class Up{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class Dp{constructor(t,e){this.from=t,this.strict=e,this.type="ha"}}class Fp{constructor(t,e,s,i){this.from=t,this.to=e,this.preventDefault=s,this.capture=i,this.type="hb"}}class Vp{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class Wp{constructor(t){this.value=t,this.type="hf"}}class _p{constructor(t){this.value=t,this.type="hg"}}class qp{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}class Hp{constructor(){this.type="hs"}}class Kp{constructor(t){this.instructions=t,this.type="hp"}}const zp=Dc("ITemplateCompiler"),Gp=Dc("IRenderer");function Qp(t){return function(e){return e.register=function(t){Fc(Gp,this).register(t)},$c(e.prototype,"target",{configurable:!0,get:function(){return t}}),e}}function Jp(t,e,s){return Tc(e)?t.parse(e,s):e}function Xp(t){return null!=t.viewModel?t.viewModel:t}let Yp=class{render(t,e,s){const i=Xp(e);void 0!==i.$observers?.[s.to]?i.$observers[s.to].setValue(s.value):i[s.to]=s.value}};Yp=Zh([Qp("re")],Yp);let Zp=class{constructor(t){this.r=t}static get inject(){return[od]}render(t,e,s,i,n,r){let o,a,h,c;const l=s.res,u=s.projections,d=t.container;if("string"==typeof l){if(o=d.find(Sp,l),null==o)throw fc(`AUR0752:${l}@${t.name}`)}else o=l;const p=s.containerless||o.containerless?sp(e):null,f=function(t,e,s,i,n,r){const o=e.container.createChild();return qc(o,t.HTMLElement,qc(o,t.Element,qc(o,Yd,new ti("ElementResolver",s)))),qc(o,Sd,new ti(wf,e)),qc(o,xp,new ti(bf,i)),qc(o,Zd,null==n?Tf:new Af(n)),qc(o,nd,$f),qc(o,Ap,null==r?xf:new ti(kf,r)),o}(i,t,e,s,p,null==u?void 0:new Tp(bc(u)));a=o.Type,h=f.invoke(a),qc(f,a,new ti(o.key,h)),c=dd.$el(f,h,e,s,o,p),Xd(e,o.key,c);const g=this.r.renderers,v=s.props,m=v.length;let w,b=0;for(;m>b;)w=v[b],g[w.type].render(t,c,w,i,n,r),++b;t.addChild(c)}};Zp=Zh([Qp("ra")],Zp);let tf=class{constructor(t){this.r=t}static get inject(){return[od]}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=a.find(bu,s.res),null==o)throw fc(`AUR0753:${s.res}@${t.name}`)}else o=s.res;const h=Sf(i,o,t,e,s,void 0,void 0),c=dd.$attr(h.ctn,h.vm,e,o);Xd(e,o.key,c);const l=this.r.renderers,u=s.props,d=u.length;let p,f=0;for(;d>f;)p=u[f],l[p.type].render(t,c,p,i,n,r),++f;t.addChild(c)}};tf=Zh([Qp("rb")],tf);let ef=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[od,Eu]}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=a.find(bu,s.res),null==o)throw fc(`AUR0754:${s.res}@${t.name}`)}else o=s.res;const h=this.r.getViewFactory(s.def,a),c=sp(e),l=Sf(this.p,o,t,e,s,h,c),u=dd.$attr(l.ctn,l.vm,e,o);Xd(c,o.key,u),l.vm.link?.(t,u,e,s);const d=this.r.renderers,p=s.props,f=p.length;let g,v=0;for(;f>v;)g=p[v],d[g.type].render(t,u,g,i,n,r),++v;t.addChild(u)}};ef=Zh([Qp("rc")],ef);let sf=class{render(t,e,s,i,n,r){e.remove();const o=s.instructions,a=s.toBindingContext,h=t.container,c=o.length;let l,u,d=0;for(;c>d;)l=o[d],u=Jp(n,l.from,16),t.addBinding(new Xl(h,r,u,l.to,a)),++d}};sf=Zh([Qp("rd")],sf);let nf=class{render(t,e,s,i,n){t.addBinding(new eu(t.container,Jp(n,s.from,16),function(t,e){if("element"===e)return t;switch(e){case"controller":return bp(t);case"view":throw fc("AUR0750");case"view-model":return bp(t).viewModel;default:{const s=vu(t,e);if(void 0!==s)return s.viewModel;const i=bp(t,{name:e});if(void 0===i)throw fc(`AUR0751:${e}`);return i.viewModel}}}(e,s.to)))}};nf=Zh([Qp("rj")],nf);let rf=class{render(t,e,s,i,n,r){t.addBinding(new Gl(t,t.container,r,i.domWriteQueue,Jp(n,s.from,1),Xp(e),s.to,2))}};rf=Zh([Qp("rf")],rf);let of=class{render(t,e,s,i,n,r){t.addBinding(new Yl(t,t.container,r,i.domWriteQueue,Jp(n,s.from,16),Xp(e),s.to,s.mode))}};of=Zh([Qp("rg")],of);let af=class{render(t,e,s,i,n,r){t.addBinding(new Yl(t,t.container,r,i.domWriteQueue,Jp(n,s.forOf,2),Xp(e),s.to,2))}};af=Zh([Qp("rk")],af);let hf=class{render(t,e,s,i,n,r){t.addBinding(new Jl(t,t.container,r,i.domWriteQueue,i,Jp(n,s.from,16),Wd(e.parentNode,Vd(i,""),e),s.strict))}};hf=Zh([Qp("ha")],hf);let cf=class{render(t,e,s,i,n){t.addBinding(new iu(t.container,Jp(n,s.from,8),e,s.to,new su(s.preventDefault,s.capture)))}};cf=Zh([Qp("hb")],cf);let lf=class{render(t,e,s){e.setAttribute(s.to,s.value)}};lf=Zh([Qp("he")],lf);let uf=class{render(t,e,s){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(e.classList,s.value)}};uf=Zh([Qp("hf")],uf);let df=class{render(t,e,s){e.style.cssText+=s.value}};df=Zh([Qp("hg")],df);let pf=class{render(t,e,s,i,n,r){t.addBinding(new Yl(t,t.container,r,i.domWriteQueue,Jp(n,s.from,16),e.style,s.to,2))}};pf=Zh([Qp("hd")],pf);let ff=class{render(t,e,s,i,n,r){t.addBinding(new Kl(t,t.container,r,i.domWriteQueue,Jp(n,s.from,16),e,s.attr,s.to,2))}};ff=Zh([Qp("hc")],ff);let gf=class{constructor(t,e){this.ae=t,this.r=e}static get inject(){return[zp,od]}render(t,e,s,i,n,r){const o=t.container.get(Ad),a=this.r.renderers,h=t=>{let e=t,s=o;for(;null!=s&&e>0;)s=s.parent,--e;if(null==s)throw fc("No scope context for spread binding.");return s},c=s=>{const o=h(s),l=mf(o),u=this.ae.compileSpread(o.controller.definition,o.instruction?.captures??si,o.controller.container,e);let d;for(d of u)switch(d.type){case"hs":c(s+1);break;case"hp":a[d.instructions.type].render(l,bp(e),d.instructions,i,n,r);break;default:a[d.type].render(l,e,d,i,n,r)}t.addBinding(l)};c(0)}};gf=Zh([Qp("hs")],gf);class vf{constructor(t,e){this.ce=t,this.ue=e,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}get state(){return this.ctrl.state}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.ue.controller.scope.parent??void 0;if(null==e)throw fc("Invalid spreading. Context scope is null/undefined");this.ce.forEach((t=>t.bind(e)))}unbind(){this.ce.forEach((t=>t.unbind())),this.isBound=!1}addBinding(t){this.ce.push(t)}addChild(t){if(1!==t.vmKind)throw fc("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}limit(){throw fc("not implemented")}useScope(){throw fc("not implemented")}}const mf=t=>new vf([],t),wf="IController",bf="IInstruction",yf="IRenderLocation",kf="IAuSlotsInfo";class Cf{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw fc("AUR7055");if(!Tc(t.name)||0===t.name.length)throw fc("AUR0756");return t}}function Sf(t,e,s,i,n,r,o,a){const h=s.container.createChild();return qc(h,t.HTMLElement,qc(h,t.Element,qc(h,Yd,new ti("ElementResolver",i)))),s=s instanceof dd?s:s.ctrl,qc(h,Sd,new ti(wf,s)),qc(h,xp,new ti(bf,n)),qc(h,Zd,null==o?Tf:new ti(yf,o)),qc(h,nd,null==r?$f:new Cf(r)),qc(h,Ap,null==a?xf:new ti(kf,a)),{vm:h.invoke(e.Type),ctn:h}}class Af{constructor(t){this.l=t}get name(){return"IRenderLocation"}get $isResolver(){return!0}resolve(){return this.l}}const Tf=new Af(null),$f=new Cf(null),xf=new ti(kf,new Tp(si));var If;function Rf(t){return function(e){return Nf.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(If||(If={}));class Ef{constructor(t,e,s,i,n){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.type=n}static create(t,e){let s,i;return Tc(t)?(s=t,i={name:s}):(s=t.name,i=t),new Ef(e,Le(Mf(e,"name"),s),je(Mf(e,"aliases"),i.aliases,e.aliases),Pf(s),Le(Mf(e,"type"),i.type,e.type,null))}register(t){const{Type:e,key:s,aliases:i}=this;Fc(s,e).register(t),Vc(s,e).register(t),Hc(i,Nf,s,t)}}const Of=ac("binding-command"),Pf=t=>`${Of}:${t}`,Mf=(t,e)=>ec(oc(e),t),Nf=vc({name:Of,keyFrom:Pf,define(t,e){const s=Ef.create(t,e);return ic(Of,s,s.Type),ic(Of,s,s),hc(e,Of),s.Type},getAnnotation:Mf});let Bf=class{get type(){return 0}build(t,e,s){let i=t.attr.target,n=t.attr.rawValue;return null==t.bindable?i=s.map(t.node,i)??Oe(i):(""===n&&1===t.def.type&&(n=Oe(i)),i=t.bindable.property),new Rp(e.parse(n,16),i,1)}};Bf=Zh([Rf("one-time")],Bf);let jf=class{get type(){return 0}build(t,e,s){let i=t.attr.target,n=t.attr.rawValue;return null==t.bindable?i=s.map(t.node,i)??Oe(i):(""===n&&1===t.def.type&&(n=Oe(i)),i=t.bindable.property),new Rp(e.parse(n,16),i,2)}};jf=Zh([Rf("to-view")],jf);let Lf=class{get type(){return 0}build(t,e,s){const i=t.attr;let n=i.target,r=i.rawValue;return null==t.bindable?n=s.map(t.node,n)??Oe(n):(""===r&&1===t.def.type&&(r=Oe(n)),n=t.bindable.property),new Rp(e.parse(r,16),n,4)}};Lf=Zh([Rf("from-view")],Lf);let Uf=class{get type(){return 0}build(t,e,s){const i=t.attr;let n=i.target,r=i.rawValue;return null==t.bindable?n=s.map(t.node,n)??Oe(n):(""===r&&1===t.def.type&&(r=Oe(n)),n=t.bindable.property),new Rp(e.parse(r,16),n,6)}};Uf=Zh([Rf("two-way")],Uf);let Df=class{get type(){return 0}build(t,e,s){const i=t.attr,n=t.bindable;let r,o,a=i.target,h=i.rawValue;return null==n?(o=s.isTwoWay(t.node,a)?6:2,a=s.map(t.node,a)??Oe(a)):(""===h&&1===t.def.type&&(h=Oe(a)),r=t.def.defaultBindingMode,o=8===n.mode||null==n.mode?null==r||8===r?2:r:n.mode,a=n.property),new Rp(e.parse(h,16),a,o)}};Df=Zh([Rf("bind")],Df);let Ff=class{constructor(t){this.fe=t}get type(){return 0}static get inject(){return[rl]}build(t,e){const s=null===t.bindable?Oe(t.attr.target):t.bindable.property,i=e.parse(t.attr.rawValue,2);let n=si;if(i.semiIdx>-1){const e=t.attr.rawValue.slice(i.semiIdx+1),s=e.indexOf(":");if(s>-1){const t=e.slice(0,s).trim(),i=e.slice(s+1).trim(),r=this.fe.parse(t,i);n=[new Mp(i,r.target,r.command)]}}return new Ep(i,s,n)}};Ff=Zh([Rf("for")],Ff);let Vf=class{get type(){return 1}build(t,e){return new Fp(e.parse(t.attr.rawValue,8),t.attr.target,!0,!1)}};Vf=Zh([Rf("trigger")],Vf);let Wf=class{get type(){return 1}build(t,e){return new Fp(e.parse(t.attr.rawValue,8),t.attr.target,!1,!0)}};Wf=Zh([Rf("capture")],Wf);let _f=class{get type(){return 1}build(t,e){return new qp(t.attr.target,e.parse(t.attr.rawValue,16),t.attr.target)}};_f=Zh([Rf("attr")],_f);let qf=class{get type(){return 1}build(t,e){return new qp("style",e.parse(t.attr.rawValue,16),t.attr.target)}};qf=Zh([Rf("style")],qf);let Hf=class{get type(){return 1}build(t,e){return new qp("class",e.parse(t.attr.rawValue,16),t.attr.target)}};Hf=Zh([Rf("class")],Hf);let Kf=class{get type(){return 1}build(t,e){return new Op(e.parse(t.attr.rawValue,16),t.attr.target)}};Kf=Zh([Rf("ref")],Kf);let zf=class{get type(){return 1}build(t){return new Hp}};zf=Zh([Rf("...$attrs")],zf);const Gf=Dc("ISVGAnalyzer",(t=>t.singleton(Qf)));class Qf{isStandardSvgAttribute(t,e){return!1}}const Jf=Dc("IAttrMapper",(t=>t.singleton(Xf)));class Xf{constructor(t){this.svg=t,this.fns=[],this.pe=pc(),this.ve=pc(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[Gf]}useMapping(t){var e;let s,i,n,r;for(n in t)for(r in s=t[n],i=(e=this.pe)[n]??(e[n]=pc()),s){if(void 0!==i[r])throw Yf(r,n);i[r]=s[r]}}useGlobalMapping(t){const e=this.ve;for(const s in t){if(void 0!==e[s])throw Yf(s,"*");e[s]=t[s]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((s=>s(t,e)))}map(t,e){return this.pe[t.nodeName]?.[e]??this.ve[e]??(kc(t,e,this.svg)?e:null)}}function Yf(t,e){return fc(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}const Zf=Dc("ITemplateElementFactory",(t=>t.singleton(eg))),tg={};class eg{constructor(t){this.p=t,this.xe=sg(this.p)}createTemplate(t){if(Tc(t)){let e=tg[t];if(void 0===e){const s=this.xe;s.innerHTML=t;const i=s.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.xe=sg(this.p),e=s):(s.content.removeChild(i),e=i),tg[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=sg(this.p);return e.content.appendChild(t),e}return t.parentNode?.removeChild(t),t.cloneNode(!0)}}eg.inject=[Eu];const sg=t=>t.document.createElement("template");let ig;const ng="AU-M",rg="TEMPLATE",og="au-start",ag="au-end",hg=t=>t.nodeName===ng&&cg(ig=qd(t))&&ig.textContent===ag&&cg(ig=qd(ig))&&ig.textContent===og,cg=t=>8===t?.nodeType;class lg{constructor(t,e,s,i,n,r){this.hasSlot=!1,this.Fe=pc();const o=null!==i;this.c=e,this.root=null===n?this:n,this.def=t,this.ci=s,this.parent=i,this.we=o?i.we:e.get(Zf),this.fe=o?i.fe:e.get(rl),this.ep=o?i.ep:e.get(ho),this.m=o?i.m:e.get(Jf),this.Oe=o?i.Oe:e.get(pi),this.p=o?i.p:e.get(Eu),this.localEls=o?i.localEls:new Set,this.rows=r??[]}qe(t){var e;((e=this.root).deps??(e.deps=[])).push(t),this.root.c.register(t)}_e(t){return Vd(this.p,t)}$e(t){return Fd(this.p,t)}h(t){const e=((t,e)=>t.document.createElement(e))(this.p,t);return"template"===t&&this.p.document.adoptNode(e.content),e}t(){return this.h("template")}Ae(t){return this.c.find(Sp,t)}Be(t){return this.c.find(bu,t)}De(t){return new lg(this.def,this.c,this.ci,this,this.root,t)}Ce(t){if(this.root!==this)return this.root.Ce(t);const e=t.command;if(null===e)return null;let s=this.Fe[e];if(void 0===s){if(s=this.c.create(Nf,e),null===s)throw fc(`AUR0713:${e}`);this.Fe[e]=s}return s}}const ug=t=>{const e=t.length;let s=0,i=0;for(;e>i;){if(s=t.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(i+1))return!1}++i}return!1},dg=()=>{gg.node=gg.attr=gg.bindable=gg.def=null},pg={projections:null},fg={name:"unnamed"},gg={node:null,attr:null,bindable:null,def:null},vg=mc(pc(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),mg={checkbox:1,radio:1},wg=new WeakMap;class bg{constructor(t,e,s){this.attrs=t,this.bindables=e,this.primary=s}static from(t,e){let s=wg.get(t);if(null==s){const i=t.bindables,n=pc(),r=e?void 0===t.defaultBindingMode?8:t.defaultBindingMode:8;let o,a,h,c,l=!1;for(a in i){if(o=i[a],c=o.attribute,!0===o.primary){if(l)throw fc(`AUR0714:${t.name}`);l=!0,h=o}else l||null!=h||(h=o);n[c]=Bc.create(a,t.Type,o)}null==o&&e&&(h=n.value=Bc.create("value",t.Type,{mode:r})),wg.set(t,s=new bg(n,i,h))}return s}}const yg=vc(["property","attribute","mode"]),kg="as-custom-element",Cg=(t,e)=>{const s=t.getAttribute(kg);if(null===s||""===s)throw fc("AUR0715");if(e.has(s))throw fc(`AUR0716:${s}`);return e.add(s),t.removeAttribute(kg),s},Sg=t=>{switch(t.getAttribute("mode")){case"oneTime":return 1;case"toView":return 2;case"fromView":return 4;case"twoWay":return 6;default:return 8}},Ag=Dc("ITemplateCompilerHooks"),Tg=new WeakMap,$g=ac("compiler-hooks");vc({name:$g,define(t){let e=Tg.get(t);return void 0===e&&(Tg.set(t,e=new xg(t)),ic($g,e,t),hc(t,$g)),t}});class xg{constructor(t){this.Type=t}get name(){return""}register(t){t.register(Fc(Ag,this.Type))}}const Ig="default",Rg="au-slot",Eg=new Map;class Og{bind(t,e){Eg.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=Eg.get(e),Eg.delete(e)}}class Pg extends Og{get mode(){return 1}}class Mg extends Og{get mode(){return 2}}class Ng extends Og{get mode(){return 4}}class Bg extends Og{get mode(){return 6}}Al("oneTime")(Pg),Al("toView")(Mg),Al("fromView")(Ng),Al("twoWay")(Bg);const jg=new WeakMap;class Lg{constructor(t){this.p=t}bind(t,e,s){const i={type:"debounce",delay:(s=Number(s))>0?s:200,now:this.p.performanceNow,queue:this.p.taskQueue},n=e.limit?.(i);null==n||jg.set(e,n)}unbind(t,e){jg.get(e)?.dispose(),jg.delete(e)}}Lg.inject=[ri],Al("debounce")(Lg);class Ug{constructor(t){this.Ve=new Map,this.Ne=t}bind(t,e,...s){if(!("handleChange"in e))throw fc("AUR0817");if(0===s.length)throw fc("AUR0818");let i;for(i of(this.Ve.set(e,s),s))this.Ne.addSignalListener(i,e)}unbind(t,e){const s=this.Ve.get(e);let i;for(i of(this.Ve.delete(e),s))this.Ne.removeSignalListener(i,e)}}Ug.inject=[Gh],Al("signal")(Ug);const Dg=new WeakMap;class Fg{constructor(t){this.je=t.performanceNow,this.ct=t.taskQueue}bind(t,e,s){const i={type:"throttle",delay:(s=Number(s))>0?s:200,now:this.je,queue:this.ct},n=e.limit?.(i);null==n||Dg.set(e,n)}unbind(t,e){Dg.get(e)?.dispose(),Dg.delete(e)}}Fg.inject=[ri],Al("throttle")(Fg);class Vg{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,s){null==t?e.removeAttribute(s):e.setAttribute(s,t)}}Bu(Vg);const Wg=new Vg;class _g{bind(t,e){if(!(e instanceof Yl))throw fc("AURxxxx");e.useTargetObserver(Wg)}}Al("attr")(_g);class qg{bind(t,e){if(!(e instanceof iu))throw fc("AUR0801");e.self=!0}unbind(t,e){e.self=!1}}Al("self")(qg);const Hg=pc();class Kg{constructor(t){this.ns=t,this.type=6}static forNs(t){return Hg[t]??(Hg[t]=new Kg(t))}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,s){null==t?e.removeAttributeNS(this.ns,s):e.setAttributeNS(this.ns,s,t)}}function zg(t,e){return t===e}Bu(Kg);class Gg{constructor(t,e,s,i){this.type=7,this.v=void 0,this.ov=void 0,this.He=void 0,this.We=void 0,this.yt=!1,this.bt=t,this.oL=i,this.cf=s}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.ze(),this.Ge(),this.st())}handleCollectionChange(){this.Ge()}handleChange(t,e){this.Ge()}Ge(){const t=this.v,e=this.bt,s=gc.call(e,"model")?e.model:e.value,i="radio"===e.type,n=void 0!==e.matcher?e.matcher:zg;if(i)e.checked=!!n(t,s);else if(!0===t)e.checked=!0;else{let i=!1;if(Sc(t))i=-1!==t.findIndex((t=>!!n(t,s)));else if(t instanceof Set){for(const e of t)if(n(e,s)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(n(t,s)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.bt,s=gc.call(e,"model")?e.model:e.value,i=e.checked,n=void 0!==e.matcher?e.matcher:zg;if("checkbox"===e.type){if(Sc(t)){const e=t.findIndex((t=>!!n(t,s)));return void(i&&-1===e?t.push(s):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===n(e,s)){r=e;break}return void(i&&r===e?t.add(s):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===n(t,s)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=s}this.v=t,this.st()}kt(){this.ze()}At(){this.He?.unsubscribe(this),this.We?.unsubscribe(this),this.He=this.We=void 0}st(){Qg=this.ov,this.ov=this.v,this.subs.notify(this.v,Qg)}ze(){const t=this.bt;(this.We??(this.We=t.$observers?.model??t.$observers?.value))?.subscribe(this),this.He?.unsubscribe(this),this.He=void 0,"checkbox"===t.type&&(this.He=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let Qg;Mu(Gg),Kn(Gg);const Jg={childList:!0,subtree:!0,characterData:!0};function Xg(t,e){return t===e}class Yg{constructor(t,e,s,i){this.type=7,this.v=void 0,this.ov=void 0,this.J=!1,this.Xe=void 0,this.Ke=void 0,this.iO=!1,this.yt=!1,this.bt=t,this.oL=i,this.cf=s}getValue(){return this.iO?this.v:this.bt.multiple?function(t){const e=[];if(0===t.length)return e;const s=t.length;let i,n=0;for(;s>n;)i=t[n],i.selected&&(e[e.length]=gc.call(i,"model")?i.model:i.value),++n;return e}(this.bt.options):this.bt.value}setValue(t){this.ov=this.v,this.v=t,this.J=t!==this.ov,this.Qe(t instanceof Array?t:null),this.it()}it(){this.J&&(this.J=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.bt,s=Sc(t),i=e.matcher??Xg,n=e.options;let r=n.length;for(;r-- >0;){const e=n[r],o=gc.call(e,"model")?e.model:e.value;e.selected=s?-1!==t.findIndex((t=>!!i(o,t))):!!i(o,t)}}syncValue(){const t=this.bt,e=t.options,s=e.length,i=this.v;let n=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||Xg,a=[];for(;n<s;)r=e[n],r.selected&&a.push(gc.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<i.length;)h=i[n],-1===a.findIndex((t=>!!o(h,t)))?i.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===i.findIndex((t=>!!o(h,t)))&&i.push(h),++n;return!1}let r,o=null;for(;n<s;){if(r=e[n],r.selected){o=gc.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}kt(){(this.Ke=new this.bt.ownerDocument.defaultView.MutationObserver(this.Ye.bind(this))).observe(this.bt,Jg),this.Qe(this.v instanceof Array?this.v:null),this.iO=!0}At(){this.Ke.disconnect(),this.Xe?.unsubscribe(this),this.Ke=this.Xe=void 0,this.iO=!1}Qe(t){if(this.Xe?.unsubscribe(this),this.Xe=void 0,null!=t){if(!this.bt.multiple)throw fc("AUR0654");(this.Xe=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.st()}Ye(t){this.syncOptions(),this.syncValue()&&this.st()}st(){Zg=this.ov,this.ov=this.v,this.subs.notify(this.v,Zg)}}let Zg,tv;Mu(Yg),Kn(Yg);class ev{constructor(t){this.obj=t,this.type=6,this.v="",this.ov="",this.styles={},this.version=0,this.J=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.J=t!==this.ov,this.it()}Ze(t){const e=[],s=/url\([^)]+$/;let i,n,r,o,a=0,h="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),h+=t.substring(a,i),a=i+1,s.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}Je(t){let e,s;const i=[];for(s in t)if(e=t[s],null!=e)if(Tc(e)){if(s.startsWith("--")){i.push([s,e]);continue}i.push([Me(s),e])}else i.push(...this.ti(e));return i}ei(t){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...this.ti(t[i]));return s}return si}ti(t){return Tc(t)?this.Ze(t):t instanceof Array?this.ei(t):t instanceof Object?this.Je(t):si}it(){if(this.J){this.J=!1;const t=this.v,e=this.styles,s=this.ti(t);let i,n,r,o,a=this.version;this.ov=t;let h=0;const c=s.length;for(;h<c;++h)n=s[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)gc.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let s="";null!=e&&Ac(e.indexOf)&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(){this.v=this.ov=this.obj.style.cssText}}Bu(ev);class sv{constructor(t,e,s){this.type=7,this.v="",this.ov="",this.J=!1,this.yt=!1,this.bt=t,this.k=e,this.cf=s}getValue(){return this.v}setValue(t){Ic(t,this.v)||(this.ov=this.v,this.v=t,this.J=!0,this.cf.readonly||this.it())}it(){this.J&&(this.J=!1,this.bt[this.k]=this.v??this.cf.default,this.st())}handleEvent(){this.ov=this.v,this.v=this.bt[this.k],this.ov!==this.v&&(this.J=!1,this.st())}kt(){this.v=this.ov=this.bt[this.k]}st(){tv=this.ov,this.ov=this.v,this.subs.notify(this.v,tv)}}Mu(sv),Kn(sv);const iv="http://www.w3.org/1999/xlink",nv="http://www.w3.org/XML/1998/namespace",rv="http://www.w3.org/2000/xmlns/",ov=mc(pc(),{"xlink:actuate":["actuate",iv],"xlink:arcrole":["arcrole",iv],"xlink:href":["href",iv],"xlink:role":["role",iv],"xlink:show":["show",iv],"xlink:title":["title",iv],"xlink:type":["type",iv],"xml:lang":["lang",nv],"xml:space":["space",nv],xmlns:["xmlns",rv],"xmlns:xlink":["xlink",rv]}),av=new Nh;av.type=6;class hv{constructor(t,e,s,i){this.locator=t,this.platform=e,this.dirtyChecker=s,this.svgAnalyzer=i,this.allowDirtyCheck=!0,this.ii=pc(),this.si=pc(),this.ni=pc(),this.ri=pc();const n=["change","input"],r={events:n,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:n,default:0},checked:{type:Gg,events:n},files:{events:n,readonly:!0}},SELECT:{value:{type:Yg,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){Vc(Dh,hv).register(t),Fc(Dh,hv).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,s){const i=this.ii;let n;if(Tc(t))n=i[t]??(i[t]=pc()),null==n[e]?n[e]=s:cv(t,e);else for(const s in t){n=i[s]??(i[s]=pc());const r=t[s];for(e in r)null==n[e]?n[e]=r[e]:cv(s,e)}}useConfigGlobal(t,e){const s=this.si;if("object"==typeof t)for(const e in t)null==s[e]?s[e]=t[e]:cv("*",e);else null==s[t]?s[t]=e:cv("*",t)}getAccessor(t,e,s){if(e in this.ri||e in(this.ni[t.tagName]??ii))return this.getObserver(t,e,s);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":return Wg;default:{const s=ov[e];return void 0!==s?Kg.forNs(s[1]):kc(t,e,this.svgAnalyzer)?Wg:av}}}overrideAccessor(t,e){var s,i;let n;if(Tc(t))n=(s=this.ni)[t]??(s[t]=pc()),n[e]=!0;else for(const e in t)for(const s of t[e])n=(i=this.ni)[e]??(i[e]=pc()),n[s]=!0}overrideAccessorGlobal(...t){for(const e of t)this.ri[e]=!0}getNodeObserverConfig(t,e){return this.ii[t.tagName]?.[e]??this.si[e]}getNodeObserver(t,e,s){const i=this.ii[t.tagName]?.[e]??this.si[e];let n;return null!=i?(n=new(i.type??sv)(t,e,i,s,this.locator),n.doNotCache||(qh(t)[e]=n),n):null}getObserver(t,e,s){switch(e){case"class":return new ju(t);case"css":case"style":return new ev(t)}const i=this.getNodeObserver(t,e,s);if(null!=i)return i;const n=ov[e];if(void 0!==n)return Kg.forNs(n[1]);if(kc(t,e,this.svgAnalyzer))return Wg;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw fc(`AUR0652:${String(e)}`)}return new Bh(t,e)}}function cv(t,e){throw fc(`AUR0653:${String(e)}@${t}`)}hv.inject=[Bs,Eu,Ih,Gf];class lv{constructor(t,e){if(!(e instanceof hv))throw fc("AURxxxx: updateTrigger binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger");this.oL=t,this.oi=e}bind(t,e,...s){if(0===s.length)throw fc("AUR0802");if(!(e instanceof Yl&&4&e.mode))throw fc("AUR0803");const i=this.oi.getNodeObserverConfig(e.target,e.targetProperty);if(null==i)throw fc("AURxxxx");const n=this.oi.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:i.readonly,default:i.default,events:s}),e.useTargetObserver(n)}}lv.inject=[Uh,Dh],Al("updateTrigger")(lv);class uv{constructor(t,e){this.li=!1,this.hi=t,this.p=e}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.ai():this.li=!0}attached(){this.li&&(this.li=!1,this.ai()),this.hi.addEventListener("focus",this),this.hi.addEventListener("blur",this)}afterDetachChildren(){const t=this.hi;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.ui||(this.value=!1)}ai(){const t=this.hi,e=this.ui,s=this.value;s&&!e?t.focus():!s&&e&&t.blur()}get ui(){return this.hi===this.p.document.activeElement}}uv.inject=[Yd,Eu],Zh([Oc({mode:6})],uv.prototype,"value",void 0),lu("focus")(uv);let dv=class{constructor(t,e,s){this.el=t,this.p=e,this.fi=!1,this.lt=null,this.$val="",this.$prio="",this.update=()=>{this.lt=null,Boolean(this.value)!==this.di&&(this.di===this.mi?(this.di=!this.mi,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.di=this.mi,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.di=this.mi="hide"!==s.alias}binding(){this.fi=!0,this.update()}detaching(){this.fi=!1,this.lt?.cancel(),this.lt=null}valueChanged(){this.fi&&null===this.lt&&(this.lt=this.p.domWriteQueue.queueTask(this.update))}};Zh([Oc],dv.prototype,"value",void 0),dv=Zh([tc(0,Yd),tc(1,Eu),tc(2,xp)],dv),function(...t){return function(e){const s=oc("aliases"),i=ec(s,e);void 0===i?ic(s,t,e):i.push(...t)}}("hide")(dv),lu("show")(dv);class pv{constructor(t,e,s){this.position="beforeend",this.strict=!1,this.p=s,this.gi=s.document.createElement("div"),(this.view=t.create()).setLocation(this.pi=(t=>{const e=Fd(t,"au-end");return e.$start=Fd(t,"au-start"),e})(s)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)tp.set(t,e);else{const s=t.childNodes;for(let t=0,i=s.length;t<i;++t)tp.set(s[t],e)}}(this.view.nodes,e)}attaching(t,e,s){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const i=this.gi=this.vi();return this.xi(i,this.position),this.wi(t,i,s)}detaching(t,e,s){return this.bi(t,this.gi,s)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.vi();if(this.gi===e)return;this.gi=e;const s=Ve(this.bi(null,e,t.flags),(()=>(this.xi(e,this.position),this.wi(null,e,t.flags))));Cc(s)&&s.catch(xc)}positionChanged(){const{$controller:t,gi:e}=this;if(!t.isActive)return;const s=Ve(this.bi(null,e,t.flags),(()=>(this.xi(e,this.position),this.wi(null,e,t.flags))));Cc(s)&&s.catch(xc)}wi(t,e,s){const{activating:i,callbackContext:n,view:r}=this;return Ve(i?.call(n,e,r),(()=>this.yi(t,e,s)))}yi(t,e,s){const{$controller:i,view:n}=this;return null!==t?Ve(n.activate(t??n,i,s,i.scope),(()=>this.ki(e))):(n.nodes.insertBefore(this.pi),this.ki(e))}ki(t){const{activated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}bi(t,e,s){const{deactivating:i,callbackContext:n,view:r}=this;return Ve(i?.call(n,e,r),(()=>this.Ai(t,e,s)))}Ai(t,e,s){const{$controller:i,view:n}=this;return null!==t?Ve(n.deactivate(t,i,s),(()=>this.Ci(e))):(n.nodes.remove(),this.Ci(e))}Ci(t){const{deactivated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}vi(){const t=this.p,e=t.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw fc("AUR0811");return e.body}if(Tc(s)){let n=e;Tc(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(n=i),s=n.querySelector(s)}if(s instanceof t.Node)return s;if(null==s){if(this.strict)throw fc("AUR0812");return e.body}return s}xi(t,e){const s=this.pi,i=s.$start,n=t.parentNode,r=[i,s];switch(e){case"beforeend":_d(t,null,r);break;case"afterbegin":_d(t,t.firstChild,r);break;case"beforebegin":_d(n,t,r);break;case"afterend":_d(n,t.nextSibling,r);break;default:throw new Error("Invalid portal insertion position")}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}pv.inject=[nd,Zd,Eu],Zh([Oc({primary:!0})],pv.prototype,"target",void 0),Zh([Oc()],pv.prototype,"position",void 0),Zh([Oc({callback:"targetChanged"})],pv.prototype,"renderContext",void 0),Zh([Oc()],pv.prototype,"strict",void 0),Zh([Oc()],pv.prototype,"deactivating",void 0),Zh([Oc()],pv.prototype,"activating",void 0),Zh([Oc()],pv.prototype,"deactivated",void 0),Zh([Oc()],pv.prototype,"activated",void 0),Zh([Oc()],pv.prototype,"callbackContext",void 0),uu("portal")(pv);class fv{constructor(t,e){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.Bi=!1,this.Ri=0,this.Si=t,this.l=e}attaching(t,e,s){let i;const n=this.$controller,r=this.Ri++,o=()=>!this.Bi&&this.Ri===r+1;return Ve(this.pending,(()=>{o()&&(this.pending=void 0,i=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.Si.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=i&&(i.setLocation(this.l),this.pending=Ve(i.activate(t,n,s,n.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e,s){return this.Bi=!0,Ve(this.pending,(()=>{this.Bi=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller,s)}))}valueChanged(t,e,s){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;const i=this.view,n=this.$controller,r=this.Ri++,o=()=>!this.Bi&&this.Ri===r+1;let a;return Ve(this.pending,(()=>this.pending=Ve(i?.deactivate(i,n,s),(()=>{if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.Si.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=a))return a.setLocation(this.l),Ve(a.activate(a,n,s,n.scope),(()=>{o()&&(this.pending=void 0)}))}))))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}fv.inject=[nd,Zd],Zh([Oc],fv.prototype,"value",void 0),Zh([Oc({set:t=>""===t||!!t&&"false"!==t})],fv.prototype,"cache",void 0),uu("if")(fv);class gv{constructor(t){this.f=t}link(t,e,s,i){const n=t.children,r=n[n.length-1];if(r instanceof fv)r.elseFactory=this.f;else{if(!(r.viewModel instanceof fv))throw fc("AUR0810");r.viewModel.elseFactory=this.f}}}function vv(t){t.dispose()}gv.inject=[nd],uu({name:"else"})(gv);const mv=[18,17];class wv{constructor(t,e,s,i,n){this.views=[],this.key=null,this.Ii=new Map,this.Ti=new Map,this.Pi=void 0,this.Ei=!1,this.Li=!1,this.Di=null,this.Ui=void 0,this.$i=!1;const r=t.props[0].props[0];if(void 0!==r){const{to:t,value:s,command:i}=r;if("key"!==t)throw fc(`AUR776:${t}`);if(null===i)this.key=s;else{if("bind"!==i)throw fc(`AUR775:${i}`);this.key=e.parse(s,16)}}this.l=s,this._i=i,this.f=n}binding(t,e,s){const i=this._i.bindings,n=i.length;let r,o,a=0;for(;n>a;++a)if(r=i[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.ast,this.qi=r;let t=o.iterable;for(;null!=t&&mv.includes(t.$kind);)t=t.expression,this.Ei=!0;this.Di=t;break}this.Mi();const h=o.declaration;(this.$i=24===h.$kind||25===h.$kind)||(this.local=On(h,this.$controller.scope,r,null))}attaching(t,e,s){return this.Fi(),this.Oi(t)}detaching(t,e,s){return this.Mi(),this.Vi(t)}unbinding(t,e,s){this.Ti.clear(),this.Ii.clear()}itemsChanged(){this.$controller.isActive&&(this.Mi(),this.Fi(),this.Ni(this.items,void 0))}handleCollectionChange(t,e){const s=this.$controller;if(s.isActive){if(this.Ei){if(this.Li)return;return this.Li=!0,this.items=On(this.forOf.iterable,s.scope,this.qi,null),void(this.Li=!1)}this.Fi(),this.Ni(t,e)}}Ni(t,e){const s=this.views,i=s.length,n=this.key,r=null!==n;if(r||void 0===e){const t=this.local,o=this.Ui,a=o.length,h=this.forOf,c=h.declaration,l=this.qi,u=this.$i;e=Hn(a);let d=0;if(0===i)for(;d<a;++d)e[d]=-2;else if(0===a)if(u)for(d=0;d<i;++d)e.deletedIndices.push(d),e.deletedItems.push(On(c,s[d].scope,l,null));else for(d=0;d<i;++d)e.deletedIndices.push(d),e.deletedItems.push(s[d].scope.bindingContext[t]);else{const p=Array(i);if(u)for(d=0;d<i;++d)p[d]=On(c,s[d].scope,l,null);else for(d=0;d<i;++d)p[d]=s[d].scope.bindingContext[t];let f,g,v,m,w=0;const b=i-1,y=a-1,k=new Map,C=new Map,S=this.Ii,A=this.Ti,T=this.$controller.scope;d=0;t:{for(;;){if(f=p[d],g=o[d],v=r?Ov(S,n,f,Pv(A,p[d],h,T,l,t,u),l):f,m=r?Ov(S,n,g,Pv(A,o[d],h,T,l,t,u),l):g,v!==m){S.set(f,v),S.set(g,m);break}if(++d,d>b||d>y)break t}if(b===y)for(w=y;;){if(f=p[w],g=o[w],v=r?Ov(S,n,f,Pv(A,f,h,T,l,t,u),l):f,m=r?Ov(S,n,g,Pv(A,g,h,T,l,t,u),l):g,v!==m){S.set(f,v),S.set(g,m);break}if(--w,d>w)break t}}const $=d,x=d;for(d=x;d<=y;++d)S.has(g=o[d])?m=S.get(g):(m=r?Ov(S,n,g,Pv(A,g,h,T,l,t,u),l):g,S.set(g,m)),C.set(m,d);for(d=$;d<=b;++d)v=S.has(f=p[d])?S.get(f):r?Ov(S,n,f,s[d].scope,l):f,k.set(v,d),C.has(v)?e[C.get(v)]=d:(e.deletedIndices.push(d),e.deletedItems.push(f));for(d=x;d<=y;++d)k.has(S.get(o[d]))||(e[d]=-2);k.clear(),C.clear()}}if(void 0===e){const t=Ve(this.Vi(null),(()=>this.Oi(null)));Cc(t)&&t.catch(xc)}else{const t=function(t){let e=0,s=0,i=0;const n=function(t){const e=t.slice();return e.deletedIndices=t.deletedIndices.slice(),e.deletedItems=t.deletedItems.slice(),e.isIndexMap=!0,e}(t);n.deletedIndices.length>1&&n.deletedIndices.sort(Ar);const r=n.length;for(;i<r;++i){for(;n.deletedIndices[s]<=i-e;)++s,--e;-2===n[i]?++e:n[i]+=e}return n}(e);if(t.deletedIndices.length>0){const e=Ve(this.ji(t),(()=>this.Hi(i,t)));Cc(e)&&e.catch(xc)}else this.Hi(i,t)}}Mi(){const t=this.$controller.scope;let e,s=this.Wi,i=this.Ei;i&&(s=this.Wi=On(this.Di,t,this.qi,null)??null,i=this.Ei=!Ic(this.items,s));const n=this.Pi;this.$controller.isActive?(e=this.Pi=(t=>{let e;return Di(t)?e=Sr(t):Vi(t)?e=Jr(t):Fi(t)&&(e=Lr(t)),e})(i?s:this.items),n!==e&&(n?.unsubscribe(this),e?.subscribe(this))):(n?.unsubscribe(this),this.Pi=void 0)}Fi(){const{items:t}=this;if(Sc(t))return void(this.Ui=t);const e=[];$v(t,((t,s)=>{e[s]=t})),this.Ui=e}Oi(t){let e,s,i,n;const{$controller:r,f:o,local:a,l:h,items:c,Ti:l,qi:u,forOf:d,$i:p}=this,f=r.scope,g=Tv(c),v=this.views=Array(g);if($v(c,((c,m)=>{i=v[m]=o.create().setLocation(h),i.nodes.unlink(),n=Pv(l,c,d,f,u,a,p),Sv(n.overrideContext,m,g),s=i.activate(t??i,r,0,n),Cc(s)&&(e??(e=[])).push(s)})),void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Vi(t){let e,s,i,n=0;const{views:r,$controller:o}=this,a=r.length;for(;a>n;++n)i=r[n],i.release(),s=i.deactivate(t??i,o,0),Cc(s)&&(e??(e=[])).push(s);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}ji(t){let e,s,i;const{$controller:n,views:r}=this,o=t.deletedIndices,a=o.length;let h=0;for(;a>h;++h)i=r[o[h]],i.release(),s=i.deactivate(i,n,0),Cc(s)&&(e??(e=[])).push(s);h=0;let c=0;for(;a>h;++h)c=o[h]-h,r.splice(c,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Hi(t,e){let s,i,n,r,o=0;const{$controller:a,f:h,local:c,Ui:l,l:u,views:d,$i:p,qi:f,Ti:g,forOf:v}=this,m=e.length;for(;m>o;++o)-2===e[o]&&(n=h.create(),d.splice(o,0,n));if(d.length!==m)throw Cv(d.length,m);const w=a.scope,b=e.length;!function(t,e){const s=t.slice(),i=e.length;let n=0,r=0;for(;n<i;)r=e[n],-2!==r&&(t[n]=s[r]),++n}(d,e);const y=function(t){const e=t.length;e>bv&&(bv=e,yv=new Int32Array(e),kv=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,h=0,c=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=yv[s],n=t[o],-2!==n&&n<i){kv[r]=o,yv[++s]=r;continue}for(a=0,h=s;a<h;)c=a+h>>1,n=t[yv[c]],-2!==n&&n<i?a=c+1:h=c;n=t[yv[a]],(i<n||-2===n)&&(a>0&&(kv[r]=yv[a-1]),yv[a]=r)}r=++s;const l=new Int32Array(r);for(i=yv[s-1];s-- >0;)l[s]=i,i=kv[i];for(;r-- >0;)yv[r]=0;return l}(e),k=y.length,C=v.declaration;let S,A=k-1;for(o=b-1;o>=0;--o)n=d[o],S=d[o+1],n.nodes.link(S?.nodes??u),-2===e[o]?(r=Pv(g,l[o],v,w,f,c,p),Sv(r.overrideContext,o,b),n.setLocation(u),i=n.activate(n,a,0,r),Cc(i)&&(s??(s=[])).push(i)):A<0||1===k||o!==y[A]?(p?Pn(C,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],Sv(n.scope.overrideContext,o,b),n.nodes.insertBefore(n.location)):(p?Pn(C,n.scope,f,l[o]):n.scope.bindingContext[c]=l[o],t!==b&&Sv(n.scope.overrideContext,o,b),--A);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}dispose(){this.views.forEach(vv),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}wv.inject=[xp,ho,Zd,Sd,nd],Zh([Oc],wv.prototype,"items",void 0),uu("repeat")(wv);let bv=16,yv=new Int32Array(bv),kv=new Int32Array(bv);const Cv=(t,e)=>fc(`AUR0814:${t}!=${e}`),Sv=(t,e,s)=>{const i=0===e,n=e===s-1,r=e%2==0;t.$index=e,t.$first=i,t.$last=n,t.$middle=!i&&!n,t.$even=r,t.$odd=!r,t.$length=s},Av=dc.toString,Tv=t=>{switch(Av.call(t)){case"[object Array]":return t.length;case"[object Map]":case"[object Set]":return t.size;case"[object Number]":return t;case"[object Null]":case"[object Undefined]":return 0;default:throw fc(`Cannot count ${Av.call(t)}`)}},$v=(t,e)=>{switch(Av.call(t)){case"[object Array]":return xv(t,e);case"[object Map]":return Iv(t,e);case"[object Set]":return Rv(t,e);case"[object Number]":return Ev(t,e);case"[object Null]":case"[object Undefined]":return;default:throw fc(`Cannot iterate over ${Av.call(t)}`)}},xv=(t,e)=>{const s=t.length;let i=0;for(;i<s;++i)e(t[i],i,t)},Iv=(t,e)=>{let s,i=-0;for(s of t.entries())e(s,i++,t)},Rv=(t,e)=>{let s,i=0;for(s of t.keys())e(s,i++,t)},Ev=(t,e)=>{let s=0;for(;s<t;++s)e(s,s,t)},Ov=(t,e,s,i,n)=>{let r=t.get(s);return void 0===r&&(r="string"==typeof e?s[e]:On(e,i,n,null),t.set(s,r)),r},Pv=(t,e,s,i,n,r,o)=>{let a=t.get(e);return void 0===a&&(o?Pn(s.declaration,a=$n.fromParent(i,new Tn),n,e):a=$n.fromParent(i,new Tn(r,e)),t.set(e,a)),a};class Mv{constructor(t,e){this.view=t.create().setLocation(e)}valueChanged(t,e,s){const i=this.$controller,n=this.view.bindings;let r,o=0,a=0;if(i.isActive&&null!=n)for(r=$n.fromParent(i.scope,void 0===t?{}:t),a=n.length;a>o;++o)n[o].bind(r)}attaching(t,e,s){const{$controller:i,value:n}=this,r=$n.fromParent(i.scope,void 0===n?{}:n);return this.view.activate(t,i,s,r)}detaching(t,e,s){return this.view.deactivate(t,this.$controller,s)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}Mv.inject=[nd,Zd],Zh([Oc],Mv.prototype,"value",void 0),uu("with")(Mv);let Nv=class{constructor(t,e){this.f=t,this.l=e,this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,s){const i=this.view,n=this.$controller;return this.queue((()=>i.activate(t,n,s,n.scope))),this.queue((()=>this.swap(t,this.value))),this.promise}detaching(t,e,s){return this.queue((()=>this.view.deactivate(t,this.$controller,s))),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue((()=>this.swap(null,this.value)))}caseChanged(t){this.queue((()=>this.zi(t)))}zi(t){const e=t.isMatch(this.value),s=this.activeCases,i=s.length;if(!e)return i>0&&s[0].id===t.id?this.Gi(null):void 0;if(i>0&&s[0].id<t.id)return;const n=[];let r=t.fallThrough;if(r){const e=this.cases,s=e.indexOf(t);for(let t=s,i=e.length;t<i&&r;t++){const s=e[t];n.push(s),r=s.fallThrough}}else n.push(t);return Ve(this.Gi(null,n),(()=>(this.activeCases=n,this.Xi(null))))}swap(t,e){const s=[];let i=!1;for(const t of this.cases)if((i||t.isMatch(e))&&(s.push(t),i=t.fallThrough),s.length>0&&!i)break;const n=this.defaultCase;return 0===s.length&&void 0!==n&&s.push(n),Ve(this.activeCases.length>0?this.Gi(t,s):void 0,(()=>{if(this.activeCases=s,0!==s.length)return this.Xi(t)}))}Xi(t){const e=this.$controller;if(!e.isActive)return;const s=this.activeCases,i=s.length;if(0===i)return;const n=e.scope;return 1===i?s[0].activate(t,0,n):We(...s.map((e=>e.activate(t,0,n))))}Gi(t,e=[]){const s=this.activeCases,i=s.length;if(0!==i){if(1===i){const i=s[0];return e.includes(i)?void 0:(s.length=0,i.deactivate(t,0))}return Ve(We(...s.reduce(((s,i)=>(e.includes(i)||s.push(i.deactivate(t,0)),s)),[])),(()=>{s.length=0}))}}queue(t){const e=this.promise;let s;s=this.promise=Ve(Ve(e,t),(()=>{this.promise===s&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};Zh([Oc],Nv.prototype,"value",void 0),Nv=Zh([uu("switch"),tc(0,nd),tc(1,Zd)],Nv);let Bv=0,jv=class{constructor(t,e,s,i){this.f=t,this.Ki=e,this.l=s,this.id=++Bv,this.fallThrough=!1,this.view=void 0,this.Qi=i.config.level<=1,this.Oe=i.scopeTo(`${this.constructor.name}-#${this.id}`)}link(t,e,s,i){const n=t.parent,r=n?.viewModel;if(!(r instanceof Nv))throw fc("AUR0815");this.$switch=r,this.linkToSwitch(r)}detaching(t,e,s){return this.deactivate(t,s)}isMatch(t){this.Oe.debug("isMatch()");const e=this.value;return Sc(e)?(void 0===this.Pi&&(this.Pi=this.Yi(e)),e.includes(t)):e===t}valueChanged(t,e){Sc(t)?(this.Pi?.unsubscribe(this),this.Pi=this.Yi(t)):void 0!==this.Pi&&this.Pi.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e,s){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(t??i,this.$controller,e,s)}deactivate(t,e){const s=this.view;if(void 0!==s&&s.isActive)return s.deactivate(t??s,this.$controller,e)}dispose(){this.Pi?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Yi(t){const e=this.Ki.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}};jv.inject=[nd,Uh,Zd,pi],Zh([Oc],jv.prototype,"value",void 0),Zh([Oc({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:1})],jv.prototype,"fallThrough",void 0),jv=Zh([uu("case")],jv);let Lv=class extends jv{linkToSwitch(t){if(void 0!==t.defaultCase)throw fc("AUR0816");t.defaultCase=this}};Lv=Zh([uu("default-case")],Lv);let Uv=class{constructor(t,e,s,i){this.f=t,this.l=e,this.p=s,this.preSettledTask=null,this.postSettledTask=null,this.logger=i.scopeTo("promise.resolve")}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,s){const i=this.view,n=this.$controller;return Ve(i.activate(t,n,s,this.viewScope=$n.fromParent(n.scope,{})),(()=>this.swap(t,s)))}valueChanged(t,e,s){this.$controller.isActive&&this.swap(null,s)}swap(t,e){const s=this.value;if(!Cc(s))return void this.logger.warn(`The value '${String(s)}' is not a promise. No change will be done.`);const i=this.p.domWriteQueue,n=this.fulfilled,r=this.rejected,o=this.pending,a=this.viewScope;let h;const c={reusable:!1},l=()=>{We(h=(this.preSettledTask=i.queueTask((()=>We(n?.deactivate(t,e),r?.deactivate(t,e),o?.activate(t,e,a))),c)).result.catch((t=>{if(!(t instanceof Jh))throw t})),s.then((l=>{if(this.value!==s)return;const u=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask((()=>We(o?.deactivate(t,e),r?.deactivate(t,e),n?.activate(t,e,a,l))),c)).result};1===this.preSettledTask.status?h.then(u):(this.preSettledTask.cancel(),u())}),(l=>{if(this.value!==s)return;const u=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask((()=>We(o?.deactivate(t,e),n?.deactivate(t,e),r?.activate(t,e,a,l))),c)).result};1===this.preSettledTask.status?h.then(u):(this.preSettledTask.cancel(),u())})))};1===this.postSettledTask?.status?this.postSettlePromise.then(l):(this.postSettledTask?.cancel(),l())}detaching(t,e,s){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,s)}dispose(){this.view?.dispose(),this.view=void 0}};Zh([Oc],Uv.prototype,"value",void 0),Uv=Zh([uu("promise"),tc(0,nd),tc(1,Zd),tc(2,Eu),tc(3,pi)],Uv);let Dv=class{constructor(t,e){this.f=t,this.l=e,this.view=void 0}link(t,e,s,i){Wv(t).pending=this}activate(t,e,s){let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e,s)}deactivate(t,e){const s=this.view;if(void 0!==s&&s.isActive)return s.deactivate(s,this.$controller,e)}detaching(t,e,s){return this.deactivate(t,s)}dispose(){this.view?.dispose(),this.view=void 0}};Zh([Oc({mode:2})],Dv.prototype,"value",void 0),Dv=Zh([uu("pending"),tc(0,nd),tc(1,Zd)],Dv);let Fv=class{constructor(t,e){this.f=t,this.l=e,this.view=void 0}link(t,e,s,i){Wv(t).fulfilled=this}activate(t,e,s,i){this.value=i;let n=this.view;if(void 0===n&&(n=this.view=this.f.create().setLocation(this.l)),!n.isActive)return n.activate(n,this.$controller,e,s)}deactivate(t,e){const s=this.view;if(void 0!==s&&s.isActive)return s.deactivate(s,this.$controller,e)}detaching(t,e,s){return this.deactivate(t,s)}dispose(){this.view?.dispose(),this.view=void 0}};Zh([Oc({mode:4})],Fv.prototype,"value",void 0),Fv=Zh([uu("then"),tc(0,nd),tc(1,Zd)],Fv);let Vv=class{constructor(t,e){this.f=t,this.l=e,this.view=void 0}link(t,e,s,i){Wv(t).rejected=this}activate(t,e,s,i){this.value=i;let n=this.view;if(void 0===n&&(n=this.view=this.f.create().setLocation(this.l)),!n.isActive)return n.activate(n,this.$controller,e,s)}deactivate(t,e){const s=this.view;if(void 0!==s&&s.isActive)return s.deactivate(s,this.$controller,e)}detaching(t,e,s){return this.deactivate(t,s)}dispose(){this.view?.dispose(),this.view=void 0}};function Wv(t){const e=t.parent,s=e?.viewModel;if(s instanceof Uv)return s;throw fc("AUR0813")}Zh([Oc({mode:4})],Vv.prototype,"value",void 0),Vv=Zh([uu("catch"),tc(0,nd),tc(1,Zd)],Vv);let _v=class{"promise.resolve"(t,e,s){return new il(t,e,"promise","bind")}};_v=Zh([al({pattern:"promise.resolve",symbols:""})],_v);let qv=class{then(t,e,s){return new il(t,e,"then","from-view")}};qv=Zh([al({pattern:"then",symbols:""})],qv);let Hv=class{catch(t,e,s){return new il(t,e,"catch","from-view")}};Hv=Zh([al({pattern:"catch",symbols:""})],Hv);class Kv{constructor(t,e,s,i,n,r,o){this.c=t,this.parent=e,this.host=s,this.l=i,this.p=n,this.scopeBehavior="auto",this.Zi=void 0,this.r=t.get(od),this.Ji=r,this.ts=o}static get inject(){return[Ns,Sd,Yd,Zd,Eu,xp,Ds(Gv)]}get pending(){return this.es}get composition(){return this.Zi}attaching(t,e,s){return this.es=Ve(this.queue(new Qv(this.view,this.viewModel,this.model,void 0),t),(t=>{this.ts.isCurrent(t)&&(this.es=void 0)}))}detaching(t){const e=this.Zi,s=this.es;return this.ts.invalidate(),this.Zi=this.es=void 0,Ve(s,(()=>e?.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Zi?this.es=Ve(this.es,(()=>Ve(this.queue(new Qv(this.view,this.viewModel,this.model,t),void 0),(t=>{this.ts.isCurrent(t)&&(this.es=void 0)})))):this.Zi.update(this.model)}queue(t,e){const s=this.ts,i=this.Zi;return Ve(s.create(t),(t=>s.isCurrent(t)?Ve(this.compose(t),(n=>s.isCurrent(t)?Ve(n.activate(e),(()=>s.isCurrent(t)?(this.Zi=n,Ve(i?.deactivate(e),(()=>t))):Ve(n.controller.deactivate(n.controller,this.$controller,2),(()=>(n.controller.dispose(),t))))):(n.controller.dispose(),t))):t))}compose(t){let e,s,i;const{view:n,viewModel:r,model:o}=t.change,{c:a,host:h,$controller:c,l}=this,u=this.getDef(r),d=a.createChild(),p=null==l?h.parentNode:l.parentNode;if(null!==u){if(u.containerless)throw fc("AUR0806");null==l?(s=h,i=()=>{}):(s=p.insertBefore(this.p.document.createElement(u.name),l),i=()=>{s.remove()}),e=this.getVm(d,r,s)}else s=null==l?h:l,e=this.getVm(d,r,s);const f=()=>{if(null!==u){const n=dd.$el(d,e,s,{projections:this.Ji.projections},u);return new Yv(n,(t=>n.activate(t??n,c,1,c.scope.parent)),(t=>Ve(n.deactivate(t??n,c,2),i)),(t=>e.activate?.(t)),t)}{const i=hp.create({name:Sp.generateName(),template:n}),r=this.r.getViewFactory(i,d),o=dd.$view(r,c),a="auto"===this.scopeBehavior?$n.fromParent(this.parent.scope,e):$n.create(e);return ip(s)?o.setLocation(s):o.setHost(s),new Yv(o,(t=>o.activate(t??o,c,1,a)),(t=>o.deactivate(t??o,c,2)),(t=>e.activate?.(t)),t)}};return"activate"in e?Ve(e.activate(o),(()=>f())):f()}getVm(t,e,s){if(null==e)return new zv;if("object"==typeof e)return e;const i=this.p,n=ip(s);qc(t,i.Element,qc(t,Yd,new ti("ElementResolver",n?null:s))),qc(t,Zd,new ti("IRenderLocation",n?s:null));const r=t.invoke(e);return qc(t,e,new ti("au-compose.viewModel",r)),r}getDef(t){const e=Ac(t)?t:t?.constructor;return Sp.isType(e)?Sp.getDefinition(e):null}}Zh([Oc],Kv.prototype,"view",void 0),Zh([Oc],Kv.prototype,"viewModel",void 0),Zh([Oc],Kv.prototype,"model",void 0),Zh([Oc({set:t=>{if("scoped"===t||"auto"===t)return t;throw fc("AUR0805")}})],Kv.prototype,"scopeBehavior",void 0),op("au-compose")(Kv);class zv{}class Gv{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return Ve(t.load(),(t=>new Xv(++this.id,t)))}invalidate(){this.id++}}class Qv{constructor(t,e,s,i){this.view=t,this.viewModel=e,this.model=s,this.src=i}load(){return Cc(this.view)||Cc(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new Jv(t,e,this.model,this.src))):new Jv(this.view,this.viewModel,this.model,this.src)}}class Jv{constructor(t,e,s,i){this.view=t,this.viewModel=e,this.model=s,this.src=i}}class Xv{constructor(t,e){this.id=t,this.change=e}}class Yv{constructor(t,e,s,i,n){this.controller=t,this.start=e,this.stop=s,this.update=i,this.context=n,this.state=0}activate(t){if(0!==this.state)throw fc(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw fc("AUR0808");default:this.state=-1}}}let Zv=class{constructor(t,e,s,i){let n;this.ss=null,this.rs=null;const r=e.auSlot,o=s.instruction?.projections?.[r.name];null==o?(n=i.getViewFactory(r.fallback,s.controller.container),this.os=!1):(n=i.getViewFactory(o,s.parent.controller.container),this.os=!0),this.ls=s,this.view=n.create().setLocation(t)}static get inject(){return[Zd,xp,Ad,od]}binding(t,e,s){let i;this.ss=this.$controller.scope.parent,this.os&&(i=this.ls.controller.scope.parent,(this.rs=$n.fromParent(i,i.bindingContext)).overrideContext.$host=this.expose??this.ss.bindingContext)}attaching(t,e,s){return this.view.activate(t,this.$controller,s,this.os?this.rs:this.ss)}detaching(t,e,s){return this.view.deactivate(t,this.$controller,s)}exposeChanged(t){this.os&&null!=this.rs&&(this.rs.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}};Zh([Oc],Zv.prototype,"expose",void 0),Zv=Zh([op({name:"au-slot",template:null,containerless:!0})],Zv);const tm=Dc("ISanitizer",(t=>t.singleton(class{sanitize(){throw fc('"sanitize" method not implemented')}})));let em=class{constructor(t){this.cs=t}toView(t){return null==t?null:this.cs.sanitize(t)}};em=Zh([tc(0,tm)],em),function(t){Pl.define("sanitize",t)}(em);const sm=Lg,im=Pg,nm=Mg,rm=Ng,om=Ug,am=Fg,hm=Bg,cm=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return Fc(zp,this).register(t)}compile(t,e,s){const i=hp.getOrCreate(t);if(null===i.template||void 0===i.template)return i;if(!1===i.needsCompile)return i;s??(s=pg);const n=new lg(t,e,s,null,null,void 0),r=Tc(i.template)||!t.enhance?n.we.createTemplate(i.template):i.template,o=r.nodeName===rg&&null!=r.content,a=o?r.content:r,h=e.get(function(t){function e(t,s,i){Ms.inject(e)(t,s,i)}return e.$isResolver=!0,e.resolve=function(e,s){return s.root===s?s.getAll(t,!1):s.has(t,!1)?s.getAll(t,!1).concat(s.root.getAll(t,!1)):s.root.getAll(t,!1)},e}(Ag)),c=h.length;let l=0;if(c>0)for(;c>l;)h[l].compiling?.(r),++l;if(r.hasAttribute(kg))throw fc("AUR0701");return this.be(a,n),this.ye(a,n),hp.create({...t,name:t.name||mp(),dependencies:(t.dependencies??si).concat(n.deps??si),instructions:n.rows,surrogates:o?this.ke(r,n):si,template:r,hasSlots:n.hasSlot,needsCompile:!1})}compileSpread(t,e,s,i){const n=new lg(t,s,pg,null,null,void 0),r=[],o=n.Ae(i.nodeName.toLowerCase()),a=null!==o,h=n.ep,c=e.length;let l,u,d,p,f,g,v,m,w,b,y=0,k=null,C=null;for(;c>y;++y)if(l=e[y],w=l.target,b=l.rawValue,C=n.Ce(l),null!==C&&(1&C.type)>0)gg.node=i,gg.attr=l,gg.bindable=null,gg.def=null,r.push(C.build(gg,n.ep,n.m));else if(k=n.Be(w),null===k)if(null===C){if(v=h.parse(b,1),a&&(p=bg.from(o,!1),f=p.attrs[w],void 0!==f)){v=h.parse(b,1),r.push(new Kp(null==v?new Pp(b,f.property):new Ip(v,f.property)));continue}if(null!=v)r.push(new Ip(v,n.m.map(i,w)??Oe(w)));else switch(w){case"class":r.push(new Wp(b));break;case"style":r.push(new _p(b));break;default:r.push(new Vp(b,w))}}else{if(a&&(p=bg.from(o,!1),f=p.attrs[w],void 0!==f)){gg.node=i,gg.attr=l,gg.bindable=f,gg.def=o,r.push(new Kp(C.build(gg,n.ep,n.m)));continue}gg.node=i,gg.attr=l,gg.bindable=null,gg.def=null,r.push(C.build(gg,n.ep,n.m))}else{if(k.isTemplateController)throw fc(`AUR0703:${w}`);p=bg.from(k,!0),m=!1===k.noMultiBindings&&null===C&&ug(b),m?d=this.Re(i,b,k,n):(g=p.primary,null===C?(v=h.parse(b,1),d=[null===v?new Pp(b,g.property):new Ip(v,g.property)]):(gg.node=i,gg.attr=l,gg.bindable=g,gg.def=k,d=[C.build(gg,n.ep,n.m)])),(u??(u=[])).push(new Bp(this.resolveResources?k:k.name,null!=k.aliases&&k.aliases.includes(w)?w:void 0,d))}return dg(),null!=u?u.concat(r):r}ke(t,e){const s=[],i=t.attributes,n=e.ep;let r,o,a,h,c,l,u,d,p,f,g,v,m=i.length,w=0,b=null,y=null;for(;m>w;++w){if(r=i[w],o=r.name,a=r.value,h=e.fe.parse(o,a),g=h.target,v=h.rawValue,vg[g])throw fc(`AUR0702:${o}`);if(y=e.Ce(h),null!==y&&(1&y.type)>0)gg.node=t,gg.attr=h,gg.bindable=null,gg.def=null,s.push(y.build(gg,e.ep,e.m));else if(b=e.Be(g),null===b)if(null===y)if(p=n.parse(v,1),null!=p)t.removeAttribute(o),--w,--m,s.push(new Ip(p,e.m.map(t,g)??Oe(g)));else switch(o){case"class":s.push(new Wp(v));break;case"style":s.push(new _p(v));break;default:s.push(new Vp(v,o))}else gg.node=t,gg.attr=h,gg.bindable=null,gg.def=null,s.push(y.build(gg,e.ep,e.m));else{if(b.isTemplateController)throw fc(`AUR0703:${g}`);u=bg.from(b,!0),f=!1===b.noMultiBindings&&null===y&&ug(v),f?l=this.Re(t,v,b,e):(d=u.primary,null===y?(p=n.parse(v,1),l=[null===p?new Pp(v,d.property):new Ip(p,d.property)]):(gg.node=t,gg.attr=h,gg.bindable=d,gg.def=b,l=[y.build(gg,e.ep,e.m)])),t.removeAttribute(o),--w,--m,(c??(c=[])).push(new Bp(this.resolveResources?b:b.name,null!=b.aliases&&b.aliases.includes(g)?g:void 0,l))}}return dg(),null!=c?c.concat(s):s}ye(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.Se(t,e):this.Ie(t,e);case 3:return this.Te(t,e);case 11:{let s=t.firstChild;for(;null!==s;)s=this.ye(s,e);break}}return t.nextSibling}Se(t,e){const s=t.attributes,i=s.length,n=[],r=e.ep;let o,a,h,c,l,u,d,p,f=!1,g=0;for(;i>g;++g)if(o=s[g],h=o.name,c=o.value,"to-binding-context"!==h)if(a=e.fe.parse(h,c),u=a.target,d=a.rawValue,l=e.Ce(a),null===l)p=r.parse(d,1),n.push(new Up(null===p?new dn(d):p,Oe(u)));else{if("bind"!==a.command)throw fc(`AUR0704:${a.command}`);n.push(new Up(r.parse(d,16),Oe(u)))}else f=!0;return e.rows.push([new Lp(n,f)]),this.Pe(t).nextSibling}Ie(t,e){var s,i,n,r;const o=t.nextSibling,a=(t.getAttribute("as-element")??t.nodeName).toLowerCase(),h=e.Ae(a),c=null!==h,l=c&&null!=h.shadowOptions,u=h?.capture,d=null!=u&&"boolean"!=typeof u,p=u?[]:si,f=e.ep,g=this.debug?ni:()=>{t.removeAttribute(w),--L,--j};let v,m,w,b,y,k,C,S,A,T,$,x,I,R,E,O,P,M,N,B=t.attributes,j=B.length,L=0,U=null,D=!1,F=null,V=!0,W=!1,_=!1;if("slot"===a){if(null==e.root.def.shadowOptions)throw fc(`AUR0717:${e.root.def.name}`);e.root.hasSlot=!0}if(c&&(V=h.processContent?.call(h.Type,t,e.p),B=t.attributes,j=B.length),e.root.def.enhance&&t.classList.contains("au"))throw fc("AUR0705");for(;j>L;++L){switch(m=B[L],w=m.name,b=m.value,w){case"as-element":case"containerless":g(),W||(W="containerless"===w);continue}if(y=e.fe.parse(w,b),F=e.Ce(y),P=y.target,M=y.rawValue,u&&(!d||d&&u(P))){if(null!=F&&1&F.type){g(),p.push(y);continue}if(_=P!==Rg&&"slot"!==P,_&&(E=bg.from(h,!1),null==E.attrs[P]&&!e.Be(P)?.isTemplateController)){g(),p.push(y);continue}}if(null!==F&&1&F.type)gg.node=t,gg.attr=y,gg.bindable=null,gg.def=null,(k??(k=[])).push(F.build(gg,e.ep,e.m)),g();else if(U=e.Be(P),null===U)if(null!==F)g(),c&&(E=bg.from(h,!1),S=E.attrs[P],void 0!==S)?(gg.node=t,gg.attr=y,gg.bindable=S,gg.def=h,(C??(C=[])).push(F.build(gg,e.ep,e.m))):(gg.node=t,gg.attr=y,gg.bindable=null,gg.def=null,(k??(k=[])).push(F.build(gg,e.ep,e.m)));else{if(c&&(E=bg.from(h,!1),S=E.attrs[P],void 0!==S)){I=f.parse(M,1),(C??(C=[])).push(null==I?new Pp(M,S.property):new Ip(I,S.property)),g();continue}I=f.parse(M,1),null!=I&&(g(),(k??(k=[])).push(new Ip(I,e.m.map(t,P)??Oe(P))))}else E=bg.from(U,!0),D=!1===U.noMultiBindings&&null===F&&ug(M),D?T=this.Re(t,M,U,e):(O=E.primary,null===F?(I=f.parse(M,1),T=[null===I?new Pp(M,O.property):new Ip(I,O.property)]):(gg.node=t,gg.attr=y,gg.bindable=O,gg.def=U,T=[F.build(gg,e.ep,e.m)])),g(),U.isTemplateController?($??($=[])).push(new jp(fg,this.resolveResources?U:U.name,void 0,T)):(A??(A=[])).push(new Bp(this.resolveResources?U:U.name,null!=U.aliases&&U.aliases.includes(P)?P:void 0,T))}if(dg(),this.Ee(t)&&null!=k&&k.length>1&&this.Le(t,k),c&&(R=new Np(this.resolveResources?h:h.name,void 0,C??si,null,W,p),a===Rg)){const s=t.getAttribute("name")||Ig,i=e.t(),n=e.De();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute(Rg)?t.removeChild(r):Hd(i,r),r=t.firstChild;this.ye(i.content,n),R.auSlot={name:s,fallback:hp.create({name:mp(),template:i,instructions:n.rows,needsCompile:!1})},t=this.Ue(t,e)}if(null==k&&null==R&&null==A||(v=si.concat(R??si,A??si,k??si),this.Pe(t)),null!=$){let n;j=$.length-1,L=j,x=$[L],hg(t)?(n=e.t(),Kd(n,[e.$e(og),e.$e(ag),this.Pe(e.h(ng))])):(this.Ue(t,e),"TEMPLATE"===t.nodeName?n=t:(n=e.t(),Hd(n,t)));const r=n,o=e.De(null==v?[]:[v]);let u,d,p,f,g,m,w,b,y=0,k=0,C=t.firstChild,S=!1;if(!1!==V)for(;null!==C;)if(d=1===C.nodeType?C.getAttribute(Rg):null,null!==d&&C.removeAttribute(Rg),c)u=C.nextSibling,l||(S=3===C.nodeType&&""===C.textContent.trim(),S||((s=f??(f={}))[i=d||Ig]??(s[i]=[])).push(C),t.removeChild(C)),C=u;else{if(null!==d)throw d=d||Ig,fc(`AUR0706:${a}[${d}]`);C=C.nextSibling}if(null!=f){for(d in p={},f){for(n=e.t(),g=f[d],y=0,k=g.length;k>y;++y)m=g[y],"TEMPLATE"===m.nodeName?m.attributes.length>0?Hd(n,m):Hd(n,m.content):Hd(n,m);b=e.De(),this.ye(n.content,b),p[d]=hp.create({name:mp(),template:n,instructions:b.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}R.projections=p}if(c&&(W||h.containerless)&&this.Ue(t,e),N=!c||!h.containerless&&!W&&!1!==V,N)if(t.nodeName===rg)this.ye(t.content,o);else for(C=t.firstChild;null!==C;)C=this.ye(C,o);for(x.def=hp.create({name:mp(),template:r,instructions:o.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});L-- >0;)x=$[L],n=e.t(),w=this.Pe(e.h(ng)),Kd(n,[e.$e(og),e.$e(ag),w]),x.def=hp.create({name:mp(),template:n,needsCompile:!1,instructions:[[$[L+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([x])}else{null!=v&&e.rows.push(v);let s,i,o,u,d,p,f,g=t.firstChild,m=null,w=!1,b=0,y=0;if(!1!==V)for(;null!==g;)if(i=1===g.nodeType?g.getAttribute(Rg):null,null!==i&&g.removeAttribute(Rg),c)s=g.nextSibling,l||(w=3===g.nodeType&&""===g.textContent.trim(),w||((n=o??(o={}))[r=i||Ig]??(n[r]=[])).push(g),t.removeChild(g)),g=s;else{if(null!==i)throw i=i||Ig,fc(`AUR0706:${a}[${i}]`);g=g.nextSibling}if(null!=o){for(i in m={},o){for(p=e.t(),u=o[i],b=0,y=u.length;y>b;++b)d=u[b],d.nodeName===rg?d.attributes.length>0?Hd(p,d):Hd(p,d.content):Hd(p,d);f=e.De(),this.ye(p.content,f),m[i]=hp.create({name:mp(),template:p,instructions:f.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}R.projections=m}if(c&&(W||h.containerless)&&this.Ue(t,e),N=!c||!h.containerless&&!W&&!1!==V,N&&t.childNodes.length>0)for(g=t.firstChild;null!==g;)g=this.ye(g,e)}return o}Te(t,e){const s=t.parentNode,i=e.ep.parse(t.textContent,1),n=t.nextSibling;let r,o,a,h,c;if(null!==i){for(({parts:r,expressions:o}=i),(c=r[0])&&Wd(s,e._e(c),t),a=0,h=o.length;h>a;++a)_d(s,t,[e.$e(og),e.$e(ag),this.Pe(e.h(ng))]),(c=r[a+1])&&Wd(s,e._e(c),t),e.rows.push([new Dp(o[a],e.root.def.isStrictBinding)]);s.removeChild(t)}return n}Re(t,e,s,i){const n=bg.from(s,!0),r=e.length,o=[];let a,h,c,l,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){h=e.slice(p,g);break}if(void 0===h&&(h=e.slice(p)),l=i.fe.parse(a,h),u=i.Ce(l),d=n.attrs[l.target],null==d)throw fc(`AUR0707:${s.name}.${l.target}`);for(null===u?(c=i.ep.parse(h,1),o.push(null===c?new Pp(h,d.property):new Ip(c,d.property))):(gg.node=t,gg.attr=l,gg.bindable=d,gg.def=s,o.push(u.build(gg,i.ep,i.m)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,h=void 0}return dg(),o}be(t,e){const s=t,i=Ne(s.querySelectorAll("template[as-custom-element]")),n=i.length;if(0===n)return;if(n===s.childElementCount)throw fc("AUR0708");const r=new Set,o=[];for(const t of i){if(t.parentNode!==s)throw fc("AUR0709");const i=Cg(t,r),n=class{},a=t.content,h=Ne(a.querySelectorAll("bindable")),c=Nc.for(n),l=new Set,u=new Set;for(const t of h){if(t.parentNode!==a)throw fc("AUR0710");const e=t.getAttribute("property");if(null===e)throw fc("AUR0711");const s=t.getAttribute("attribute");if(null!==s&&u.has(s)||l.has(e))throw fc(`AUR0712:${e}+${s}`);null!==s&&u.add(s),l.add(e),c.add({property:e,attribute:s??void 0,mode:Sg(t)}),t.getAttributeNames().filter((t=>!yg.includes(t))).length,a.removeChild(t)}o.push(n),e.qe(wp({name:i,template:t},n)),s.removeChild(t)}let a=0;const h=o.length;for(;h>a;++a)kp(o[a]).dependencies.push(...e.def.dependencies??si,...e.deps??si)}Ee(t){return"INPUT"===t.nodeName&&1===mg[t.type]}Le(t,e){if("INPUT"===t.nodeName){const t=e;let s,i,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":s=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==s&&i<s&&([t[s],t[i]]=[t[i],t[s]])}}Me(t){return t.nodeName===ng&&cg(ig=qd(t))&&ig.textContent===ag&&cg(ig=qd(ig))&&ig.textContent===og}Pe(t){return t.classList.add("au"),t}Ue(t,e){if(hg(t))return t;const s=t.parentNode,i=this.Pe(e.h(ng));return _d(s,t,[e.$e(og),e.$e(ag),i]),s.removeChild(t),i}},hv],lm=[fl,pl,ml],um=[Df,Bf,Lf,jf,Uf,Ff,Kf,Vf,Wf,Hf,qf,_f,zf],dm=[sm,im,nm,rm,om,am,hm,em,fv,gv,wv,Mv,Nv,jv,Lv,Uv,Dv,Fv,Vv,_v,qv,Hv,_g,qg,lv,Kv,pv,uv,dv,Zv],pm=[of,af,nf,rf,Yp,Zp,tf,ef,sf,cf,ff,lf,uf,df,pf,hf,gf];var fm,gm;!function t(e){return{optionsProvider:e,register(t){const s={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(s),t.register(Wc(Wn,s.coercingOptions),...cm,...dm,...lm,...um,...pm)},customize:s=>t(s??e)}}(ni),Dc("IAurelia"),function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(fm||(fm={})),function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(gm||(gm={}));const vm=Ms.createInterface("IGoogleMapsAPI",(t=>t.singleton(mm)));let mm=class{constructor(t){this.config=t,this._scriptPromise=null}getMapsInstance(){if(null!==this._scriptPromise)return this._scriptPromise;if(void 0===window.google||void 0===window.google.maps){let t=document.createElement("script"),e=[this.config.get("apiKey")?`key=${this.config.get("apiKey")}&`:"",this.config.get("client")?`client=${this.config.get("client")}`:"",this.config.get("apiLibraries")?`libraries=${this.config.get("apiLibraries")}`:"",this.config.get("language")?`language=${this.config.get("language")}`:"",this.config.get("region")?`region=${this.config.get("region")}`:"","callback=aureliaGoogleMapsCallback"];return t.type="text/javascript",t.async=!0,t.defer=!0,t.src=`${this.config.get("apiScript")}?${e.join("&")}`,document.body.appendChild(t),this._scriptPromise=new Promise(((e,s)=>{window.aureliaGoogleMapsCallback=()=>{e(!0)},t.onerror=t=>{s(t)}})),this._scriptPromise}return!(!window.google||!window.google.maps)&&(this._scriptPromise=new Promise((t=>{t(!0)})),this._scriptPromise)}};var wm,bm;mm=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}([(wm=0,bm=Oi,function(t,e){bm(t,e,wm)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],mm);const ym=Ms.createInterface("IMarkerClustering",(t=>t.singleton(km)));let km=class{constructor(t){this.config=t}isEnabled(){return this.config.get("markerCluster")&&this.config.get("markerCluster").enable}clearMarkers(){this.markerClusterer&&this.markerClusterer.clearMarkers()}loadScript(){if(!this.isEnabled())return;let t=document.createElement("script");t.type="text/javascript",t.src=this.config.get("markerCluster").src,document.body.appendChild(t)}renderClusters(t,e){this.isEnabled()&&(this.markerClusterer=new window.MarkerClusterer(t,e,this.config.get("markerCluster")))}};km=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}([function(t,e){return function(s,i){e(s,i,t)}}(0,Oi),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],km);class Cm{}Cm.BOUNDSCHANGED="bounds-change",Cm.MAPCLICK="map-click",Cm.MAPOVERLAYCOMPLETE="map-overlay-complete",Cm.MARKERRENDERED="marker-render",Cm.MARKERCLICK="marker-click",Cm.MARKERMOUSEOVER="marker-mouse-over",Cm.MARKERMOUSEOUT="marker-mouse-out",Cm.POLYGONCLICK="polygon-click",Cm.POLYGONRENDERED="polygon-render",Cm.INFOWINDOWSHOW="info-window-show",Cm.INFOWINDOWCLOSE="info-window-close",Cm.START_MARKER_HIGHLIGHT="start-marker-highlight",Cm.STOP_MARKER_HIGHLIGHT="stop-marker-highlight",Cm.PAN_TO_MARKER="pan-to-marker",Cm.CLEAR_MARKERS="clear-markers";var Sm=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o},Am=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Tm=function(t,e){return function(s,i){e(s,i,t)}};let $m=class{constructor(t,e,s,i,n,r){this.element=t,this.config=e,this.googleMapsApi=s,this.markerClustering=i,this.logger=n,this.platform=r,this._currentInfoWindow=null,this.longitude=0,this.latitude=0,this.zoom=8,this.disableDefaultUi=!1,this.markers=[],this.autoUpdateBounds=!1,this.autoInfoWindow=!0,this.mapType="ROADMAP",this.options={},this.drawEnabled=!1,this.drawMode="MARKER",this.polygons=[],this.drawingControl=!0,this.drawingControlOptions={},this.map=null,this._renderedMarkers=[],this._markersSubscription=null,this._scriptPromise=null,this._mapPromise=null,this._mapResolve=null,this.drawingManager=null,this._renderedPolygons=[],this._polygonsSubscription=null,this.logger.scopeTo("aurelia2-google-maps"),e.get("apiScript")||this.logger.error("No API script is defined."),e.get("apiKey")||!1===e.get("apiKey")||e.get("client")||!1===e.get("client")||this.logger.error("No API key or client ID has been specified."),this.markerClustering.loadScript(),this._scriptPromise=this.googleMapsApi.getMapsInstance();let o=this;this._mapPromise=this._scriptPromise.then((()=>new Promise((t=>{o._mapResolve=t})))),this.element.addEventListener(Cm.START_MARKER_HIGHLIGHT,(t=>{let e=o._renderedMarkers[t.detail.index];e.setIcon(e.custom.altIcon),e.setZIndex(window.google.maps.Marker.MAX_ZINDEX+1)})),this.element.addEventListener(Cm.STOP_MARKER_HIGHLIGHT,(t=>{let e=o._renderedMarkers[t.detail.index];e.setIcon(e.custom.defaultIcon)})),this.element.addEventListener(Cm.PAN_TO_MARKER,(t=>{o.map.panTo(o._renderedMarkers[t.detail.index].position),o.map.setZoom(17)})),this.element.addEventListener(Cm.CLEAR_MARKERS,(()=>{this.clearMarkers()}))}bound(){this.markersChanged(this.markers),this.polygonsChanged(this.polygons)}clearMarkers(){this._renderedMarkers&&(this._renderedMarkers.forEach((function(t){t.setMap(null)})),this._renderedMarkers=[],this.markerClustering&&this.markerClustering.clearMarkers())}attached(){this.element.addEventListener("dragstart",(t=>{t.preventDefault()})),this.element.addEventListener("zoom_to_bounds",(()=>{this.zoomToMarkerBounds(!0)})),this._scriptPromise.then((()=>{let t=new window.google.maps.LatLng(parseFloat(this.latitude),parseFloat(this.longitude)),e=this.getMapTypeId(),s=Object.assign({},this.options,this.config.get("options"),{center:t,zoom:parseInt(this.zoom,10),disableDefaultUI:this.disableDefaultUi,mapTypeId:e});this.map=new window.google.maps.Map(this.element,s),this.mapLoaded&&this.mapLoaded(this.map),this._mapResolve(),this.map.addListener("click",(t=>{xm(Cm.MAPCLICK,t,this.element),this.autoInfoWindow&&this._currentInfoWindow&&(this._currentInfoWindow.close(),xm(Cm.INFOWINDOWCLOSE,{infoWindow:this._currentInfoWindow},this.element))})),this.map.addListener("dragend",(()=>{this.sendBoundsEvent()})),this.map.addListener("zoom_changed",(()=>{this.sendBoundsEvent()}))}))}sendBoundsEvent(){let t=this.map.getBounds();t&&xm(Cm.BOUNDSCHANGED,{bounds:t},this.element)}renderMarker(t){return this._mapPromise.then((()=>{let e=new window.google.maps.LatLng(parseFloat(t.latitude),parseFloat(t.longitude));this.createMarker({map:this.map,position:e}).then((e=>{e.addListener("click",(()=>{xm(Cm.MARKERCLICK,{marker:t,createdMarker:e},this.element),this.autoInfoWindow&&(this._currentInfoWindow&&this._currentInfoWindow.close(),e.infoWindow?(this._currentInfoWindow=e.infoWindow,e.infoWindow.open(this.map,e)):this._currentInfoWindow=null)})),e.addListener("mouseover",(()=>{xm(Cm.MARKERMOUSEOVER,{marker:e},this.element),e.setZIndex(window.google.maps.Marker.MAX_ZINDEX+1)})),e.addListener("mouseout",(()=>{xm(Cm.MARKERMOUSEOUT,{marker:e},this.element)})),e.addListener("dblclick",(()=>{this.map.setZoom(15),this.map.panTo(e.position)})),t.icon&&e.setIcon(t.icon),t.label&&e.setLabel(t.label),t.title&&e.setTitle(t.title),t.draggable&&e.setDraggable(t.draggable),t.infoWindow&&(e.infoWindow=new window.google.maps.InfoWindow({content:t.infoWindow.content,pixelOffset:t.infoWindow.pixelOffset,position:t.infoWindow.position,maxWidth:t.infoWindow.maxWidth,parentMarker:{...t}}),e.infoWindow.addListener("domready",(()=>{xm(Cm.INFOWINDOWSHOW,{infoWindow:e.infoWindow},this.element)})),e.infoWindow.addListener("closeclick",(()=>{xm(Cm.INFOWINDOWCLOSE,{infoWindow:e.infoWindow},this.element)}))),t.custom&&(e.custom=t.custom),this._renderedMarkers.push(e),xm(Cm.MARKERRENDERED,{createdMarker:e,marker:t},this.element)}))}))}setOptions(t){this.map&&this.map.setOptions(t)}createMarker(t){return this._scriptPromise.then((()=>Promise.resolve(new window.google.maps.Marker(t))))}getCenter(){this._mapPromise.then((()=>Promise.resolve(this.map.getCenter())))}setCenter(t){t&&this._mapPromise.then((()=>{this.map.setCenter(t),this.sendBoundsEvent()}))}updateCenter(){this.latitude&&this.longitude&&this._mapPromise.then((()=>{let t=new window.google.maps.LatLng(parseFloat(this.latitude),parseFloat(this.longitude));t&&this.setCenter(t)}))}latitudeChanged(){this._mapPromise.then((()=>{this.platform.taskQueue.queueTask((()=>{this.updateCenter()}))}))}longitudeChanged(){this._mapPromise.then((()=>{this.platform.taskQueue.queueTask((()=>{this.updateCenter()}))}))}zoomChanged(t){this._mapPromise.then((()=>{this.platform.taskQueue.queueTask((()=>{let e=parseInt(t,10);this.map.setZoom(e)}))}))}markersChanged(t){if(console.log("Markers changed",t),this.logger.debug("Markers changed",t),this.clearMarkers(),this.markerCollectionChange(),!t.length)return;let e=[];this._mapPromise.then((()=>(e=t.map((t=>this.renderMarker(t))),e))).then((t=>{Promise.all(t).then((()=>{this.platform.taskQueue.queueTask((()=>{this.markerClustering.renderClusters(this.map,this._renderedMarkers),this.zoomToMarkerBounds()}))}))}))}markerCollectionChange(){let t=[];this.clearMarkers();for(let e of this.markers)t.push(this.renderMarker(e));Promise.all(t).then((()=>{this.markerClustering.renderClusters(this.map,this._renderedMarkers),this.platform.taskQueue.queueTask((()=>{this.zoomToMarkerBounds()}))}))}zoomToMarkerBounds(t=!1){void 0===t&&(t=!1),(t||this._renderedMarkers&&this.autoUpdateBounds)&&this._mapPromise.then((()=>{let t=new window.google.maps.LatLngBounds;for(let e of this._renderedMarkers){let s=parseFloat(e.position.lat()),i=parseFloat(e.position.lng());if(isNaN(s)||isNaN(i))return void console.warn("Marker returned NaN for lat/lng",{marker:e,lat:s,lng:i});let n=new window.google.maps.LatLng(parseFloat(e.position.lat()),parseFloat(e.position.lng()));t.extend(n)}for(let e of this._renderedPolygons)e.getPath().forEach((e=>{t.extend(e)}));this.map.fitBounds(t)}))}getMapTypeId(){return"HYBRID"===this.mapType.toUpperCase()?window.google.maps.MapTypeId.HYBRID:"SATELLITE"===this.mapType.toUpperCase()?window.google.maps.MapTypeId.SATELLITE:"TERRAIN"===this.mapType.toUpperCase()?window.google.maps.MapTypeId.TERRAIN:window.google.maps.MapTypeId.ROADMAP}initDrawingManager(t={}){return this._mapPromise.then((()=>{if(this.drawingManager)return Promise.resolve();const e=Object.assign({},{drawingMode:this.getOverlayType(this.drawMode),drawingControl:this.drawingControl,drawingControlOptions:this.drawingControlOptions},t);return this.drawingManager=new window.google.maps.drawing.DrawingManager(e),this.drawingManager.addListener("overlaycomplete",(t=>{"POLYGON"!=t.type.toUpperCase()&&"POLYLINE"!=t.type.toUpperCase()||Object.assign(t,{path:t.overlay.getPath().getArray().map((t=>({latitude:t.lat(),longitude:t.lng()}))),encode:this.encodePath(t.overlay.getPath())}),xm(Cm.MAPOVERLAYCOMPLETE,t,this.element)})),Promise.resolve()}))}destroyDrawingManager(){this.drawingManager&&(this.drawingManager.setMap(null),this.drawingManager=null)}getOverlayType(t=""){switch(t.toUpperCase()){case"POLYGON":return window.google.maps.drawing.OverlayType.POLYGON;case"POLYLINE":return window.google.maps.drawing.OverlayType.POLYLINE;case"RECTANGLE":return window.google.maps.drawing.OverlayType.RECTANGLE;case"CIRCLE":return window.google.maps.drawing.OverlayType.CIRCLE;case"MARKER":return window.google.maps.drawing.OverlayType.MARKER;default:return null}}drawEnabledChanged(t,e){this.initDrawingManager().then((()=>{t&&!e?this.drawingManager.setMap(this.map):e&&!t&&this.destroyDrawingManager()}))}drawModeChanged(t=""){this.initDrawingManager().then((()=>{this.drawingManager.setOptions({drawingMode:this.getOverlayType(t)})}))}encodePath(t=[]){return window.google.maps.geometry.encoding.encodePath(t)}decodePath(t){return window.google.maps.geometry.encoding.decodePath(t)}renderPolygon(t=[]){let e=t.paths;if(!e)return;Array.isArray(e)&&(e=e.map((t=>new window.google.maps.LatLng(t.latitude,t.longitude))));let s=new window.google.maps.Polygon(Object.assign({},t,{paths:e}));s.addListener("click",(()=>{xm(Cm.POLYGONCLICK,{polygon:s},this.element)})),s.setMap(this.map),t.infoWindow&&(s.infoWindow=new window.google.maps.InfoWindow({content:t.infoWindow.content,pixelOffset:t.infoWindow.pixelOffset,position:t.infoWindow.position,maxWidth:t.infoWindow.maxWidth,parentPolygon:{...t}})),xm(Cm.POLYGONRENDERED,{polygon:s,polygonObject:t},this.element),this._renderedPolygons.push(s)}polygonsChanged(t){for(let t of this._renderedPolygons)t.setMap(null);this._renderedPolygons=[],this.polygonCollectionChange(),t.length&&this._mapPromise.then((()=>{Promise.all(t.map((t=>"string"==typeof t?this.decodePath(t):t))).then((t=>Promise.all(t.map(this.renderPolygon.bind(this))))).then((()=>{this.platform.taskQueue.queueTask((()=>{this.zoomToMarkerBounds()}))}))}))}polygonCollectionChange(){for(const[t,e]of this._renderedPolygons.entries())e.setMap(null),this._renderedPolygons.splice(t,1);this._mapPromise.then((()=>{for(let t of this.polygons)this.renderPolygon(t)})).then((()=>{this.platform.taskQueue.queueTask((()=>{this.zoomToMarkerBounds()}))}))}};function xm(t,e,s,i=!0){let n;window.CustomEvent?n=new CustomEvent(t,{detail:e,bubbles:i}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,i,!0,{data:e})),s.dispatchEvent(n)}Sm([Oc,Am("design:type",Number)],$m.prototype,"longitude",void 0),Sm([Oc,Am("design:type",Number)],$m.prototype,"latitude",void 0),Sm([Oc,Am("design:type",Number)],$m.prototype,"zoom",void 0),Sm([Oc,Am("design:type",Boolean)],$m.prototype,"disableDefaultUi",void 0),Sm([Oc,Am("design:type",Object)],$m.prototype,"markers",void 0),Sm([Oc,Am("design:type",Boolean)],$m.prototype,"autoUpdateBounds",void 0),Sm([Oc,Am("design:type",Boolean)],$m.prototype,"autoInfoWindow",void 0),Sm([Oc,Am("design:type",Object)],$m.prototype,"mapType",void 0),Sm([Oc,Am("design:type",Object)],$m.prototype,"options",void 0),Sm([Oc,Am("design:type",Object)],$m.prototype,"mapLoaded",void 0),Sm([Oc,Am("design:type",Boolean)],$m.prototype,"drawEnabled",void 0),Sm([Oc,Am("design:type",Object)],$m.prototype,"drawMode",void 0),Sm([Oc,Am("design:type",Object)],$m.prototype,"polygons",void 0),Sm([Oc,Am("design:type",Object)],$m.prototype,"drawingControl",void 0),Sm([Oc,Am("design:type",Object)],$m.prototype,"drawingControlOptions",void 0),$m=Sm([op({name:"google-map",template:""}),Tm(1,Oi),Tm(2,vm),Tm(3,ym),Tm(4,pi),Tm(5,Eu),Am("design:paramtypes",[Element,Object,Object,Object,Object,Object])],$m);const Im=[$m],Rm=function t(e){return{register:t=>(t.get(Oi).options(e),t.register(...Im)),configure:e=>t(e)}}({});var Em=n(379),Om=n.n(Em),Pm=n(795),Mm=n.n(Pm),Nm=n(569),Bm=n.n(Nm),jm=n(565),Lm=n.n(jm),Um=n(216),Dm=n.n(Um),Fm=n(589),Vm=n.n(Fm),Wm=n(970),_m={};_m.styleTagTransform=Vm(),_m.setAttributes=Lm(),_m.insert=Bm().bind(null,"head"),_m.domAPI=Mm(),_m.insertStyleElement=Dm(),Om()(Wm.Z,_m),Wm.Z&&Wm.Z.locals&&Wm.Z.locals;const qm="app",Hm='\n\n<div class="page">\n\t<nav>\n\t\t<a load="about">About</a>\n\t\t<a load="users">Users</a>\n\t\t<a load="weather">Weather</a>\n\t</nav>\n\t<au-viewport class="fancy-scroll"></au-viewport>\n</div>\n',Km=Hm,zm=[];let Gm;function Qm(t){Gm||(Gm=i.b_N.define({name:qm,template:Hm,dependencies:zm})),t.register(Gm)}let Jm=class{};Jm.routes=[{path:["","about"],component:()=>n.e(461).then(n.bind(n,461))},{path:"users",component:()=>n.e(877).then(n.bind(n,877))},{path:"weather",component:()=>n.e(454).then(n.bind(n,454))}],Jm=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}([(0,i.MoW)(t)],Jm);var Xm=n(372),Ym={};Ym.styleTagTransform=Vm(),Ym.setAttributes=Lm(),Ym.insert=Bm().bind(null,"head"),Ym.domAPI=Mm(),Ym.insertStyleElement=Dm(),Om()(Xm.Z,Ym),Xm.Z&&Xm.Z.locals&&Xm.Z.locals;const Zm="current-weather",tw='\n\n<div class="-container-fluid current-weather" if.bind="currentWeather">\n\t<div class="-row">\n\t\t<div class="-col-xs-2">\n\t\t\t<img class="current-weather-icon" src.bind="iconUrl" if.bind="currentWeather" />\n\t\t</div>\n\t</div>\n\t<div class="-row">\n\t\t<div class="-col-xs-2">\n\t\t\t<span class="temperature" if.bind="currentWeather">${temperature}</span><span class="temperature-units" if.bind="currentWeather"><sup>&deg;</sup></span>\n\t\t\t<span class="weather-description" if.bind="currentWeather">${weatherDescription}</span>\n\t\t</div>\n\t</div>\n</div>\n',ew=tw,sw=[];let iw;function nw(t){iw||(iw=i.b_N.define({name:Zm,template:tw,dependencies:sw})),t.register(iw)}var rw=n(909),ow=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o},aw=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let hw=class{constructor(t){this.rest=t,this.apiKey="37cb5829e9494a46ae209ab5417df674",this.temperatureUnits="C"}get temperature(){var t;let e="";if(null===(t=this.currentWeather)||void 0===t?void 0:t.count){const t=this.currentWeather.data[0];e=`${Math.round(t.temp).toString()}`}return e}get weatherDescription(){var t;let e="";return(null===(t=this.currentWeather)||void 0===t?void 0:t.count)&&(e=`${this.currentWeather.data[0].weather.description}`),e}cityChanged(t,e){this.getWeatherCurrentGeosearch()}getWeatherCurrentGeosearch(){this.rest.getWeatherCurrentGeosearch(this.apiKey,this.city).then((t=>{if(!t)throw new Error("No response");if(t.error)throw t.error;this.currentWeather=t,this.iconUrl=this.rest.getWeatherIconUrl(this.apiKey,this.currentWeather.data[0].weather.icon)})).catch((t=>{this.currentWeather=null,this.error=t}))}};ow([i.ExJ,aw("design:type",String)],hw.prototype,"city",void 0),hw=ow([(0,i.MoW)(e),(0,s.f3)(rw.k),aw("design:paramtypes",[rw.k])],hw);const cw={register(t){t.register(hw)}};let lw=class{toView(t){return t&&t.toUpperCase()}};lw=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}([(0,i.jyy)("upper")],lw);const uw={register(t){t.register(rw.k,lw)}};const dw=null!=="/au2-ex1"?"/au2-ex1":"";Ht.register(Wt.customize({basePath:dw}),cw,uw).register(Rm.configure({apiKey:"AIzaSyBDpatbgT78e3gupI5NgbFsyoS7_P9fUcY",apiLibraries:"geometry",options:{panControl:!0,panControlOptions:{position:9},zoom:12}})).app(Jm).start()})()})();